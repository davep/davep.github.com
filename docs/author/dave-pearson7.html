
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="all" />

  <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,400&display=swap" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="https://blog.davep.org/theme/stylesheet/style.min.css">

    <link id="dark-theme-style" rel="stylesheet" type="text/css"
          media="(prefers-color-scheme: dark), (prefers-color-scheme: no-preference)"
    href="https://blog.davep.org/theme/stylesheet/dark-theme.min.css">

    <link id="pygments-dark-theme" rel="stylesheet" type="text/css"
              media="(prefers-color-scheme: dark), (prefers-color-scheme: no-preference)"
          href="https://blog.davep.org/theme/pygments/monokai.min.css">
    <link id="pygments-light-theme" rel="stylesheet" type="text/css"
              media="(prefers-color-scheme: light)"
          href="https://blog.davep.org/theme/pygments/github.min.css">



  <link rel="stylesheet" type="text/css" href="https://blog.davep.org/theme/font-awesome/css/fontawesome.css">
  <link rel="stylesheet" type="text/css" href="https://blog.davep.org/theme/font-awesome/css/brands.css">
  <link rel="stylesheet" type="text/css" href="https://blog.davep.org/theme/font-awesome/css/solid.css">

  <link rel="stylesheet" type="text/css" href="https://blog.davep.org/static/davep.css">

  <link rel="shortcut icon" href="/static/favicon.ico" type="image/x-icon">
  <link rel="icon" href="/static/favicon.ico" type="image/x-icon">


  <link href="https://blog.davep.org/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="blog.davep.org Atom">

  <link href="https://blog.davep.org/feed.xml" type="application/rss+xml" rel="alternate" title="blog.davep.org RSS">







 

    <meta name="author" content="Dave Pearson" />
    <meta name="description" content="" />
  <meta property="og:site_name" content="blog.davep.org"/>
  <meta property="og:type" content="blog"/>
  <meta property="og:title" content="blog.davep.org"/>
  <meta property="og:description" content=""/>
  <meta property="og:locale" content="en_US"/>
  <meta property="og:url" content="https://blog.davep.org"/>
  <meta property="og:image" content="/static/davep.jpeg">

  <title>blog.davep.org &ndash; Posts by Dave Pearson:</title>


</head>
<body >

<aside>
  <div>
    <a href="https://blog.davep.org/">
      <img src="/static/davep.jpeg" alt="davep" title="davep">
    </a>

    <h1>
      <a href="https://blog.davep.org/">davep</a>
    </h1>

    <p>Code, Emacs, VR, Stuff...</p>


    <nav>
      <ul class="list">


            <li>
              <a target="_blank"
                 href="https://blog.davep.org/pages/about.html#about">
                About
              </a>
            </li>
            <li>
              <a target="_blank"
                 href="https://blog.davep.org/pages/dot-files.html#dot-files">
                Dot Files
              </a>
            </li>

          <li>
            <a target="_blank" href="http://davep.at/" >davep@</a>
          </li>
          <li>
            <a target="_blank" href="https://pinboard.in/u:davep" >Pinboard</a>
          </li>
          <li>
            <a target="_blank" href="https://seenbydavep.blogspot.com/" >Photoblog</a>
          </li>
          <li>
            <a target="_blank" href="https://elisp.dev/" >Emacs Packages</a>
          </li>
          <li>
            <a target="_blank" href="https://pypi.org/user/davepearson/" >Python Packages</a>
          </li>
      </ul>
    </nav>

    <ul class="social">
      <li>
        <a class="sc-github"
           href="https://github.com/davep"
           target="_blank">
          <i class="fa-brands fa-github"></i>
        </a>
      </li>
      <li>
        <a class="sc-mastodon"
rel="me"           href="https://fosstodon.org/@davep"
           target="_blank">
          <i class="fa-brands fa-mastodon"></i>
        </a>
      </li>
      <li>
        <a class="sc-flickr"
           href="https://www.flickr.com/photos/davepearson/"
           target="_blank">
          <i class="fa-brands fa-flickr"></i>
        </a>
      </li>
      <li>
        <a class="sc-lastfm"
           href="https://www.last.fm/user/davepdotorg"
           target="_blank">
          <i class="fa-brands fa-lastfm"></i>
        </a>
      </li>
      <li>
        <a class="sc-npm"
           href="https://www.npmjs.com/~davep.org"
           target="_blank">
          <i class="fa-brands fa-npm"></i>
        </a>
      </li>
      <li>
        <a class="sc-youtube"
           href="https://www.youtube.com/user/daveporg"
           target="_blank">
          <i class="fa-brands fa-youtube"></i>
        </a>
      </li>
      <li>
        <a class="sc-steam"
           href="https://steamcommunity.com/id/davepdotorg"
           target="_blank">
          <i class="fa-brands fa-steam"></i>
        </a>
      </li>
    </ul>
  </div>

</aside>
  <main>

<nav>
  <a href="https://blog.davep.org/">Home</a>

  <a href="/archives.html">Archives</a>
  <a href="/categories.html">Categories</a>
  <a href="/tags.html">Tags</a>

  <a href="https://blog.davep.org/feeds/all.atom.xml">Atom</a>

  <a href="https://blog.davep.org/feed.xml">RSS</a>
</nav>



<article>
  <header>
    <h2><a href="https://blog.davep.org/2020/01/19/dnote-el.html#dnote-el">dnote.el - A wrapper for the dnote CLI</a></h2>
    <p>
      Posted on 2020-01-19 16:35 +0000 in <a href="https://blog.davep.org/category/emacs.html">Emacs</a>

          &#8226; Tagged with
              <a href="https://blog.davep.org/tag/emacs.html">Emacs</a>,              <a href="https://blog.davep.org/tag/lisp.html">Lisp</a>,              <a href="https://blog.davep.org/tag/emacs-lisp.html">Emacs Lisp</a>
        &#8226; 3 min read
    </p>
  </header>
  <div>
      <div><p>Late on last year I stumbled on an article about
<a href="https://www.getdnote.com/">dnote</a>. Annoyingly, I can't recall now where I
saw it, but I made a reminder to look at it over my Christmas break.</p>
<p>Dnote looked like a tool that would fill a hole I had in how I work. When it
comes to making notes about things, and keeping things for future reference,
I use a few tools, each one being just right (for me) for the job in
question. I use <a href="https://evernote.com/">Evernote</a> to track documents and
other household type things. I use <a href="https://www.google.com/keep/">Keep</a> to
make notes about stuff I need to remember short-term (say, the size of a
space in my bedroom that I want furniture to go in) and also to record notes
while in meetings at work. I use <a href="https://journey.cloud/">Journey</a> to keep a
journal about... anything, really. Finally, <a href="https://pinboard.in/u:davep">I use
Pinboard</a> to keep hold of URLs I might want to
go back to (I also use it to create a to-read list).</p>
<p>Amongst all of this, however, I felt I was missing something for keeping
track of things that don't really fall into any of the categories above.
Mostly this would be work-based or hacking-based things that are short and
sweet but I don't always use enough to easily remember. I wanted just the
right tool that would let me ferret away useful one-liners, remind myself of
obscure switches that get used once or twice a year, etc.</p>
<p>After reading up on dnote it seemed pretty clear that this was just such a
tool.</p>
<p>After getting back to the office at the start of this month I decided to
make use of it and see how it went. My idea was simple: I'd record any "TIL"
stuff that I might want to remember in the future, as well as recording
things I need now and again but can't always remember.</p>
<p>So far it's working quite well. I like that it has a simple CLI. I like that
it's got a backend that you can use to sync between different machines. I
like that it's got a web interface that's mobile-friendly. I like that <a href="https://github.com/dnote/dnote">it's
Free Software</a> and so you can host your own
server if you wish.</p>
<p>I found I liked it enough that, of course, I felt the need to start <a href="https://github.com/davep/dnote.el">a
simple Emacs wrapper for the CLI</a>.</p>
<p>At the moment dnote.el is designed to be a simple capture system. There are
commands for capturing a one-liner (entered in the Emacs mini-buffer), for
capturing the content of the current buffer, and for capturing
freshly-entered multi-line text, entered in a buffer that uses
<code>markdown-mode</code>. There's also a command for syncing notes if you have
configured dnote to talk to a backend.</p>
<p>What I don't have right now is the ability to navigate and view notes. So
far I've not really felt the need for that because the CLI approach works so
well. Longer-term though I can see my tweaking this and adding in commands
for searching, viewing, editing and deleting notes.</p>
<p>But, for now, if you've not had a look at dnote, I'd highly recommend having
a play and seeing if it makes sense for you. And, if it does, and you're an
Emacs user, perhaps dnote.el will be useful too?</p></div>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="https://blog.davep.org/2020/01/11/where-i-live-and-work.html#where-i-live-and-work">Where I live and work</a></h2>
    <p>
      Posted on 2020-01-11 14:17 +0000 in <a href="https://blog.davep.org/category/coding.html">Coding</a>

          &#8226; Tagged with
              <a href="https://blog.davep.org/tag/emacs.html">Emacs</a>,              <a href="https://blog.davep.org/tag/shell.html">shell</a>
        &#8226; 2 min read
    </p>
  </header>
  <div>
      <div><p>It's no surprise that I spend a lot of time in Emacs. Especially when I'm
developing software, either for work or for personal fun, most of my time is
time spent in Emacs. While I do obviously flit over to Chrome, and mostly do
my CLI stuff in <a href="https://iterm2.com/">iTerm2</a> (I really like
<a href="https://www.gnu.org/software/emacs/manual/html_mono/eshell.html">eshell</a>
but it just can't replace a good terminal for me), I spend a lot of time
looking at Emacs.</p>
<p>Here's what my Emacs looks like:</p>
<p><img alt="Screenshot 2020-01-11 at 13.49.04.png" src="/attachments/2020/01/11/Screenshot 2020-01-11 at 13.49.04.png"></p>
<p>Key elements for me are as follows:</p>
<h1>Light background</h1>
<p>Something I've never really got on with when it comes to code editing is
dark themes and dark backgrounds. I find it too much of an eye strain.
Oddly, I tend to prefer dark themes everywhere else, but not when it comes
to working in Emacs. The theme I use is <a href="https://github.com/davep/.emacs.d/blob/b9a3df42f0708eabc31a6176d69a67bbdf31a087/init.d/init-style.el#L12-L13">the built-in adwaita
theme</a>.</p>
<h1>Less boring mode line</h1>
<p>I make use of <a href="https://github.com/milkypostman/powerline">powerline</a> to
<a href="https://github.com/davep/.emacs.d/blob/b9a3df42f0708eabc31a6176d69a67bbdf31a087/init.d/packages/init-packages-melpa.el#L386-L399">make the mode line a bit less
boring-looking</a>.
While the colour scheme is such that it's kept in line with the light look,
the style is nice in that it sort of matches the style of prompt I use in my
shell.</p>
<p><img alt="Screenshot 2020-01-11 at 14.05.39.png" src="/attachments/2020/01/11/Screenshot 2020-01-11 at 14.05.39.png"></p>
<h1>Full screen</h1>
<p>I always run Emacs as a full-screen application, then splitting it into
different tiled windows using its own internal window handling. This is
something I've done from way back when I got started with my first GNU/Linux
desktop machine, and still like to do on macOS.</p>
<p>I also <a href="https://github.com/davep/longmacs.el">run Emacs as a server</a> and
then use <a href="https://github.com/davep/e">a little wrapper around <code>emacsclient</code></a>
to open files (both locally and remotely) from the command line in that
Emacs session.</p>
<h1>Comfortable eshell when I need it</h1>
<p>Although I say above that I generally don't use <code>eshell</code>, preferring to use
a full-featured terminal application, in combination with
<a href="https://fishshell.com/">fish</a>, I do sometimes dip into eshell for quick
things. So of course I have that configured to feel comfortable too.</p>
<p><img alt="Screenshot 2020-01-11 at 14.10.07.png" src="/attachments/2020/01/11/Screenshot 2020-01-11 at 14.10.07.png"></p>
<p>I do this easily <a href="https://github.com/davep/.emacs.d/blob/b9a3df42f0708eabc31a6176d69a67bbdf31a087/init.d/packages/init-packages-melpa.el#L181-L192">thanks to
<code>eshell-git-prompt</code></a>.</p></div>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="https://blog.davep.org/2019/12/14/nuke-buffers-el.html#nuke-buffers-el">nuke-buffers.el -- Tidy up open buffers in Emacs</a></h2>
    <p>
      Posted on 2019-12-14 13:17 +0000 in <a href="https://blog.davep.org/category/emacs.html">Emacs</a>

          &#8226; Tagged with
              <a href="https://blog.davep.org/tag/emacs.html">Emacs</a>,              <a href="https://blog.davep.org/tag/lisp.html">Lisp</a>,              <a href="https://blog.davep.org/tag/emacs-lisp.html">Emacs Lisp</a>
        &#8226; 2 min read
    </p>
  </header>
  <div>
      <div><p>Both at work and at home I use Emacs by <a href="https://github.com/davep/longmacs.el">keeping a copy running all the
time</a>, and use <a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Emacs-Server.html#Emacs-Server"><code>emacsclient</code> to open
files inside
it</a>
(including on remote machines thanks to a bit of
<a href="https://en.wikipedia.org/wiki/Secure_Shell"><code>ssh</code></a> and heavy use of
<a href="https://www.gnu.org/software/tramp/"><code>tramp</code></a> -- I might write this up at
some point). This works really well, but does mean I tend to build up a lot
of buffers over time.</p>
<p>Having lots of buffers open isn't generally an issue, and if I'm working on
lots of different files in a project during the course of a hacking session
it's actually a good thing. But, quite often, I want to tidy up the buffer
list, clearing it back to near-zero buffers open. Many years ago, when I had
a "proper" tower system running 24/7, with Emacs open all the time, I'd use
<a href="https://www.emacswiki.org/emacs/MidnightMode"><code>clean-buffer-list</code> as part of
<code>midnight</code></a>. Along the way
that fell out of favour with me, likely because I drifted into using
machines that had Emacs open all the time but where the machine wasn't awake
all the time.</p>
<p>Eventually I decided to have some fun rolling my own solution, and
<a href="https://github.com/davep/nuke-buffers.el"><code>nuke-buffers</code></a> was born.</p>
<p>Rather than try and do things in an automated way, this was designed to be
<a href="https://github.com/davep/.emacs.d/blob/ffc863ca0fb669d2f6639bda62e81764c35767ce/init.d/packages/init-packages-delpa.el#L98-L107">bound to a key (or
two)</a>
and then be run when I wanted, being as harsh as possible about cleaning up
the buffer list. Since first writing it it's worked well for me.</p>
<p>These days I tend to let the buffer list build up as I work on a new
feature, or chase down a bug, etc. Then, once I've made the final commit for
that period of focus, I'll hit the <code>nuke-buffer</code> key combo as the final act
of confirming that I've done the job. So not only does this help tidy my
Emacs session a bit, it also feels like a physical form of punctuation --
back in less sensible days, when I had some terrible habits, it would have
been when I'd reach for the celebratory cigarette; buffer-tidying feels far
more wholesome. ;)</p>
<p>The way the code works is, of course, mostly directed at how I work -- it's
highly likely it wouldn't make sense for many other people. The main aim is
to kill as many buffers as possible, but without disturbing anything else.
The list of buffers it gathers for nuking avoids buffers that are <a href="https://github.com/davep/nuke-buffers.el/blob/d018499b78968f074565c076068f657a1631aa07/nuke-buffers.el#L60-L62">visiting
files but have unsaved
content</a>,
avoids <a href="https://github.com/davep/nuke-buffers.el/blob/d018499b78968f074565c076068f657a1631aa07/nuke-buffers.el#L54">the
minibuffer</a>
(obviously), avoids <a href="https://github.com/davep/nuke-buffers.el/blob/d018499b78968f074565c076068f657a1631aa07/nuke-buffers.el#L56">any "special"
buffer</a>
(one that starts with a space then an asterisk), avoids <a href="https://github.com/davep/nuke-buffers.el/blob/d018499b78968f074565c076068f657a1631aa07/nuke-buffers.el#L73">the current
buffer</a>
and also avoids <a href="https://github.com/davep/nuke-buffers.el/blob/d018499b78968f074565c076068f657a1631aa07/nuke-buffers.el#L58">any buffer in a list of names to
avoid</a>.</p>
<p>I've being using this on a daily basis for around 2.5 years now and it's
done the job without ever losing me any work.</p></div>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="https://blog.davep.org/2019/12/08/git2gantt.html#git2gantt">git2gantt -- Simple tool to visualise coding runs</a></h2>
    <p>
      Posted on 2019-12-08 13:44 +0000 in <a href="https://blog.davep.org/category/python.html">Python</a>

          &#8226; Tagged with
              <a href="https://blog.davep.org/tag/python.html">Python</a>,              <a href="https://blog.davep.org/tag/documentation.html">documentation</a>
        &#8226; 3 min read
    </p>
  </header>
  <div>
      <div><p>At the start of this year, as part of a much bigger process to review the
work that had taken place over the previous 12 months, I was asked (at work)
to provide some information about how much time I'd spent on various
projects. Now, for me, there's really only one project, but there's lots of
different tools and libraries that I've written to support the main work I
do. All of these are split into different repositories in the
company-internal instance of <a href="https://about.gitlab.com/">GitLab</a>. This meant
that getting a rough idea of what I was working on and when would be easy
enough -- it's all there in the commit history.</p>
<p>Given that this information would make up a couple of slides at most during
a far bigger presentation, I wanted something that would be snappy and easy
for non-developers to follow and understand. I spent a bit of time pondering
some options and decided that (ab)using a <a href="https://en.wikipedia.org/wiki/Gantt_chart">gantt
chart</a> layout would make sense.</p>
<p>That choice was made all the more easier given that <a href="https://docs.gitlab.com/ee/user/markdown.html#mermaid">GitLab
supports</a> the use of
<a href="https://mermaid-js.github.io/mermaid/#/">mermaid charts</a> within its
Markdown. This meant I could quickly write some code that took the git log
of each repository, turned it into mermaid code, and then render it (by
hand, this was all about getting things done quickly) via GitLab.</p>
<p>This sounded like it could be a fun personal project. The result was some
Python code called <a href="https://github.com/davep/git2gantt">git2gantt</a>.</p>
<p>As mentioned above, the output isn't anything too clever, it's just code
that can be used to create a plot via mermaid. For example, running
git2gannt over itself:</p>
<div class="highlight"><pre><span></span><code>gantt
  title git2gantt output
  dateFormat YYYY-MM-DD

  section git2gantt
  Development: devgit2gantt20190208, 2019-02-08, 2019-02-13
  Development: devgit2gantt20190214, 2019-02-14, 2019-02-15
  Development: devgit2gantt20190303, 2019-03-03, 2019-03-04
  Development: devgit2gantt20191203, 2019-12-03, 2019-12-04
</code></pre></div>

<p>Usage is pretty straightforward: <img alt="Screenshot 2019-12-08 at
13.18.12.png" src="/attachments/2019/12/08/Screenshot 2019-12-08 at 13.18.12.png">
As you can see, it can be run over multiple repos at once, and there's also
an option to have it consider every branch within each repository. Another
handy option is the ability to limit the output to just one author --
perhaps you just want to document what you've done on a repo, not the
contributions of other people.</p>
<p>Also especially handy, if you don't want to bore people with too much
detail, is the "fuzz" option. This lets you tell <code>git2gannt</code> how relaxed you
want it to be when it tries to decide how long a run of work on a repo
lasted. So, perhaps, you're working on and off on a library that supports
some other system you're documenting, but you might only be making changes
every other day or so. With the correct fuzz value you can make it clear you
were working <em>on</em> the library for a couple of weeks, despite there only
being a commit every other day.</p>
<p>An example of running the output over a handful of projects would look
something like this:</p>
<p><img alt="Screenshot 2019-12-08 at 13.34.41.png" src="/attachments/2019/12/08/Screenshot 2019-12-08 at 13.34.41.png"></p>
<p>This is one of those tools I knocked up quickly to get a job done, and
haven't quite got round to finishing off fully. One thing I'd really like to
do is add mermaid support directly within it, so that it actually has the
option to emit plots, not just mermaid code (or, perhaps, drop the mermaid
approach and use something else entirely).</p>
<p>Meanwhile though, if you're looking for something quick and dirty that will
help you visualise what you've been working on and when for a good period of
time... perhaps this will help.</p></div>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="https://blog.davep.org/2019/12/01/being-phony-and-lispy-regular-expressions.html#being-phony-and-lispy-regular-expressions">Being phony, and Lispy regular expressions</a></h2>
    <p>
      Posted on 2019-12-01 16:42 +0000 in <a href="https://blog.davep.org/category/emacs.html">Emacs</a>

          &#8226; Tagged with
              <a href="https://blog.davep.org/tag/emacs.html">Emacs</a>,              <a href="https://blog.davep.org/tag/lisp.html">Lisp</a>,              <a href="https://blog.davep.org/tag/emacs-lisp.html">Emacs Lisp</a>
        &#8226; 2 min read
    </p>
  </header>
  <div>
      <div><p>While it does seem that they're a little out of fashion these days, in some
circles anyway, I'm still an avid fan of <code>make</code> and make files. Even in
environments where I don't need a <code>Makefile</code> to actually build anything,
I'll use one (or more) to help create handy shortcuts for getting stuff
done.</p>
<p>Looking at the main <code>Makefile</code> for one of my major work projects, there's 45
targets that help fire off various jobs (all of them <a href="https://marmelab.com/blog/2016/02/29/auto-documented-makefile.html">self-documenting using
a variation on an approach I read a while
back</a>).</p>
<p>In most cases the targets aren't real targets. That's to say, they don't
build the thing they're called. They are <a href="https://www.gnu.org/software/make/manual/html_node/Phony-Targets.html">phony
targets</a>.
So, as makes sense, I make a point of marking them all as such. I follow the
convention that has the <code>.PHONY</code> marker appear on the line before the
target; this feels cleaner to me and easier to follow and maintain.</p>
<p>But.... I'm lazy. And I use Emacs. Typing out <code>.PHONY foo</code> all the time
feels like far too much work. So, some time ago, I quickly threw together
<a href="https://github.com/davep/make-phony.el"><code>make-phony.el</code></a>.</p>
<p>With this I could be <em>really</em> lazy. I could type out the <code>Makefile</code> target
and then, with my cursor on it, press a key combination and have the
<code>.PHONY</code> marker put in place.</p>
<p>Does it save much time? Yeah, probably not really. But it was a fun little
exercise and an excuse to write a little bit of Emacs Lisp.</p>
<p>There's one thing I made a point of doing in the heart of this too: using
<code>rx</code>. For anyone who doesn't know of it, think of it as a very Lispy way of
writing regular expressions. I won't even try and explain it all here
<a href="http://francismurillo.github.io/2017-03-30-Exploring-Emacs-rx-Macro/">because others have done an excellent job
already</a>.
What I will do is say this: if you're in the habit of writing some Emacs
Lisp, or even tinkering with your configuration, and you find yourself
writing a regular expression, consider looking at <code>rx</code> -- it's well worth
the time to get to know it.</p>
<p>Slowly, as time goes on, I'm weeding out "vanilla" regular expressions from
my config and code and moving over to using <code>rx</code>. I feel, quite rightly I
think, that <a href="https://github.com/davep/.emacs.d/blob/b3185a1dbaa0a16f540465844b84c5e1c6a77180/init.d/packages/init-packages-melpa.el#L117-L126">something like
this</a>:</p>
<div class="highlight"><pre><span></span><code><span class="p">(</span><span class="nb">rx</span>
<span class="w"> </span><span class="p">(</span><span class="k">or</span>
<span class="w">  </span><span class="c1">;; Ignore hidden files.</span>
<span class="w">  </span><span class="p">(</span><span class="nv">group</span><span class="w"> </span><span class="nv">bol</span><span class="w"> </span><span class="s">&quot;.&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="c1">;; I never want to edit the desktop.</span>
<span class="w">  </span><span class="p">(</span><span class="nv">group</span><span class="w"> </span><span class="s">&quot;Desktop/&quot;</span><span class="w"> </span><span class="nv">eol</span><span class="p">)</span>
<span class="w">  </span><span class="c1">;; Ignore compiled files.</span>
<span class="w">  </span><span class="p">(</span><span class="nv">group</span><span class="w"> </span><span class="s">&quot;.&quot;</span><span class="w"> </span><span class="p">(</span><span class="k">or</span><span class="w"> </span><span class="s">&quot;pyc&quot;</span><span class="w"> </span><span class="s">&quot;elc&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">eol</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nv">group</span><span class="w"> </span><span class="s">&quot;.egg-info/&quot;</span><span class="w"> </span><span class="nv">eol</span><span class="p">)))</span>
</code></pre></div>

<p>is much easier to write, read and maintain, than this:</p>
<div class="highlight"><pre><span></span><code>&quot;\\(^\\.\\)\\|\\(Desktop/$\\)\\|\\(\\.\\(?:\\(?:\\(?:el\\|py\\)c\\)\\)$\\)\\|\\(\\.egg-info/$\\)&quot;
</code></pre></div>

<p>I mean, even <em>if</em> the regular expression above can be written in a more
efficient way (and I imagine it can), as someone working in a Lisp
environment, I'd much sooner write and work with the <code>rx</code> version.</p></div>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="https://blog.davep.org/2019/11/24/emacsconf-2019-videos-are-out.html#emacsconf-2019-videos-are-out">EmacsConf 2019 videos are out</a></h2>
    <p>
      Posted on 2019-11-24 17:17 +0000 in <a href="https://blog.davep.org/category/emacs.html">Emacs</a>

          &#8226; Tagged with
              <a href="https://blog.davep.org/tag/emacs.html">Emacs</a>
        &#8226; 1 min read
    </p>
  </header>
  <div>
      <div><p>At the start of this month <a href="/2019/11/02/emacsconf-2019.html">I spent a very enjoyable Saturday afternoon
watching EmacsConf 2019</a>. If you missed it,
or even if you didn't, you might like to know that <a href="https://lists.gnu.org/r/emacsconf-discuss/2019-11/msg00002.html">the announcement has
gone out</a>
that almost all of the videos are <a href="https://emacsconf.org/2019/videos">now available for
watching</a>.</p>
<p>While I mean nothing negative about any other video, I think the two that
stand out the most for me, in terms of things that grabbed my interest, were
<a href="https://media.emacsconf.org/2019/08.html"><em>How a Completely Blind Manager/Dev Uses Emacs Every
Day</em></a> and <a href="https://media.emacsconf.org/2019/15.html"><em>Emacs as my Go To
Script Language</em></a>.</p>
<p>I seem to recall that both those talks were hit with technical issues (many
talks on the day were -- part of the enjoyment for me was how the whole
conference was an experiment in using Free Software to host the whole
thing), but they're well worth a watch despite this.</p>
<p>If you have any sort of interest in Emacs I'd highly recommend dipping into
the whole collection.</p>
<p>I really hope there's going to be a 2020 EmacsConf.</p></div>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="https://blog.davep.org/2019/11/23/visual-evolution-of-emacs-config.html#visual-evolution-of-emacs-config">Visual evolution of ~/.emacs.d</a></h2>
    <p>
      Posted on 2019-11-23 14:42 +0000 in <a href="https://blog.davep.org/category/emacs.html">Emacs</a>

          &#8226; Tagged with
              <a href="https://blog.davep.org/tag/emacs.html">Emacs</a>,              <a href="https://blog.davep.org/tag/lisp.html">Lisp</a>,              <a href="https://blog.davep.org/tag/emacs-lisp.html">Emacs Lisp</a>
        &#8226; 2 min read
    </p>
  </header>
  <div>
      <div><p>As detailed in a blog post I wrote <a href="/2016/05/26/starting_fresh_with_gnu_emacs.html">back in
2016</a>, I first got into
using Emacs in the mid 1990s, starting with it on OS/2 and then moving over
to GNU/Linux. It's been my often-used and much-loved development environment
for most of those years (I even have a couple of packages that are part of
Emacs itself).</p>
<p>For most of that time my configuration was a single <code>~/.emacs</code> file, which
was around 1,000 lines in length (including comments and whitespace). It'd
grown over the years, having special configuration sections for versions of
Emacs I didn't use any more, and operating systems I didn't work on any more
(yes, really, there were things in there specific to MS-DOS, for example).
On top of that I always hand-installed packages I used -- Emacs' package
management system having turned up long after I first got into using Emacs.</p>
<p>Then, in early 2016, I decided to nuke the whole thing and start from
scratch. As mentioned above, the start of this <a href="/2016/05/26/starting_fresh_with_gnu_emacs.html">is detailed in an older
post</a>. Another big round of
changes <a href="/2017/04/01/another_revamp_of_my_emacs_config.html">happened round a year
later</a> -- which included
the birth of <a href="http://blog.davep.org/delpa/">delpa</a> to manage my personal
packages. A couple or so months later there was <a href="/2017/07/13/more_revamping_of_my_emacs_config.html">one last big round of
changes</a>, mostly killing
off my enthusiastic embracing of
<a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Easy-Customization.html#Easy-Customization"><code>customize</code></a>
and instead going back to hand-set settings, only this time done via
<a href="https://github.com/jwiegley/use-package"><code>use-package</code></a>.</p>
<p>The full history of this <a href="https://github.com/davep/.emacs.d">can be found over on
GitHub</a>, starting with the first "throw
everything away and start again" process and all the steps between then and
where my Emacs configuration is now.</p>
<p>Which brings me to the fun part of this blog post. Earlier this week I
stumbled on <a href="https://gource.io/">Gource</a>. It's a tool that's primarily
designed to visualise changes in repositories, although it can be used to
visualise anything that has a tree structure and changes over time (this
week I produced a video of the growth of my employer's electronic lab
notebook by hooking up the <a href="https://www.benchling.com/">Benchling</a> API with
Gource, for example). So I got curious. What did it look like as I reworked
and tweaked and changed and tinkered with my Emacs configuration?</p>
<p>This is what it looked like:</p>
<p><a href="https://www.youtube.com/watch?v=bH4G80aZgsM"><img alt="Visit YouTube" src="https://img.youtube.com/vi/bH4G80aZgsM/0.jpg"></a></p></div>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="https://blog.davep.org/2019/11/17/getting-started.html#getting-started">Getting started</a></h2>
    <p>
      Posted on 2019-11-17 11:36 +0000 in <a href="https://blog.davep.org/category/coding.html">Coding</a>

          &#8226; Tagged with
              <a href="https://blog.davep.org/tag/coding.html">Coding</a>,              <a href="https://blog.davep.org/tag/learning.html">learning</a>
        &#8226; 2 min read
    </p>
  </header>
  <div>
      <div><p>By coincidence, in a couple of different places over the last couple of
weeks, the subject of <em>"how do I progress in leaning to program?"</em> has
cropped up. For me, I think the approaches and solutions tend to be the same
for when I want to get my head around a new language: read good examples of
idiomatic code, read other related materials, find a problem you care about
and implement a solution (ideally something you'll directly benefit from, or
at least others may benefit from). Hence the <a href="/2019/11/10/going-on-a-journey.html">5x5 puzzle and Norton Guide
reader projects I mentioned in my previous
post</a>.</p>
<p>Of course, not everyone has problems that they need solving in a way that
would work for this approach. So another approach I've recommended in the
past is to go looking on somewhere like GitHub and find projects that
promote "low-hanging fruit" issues in a way that's designed to be friendly
for those who are new to development, new to contributing or new to the
problem domain.</p>
<p>While looking for examples of this yesterday I stumbled on <a href="https://github.com/MunGell/awesome-for-beginners"><em>Awesome for
Beginners</em></a>. This looks
like a great list and one I'm going to keep <a href="https://pinboard.in/u:davep/">bookmarked for future
reference</a>. Now, this particular list does
seem to have an emphasis on <a href="https://github.com/MunGell/awesome-for-beginners/issues/215">pulling in people who are new to contributing
to a project</a>
rather than new to development, but it does strike me as a good place to
start looking no matter where you're coming from.</p>
<p>I know I'm going to start having a wander around that list. It's always nice
to contribute and I feel there's real personal benefit in actively solving a
problem that someone else has and welcomes help with.</p></div>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="https://blog.davep.org/2019/11/10/going-on-a-journey.html#going-on-a-journey">Going on a journey</a></h2>
    <p>
      Posted on 2019-11-10 14:32 +0000 in <a href="https://blog.davep.org/category/python.html">Python</a>

          &#8226; Tagged with
              <a href="https://blog.davep.org/tag/python.html">Python</a>
        &#8226; 3 min read
    </p>
  </header>
  <div>
      <div><p>It's hardly a revelation to say that learning a new programming language, or
even learning software development at all, is even more difficult if you
don't have an actual problem to solve. I know I'm not alone in having pet
projects that, when faced with a new environment, I'll code up a version of
that project as a way to get familiar with and understand a language's
idioms while implementing something I know well.</p>
<p>Personally, my two favourites are a puzzle called 5x5
(<a href="https://github.com/davep/5x5.xml">here</a>,
<a href="https://github.com/davep/Chrome-5x5">here</a>,
<a href="https://github.com/davep/5x5-for-Chrome">here</a>,
<a href="https://github.com/davep/5x5-Palm">here</a>,
<a href="https://github.com/davep/5x5.el">here</a>,
<a href="https://github.com/davep/5x5-react">here</a> and
<a href="http://davep.org/misc/5x5/">here</a>), and writing a library or even a full
application to read <a href="https://en.wikipedia.org/wiki/Norton_Guides">Norton Guide database
files</a>
(<a href="https://github.com/davep/ng2html">here</a>,
<a href="https://github.com/davep/w3ng">here</a>,
<a href="https://github.com/davep/eg-OS2">here</a>,
<a href="https://github.com/davep/weg1013">here</a>,
<a href="https://github.com/davep/weg">here</a>, <a href="https://github.com/davep/eg">here</a>,
<a href="https://github.com/davep/eg.el">here</a> and
<a href="https://github.com/davep/jsNG">here</a>). Both are fun to work on, have
practical uses, and both have the benefit of being solved problems (for me)
that let me concentrate on the "how do I do <em>X</em> in this
language/toolkit/environment/framework/etc?".</p>
<p>Even with those two as my goto projects, I'm always open to new small
problems that might be fun to apply to languages I do know, or languages I
want to get to know (internally at work <a href="https://twitter.com/davepdotorg/status/1123952281156751361">we have a fun "league" of sorts,
writing a particular hamming distance calculation tool in different
languages</a>, for
example).</p>
<p>A few days ago, via <a href="https://github.com/Lethrir/Journeys">this repo on
GitHub</a>, I discovered <a href="https://github.com/mikehadlow/Journeys">this fun little
problem</a>. Right away I could see the
benefit in it. As a "go away and code up a solution" interview question it
strikes me as near-perfect. It's obviously not hard to solve, but it touches
on some basic but important aspects of software development and so will
allow the developer to show off how they approach things.</p>
<p>There's so many different approaches to it too. Even in a single language, I
could imagine having some fun writing the smallest code to solve the
problem, the most idiomatic code to solve the problem, the most supportable
and well-documented code to solve the problem, etc. And then there's the
thing I talk about above: knowing the solution and knowing it's easy, you
can then use it to learn the idiomatic way of solving the problem in new
languages.</p>
<p>Even better, <a href="https://github.com/mikehadlow/Journeys#other-solutions">the README of the original repo links to solutions others have
written</a>. Knowing
the problem, and knowing the solution, you can then go and read other
people's code and learn something about different styles and different
languages.</p>
<p>Over the next few weeks, as I get free time, I think I might just do this.
Take the "Journeys" problem and write versions in different languages I work
with, or know, and also use it to get to know languages I've yet to know or
use heavily (I'm especially keen to try a version in
<a href="https://julialang.org/">Julia</a> -- a language I really like the look of and
want to find a reason to use).</p>
<p>Meanwhile, yesterday, I had a quick go at a first version in Python (aimed
at Python 3.8 or higher):
<a href="https://github.com/davep/journeys.py">https://github.com/davep/journeys.py</a></p>
<p>I set out to try and write something that was fairly idiomatic Python, which
uses tools that I tend to employ when working on Python projects (pipenv,
make, etc), and which also <a href="https://docs.python.org/3/library/dataclasses.html">used something I've never quite found a need for
so far</a> in my usual
coding, but which I can see being useful and helpful.</p>
<p>I even threw in a couple of uses of <a href="https://www.python.org/dev/peps/pep-0572/">PEP
572</a>!</p>
<p>I can see me tinkering with this some more over the next few days. I can
even see me writing a very different implementation in Python, just for the
fun of it.</p>
<p>I think that's what I like about this little problem. It's a good way to do
a bit of programming exercise; it's like the perfect way to do the
programming equivalent of going for a short run.</p></div>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="https://blog.davep.org/2019/11/04/my-pylint-shame.html#my-pylint-shame">My Pylint shame</a></h2>
    <p>
      Posted on 2019-11-04 20:39 +0000 in <a href="https://blog.davep.org/category/python.html">Python</a>

          &#8226; Tagged with
              <a href="https://blog.davep.org/tag/python.html">Python</a>,              <a href="https://blog.davep.org/tag/fish.html">fish</a>
        &#8226; 3 min read
    </p>
  </header>
  <div>
      <div><p>I first got into Python in the mid-to-late 1990s. It's so far back that I
think the copy of <a href="https://www.python.org/doc/essays/foreword/">Programming
Python</a> that I have (sadly in
storage at the moment) might be a first edition. I probably fell out of the
habit of using Python some time in the early 2000s (that was when I met
Ruby). It was only 22 months ago that I started using Python a <em>lot</em> thanks
to <a href="/2017/12/12/on_to_something_new.html">a change of
employer</a>.</p>
<p>As you might imagine, much had changed in the 15+ years since I'd last
written a line of Python in anger. So, early on, I made a point of making
<a href="https://www.pylint.org/">Pylint</a> part of my development process. All my
projects have a <code>make lint</code> make target. All of my projects lint the code
when I push to <code>master</code> in the company GitLab instance. These days I even
use <a href="https://www.flycheck.org/en/latest/">flycheck</a> to keep me honest as I
write my code; mostly gone are the days where I don't know of problems until
I do a <code>make lint</code>.</p>
<p>Leaning on Pylint in the early days of my new position made for a great
Python refresher for me. Now, I still lean on it to make sure I don't make
daft mistakes.</p>
<p>But...</p>
<p>Pylint and I don't always agree. And that's fine. For example, I really
can't stand Pylint's approach to whitespace, and that is a hill I'll happily
die on. Ditto the obsession with lines being no more than 80 characters wide
(120 should be fine thanks). As such any project's <code>.pylintrc</code> has, as a
bare minimum, this:</p>
<div class="highlight"><pre><span></span><code><span class="k">[FORMAT]</span>
<span class="na">max-line-length</span><span class="o">=</span><span class="s">120</span>

<span class="k">[MESSAGES CONTROL]</span>
<span class="na">disable</span><span class="o">=</span><span class="s">bad-whitespace</span>
</code></pre></div>

<p>Beyond that though, aside from one or two extras that pertain to particular
projects, I'm happy with what Pylint complains about.</p>
<p>There are exceptions though. There are times, simply due to the nature of
the code involved, that Pylint's insistence on code purity isn't going to
work. That's where I use its inline <a href="https://pylint.readthedocs.io/en/latest/user_guide/message-control.html#block-disables">block disabling
feature</a>.
It's handy and helps keep things clean (I won't deploy code that doesn't
pass 10/10), but there is always this nagging doubt: if I've disabled a
warning in the code, am I ever going to come back and revisit it?</p>
<p>To help me think about coming back to such disables now and again, I thought
it might be interesting to write a tool that'll show which warnings I
disable most. It resulted in <a href="https://github.com/davep/fish/blob/dd2721e0565928b4145698a42c9c74e4534c578a/conf.d/abbr.d/python.fish#L5">this fish
abbr</a>:</p>
<div class="highlight"><pre><span></span><code>abbr<span class="w"> </span>-g<span class="w"> </span>pylintshame<span class="w"> </span><span class="s2">&quot;rg --no-messages \&quot;pylint:disable=\&quot; | awk &#39;BEGIN{FS=\&quot;disable=\&quot;;}{print \$2}&#39; | tr \&quot;,\&quot; \&quot;\n\&quot; | sort | uniq -c | sort -hr&quot;</span>
</code></pre></div>

<p>The idea here being that it produces a "Pylint hall of shame", something
like this:</p>
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="mi">12</span><span class="w"> </span><span class="n">wildcard</span><span class="o">-</span><span class="n">import</span>
<span class="w">  </span><span class="mi">12</span><span class="w"> </span><span class="n">unused</span><span class="o">-</span><span class="n">wildcard</span><span class="o">-</span><span class="n">import</span>
<span class="w">   </span><span class="mi">8</span><span class="w"> </span><span class="n">no</span><span class="o">-</span><span class="n">member</span>
<span class="w">   </span><span class="mi">6</span><span class="w"> </span><span class="n">invalid</span><span class="o">-</span><span class="n">name</span>
<span class="w">   </span><span class="mi">5</span><span class="w"> </span><span class="n">no</span><span class="o">-</span><span class="bp">self</span><span class="o">-</span><span class="n">use</span>
<span class="w">   </span><span class="mi">4</span><span class="w"> </span><span class="n">import</span><span class="o">-</span><span class="n">outside</span><span class="o">-</span><span class="n">toplevel</span>
<span class="w">   </span><span class="mi">4</span><span class="w"> </span><span class="n">bare</span><span class="o">-</span><span class="n">except</span>
<span class="w">   </span><span class="mi">2</span><span class="w"> </span><span class="n">unused</span><span class="o">-</span><span class="n">argument</span>
<span class="w">   </span><span class="mi">2</span><span class="w"> </span><span class="n">too</span><span class="o">-</span><span class="n">many</span><span class="o">-</span><span class="n">public</span><span class="o">-</span><span class="n">methods</span>
<span class="w">   </span><span class="mi">2</span><span class="w"> </span><span class="n">too</span><span class="o">-</span><span class="n">many</span><span class="o">-</span><span class="n">instance</span><span class="o">-</span><span class="n">attributes</span>
<span class="w">   </span><span class="mi">2</span><span class="w"> </span><span class="ow">not</span><span class="o">-</span><span class="n">callable</span>
<span class="w">   </span><span class="mi">2</span><span class="w"> </span><span class="n">broad</span><span class="o">-</span><span class="n">except</span>
<span class="w">   </span><span class="mi">1</span><span class="w"> </span><span class="n">wrong</span><span class="o">-</span><span class="n">import</span><span class="o">-</span><span class="n">position</span>
<span class="w">   </span><span class="mi">1</span><span class="w"> </span><span class="n">wrong</span><span class="o">-</span><span class="n">import</span><span class="o">-</span><span class="n">order</span>
<span class="w">   </span><span class="mi">1</span><span class="w"> </span><span class="n">unused</span><span class="o">-</span><span class="n">variable</span>
<span class="w">   </span><span class="mi">1</span><span class="w"> </span><span class="n">unexpected</span><span class="o">-</span><span class="n">keyword</span><span class="o">-</span><span class="n">arg</span>
<span class="w">   </span><span class="mi">1</span><span class="w"> </span><span class="n">too</span><span class="o">-</span><span class="n">many</span><span class="o">-</span><span class="n">locals</span>
<span class="w">   </span><span class="mi">1</span><span class="w"> </span><span class="n">arguments</span><span class="o">-</span><span class="n">differ</span>
</code></pre></div>

<p>To break the pipeline down:</p>
<div class="highlight"><pre><span></span><code>rg --no-messages &quot;pylint:disable=&quot;
</code></pre></div>

<p>First off, I use <a href="https://github.com/BurntSushi/ripgrep"><code>ripgrep</code></a> (if you
don't, you might want to have a good look at it -- I find it amazingly
handy) to find everywhere in the code in and below the current directory
(the <code>--no-messages</code> switch just stops any file I/O errors that might result
from permission issues -- they're not interesting here) that contains a line
that has a Pylint block disable (if you tend to format yours differently,
you'll need to tweak the regular expression, of course).</p>
<p>I then pipe it through <code>awk</code>:</p>
<div class="highlight"><pre><span></span><code><span class="n">awk</span> <span class="s">&#39;BEGIN{FS=&quot;disable=&quot;;}{print $2}&#39;</span>
</code></pre></div>

<p>so I can lazily <a href="https://docs.freebsd.org/info/gawk/gawk.info.Field_Separators.html">extract everything after the
<code>disable=</code></a>.</p>
<p>Next up, because it's a possible list of things that can be disabled, I use
<code>tr</code>:</p>
<div class="highlight"><pre><span></span><code>tr &quot;,&quot; &quot;\n&quot;
</code></pre></div>

<p>to turn any comma-separated list into multiple lines.</p>
<p>Having got to this point, I <code>sort</code> the list, <code>uniq</code> the result, while
prepending a count (<code>-c</code>), and then <code>sort</code> the result again, in reverse and
sorting the numbers based on how a human would read the result (<code>-hr</code>).</p>
<div class="highlight"><pre><span></span><code>sort | uniq -c | sort -hr
</code></pre></div>

<p>It's short, sweet and hacky, but does the job quite nicely. From now on, any
time I get curious about which disables I'm leaning on too much, I can use
this to take stock.</p></div>
  </div>
</article>

  <div class="pagination">
    <a class="btn float-left" href="https://blog.davep.org/author/dave-pearson8.html">
      <i class="fa fa-angle-left"></i> Older Posts
    </a>
    <a class="btn float-right" href="https://blog.davep.org/author/dave-pearson6.html">
      Newer Posts <i class="fa fa-angle-right"></i>
    </a>
  </div>



<footer>
<p>&copy; 2015-2023 Dave Pearson</p>
<p>
Built with <a href="http://getpelican.com" target="_blank">Pelican</a> using <a href="http://bit.ly/flex-pelican" target="_blank">Flex</a> theme
  <span class="footer-separator">|</span>
  Switch to the <a href="javascript:void(0)" onclick="theme.switch(`dark`)">dark</a> | <a href="javascript:void(0)" onclick="theme.switch(`light`)">light</a> | <a href="javascript:void(0)" onclick="theme.switch(`browser`)">browser</a> theme
  <script id="dark-theme-script"
          src="https://blog.davep.org/theme/dark-theme/dark-theme.min.js"
          data-enable-auto-detect-theme="True"
          data-default-theme="dark"
          type="text/javascript">
  </script>
</p></footer>  </main>

<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " blog.davep.org ",
  "url" : "https://blog.davep.org",
  "image": "/static/davep.jpeg",
  "description": ""
}
</script>
</body>
</html>