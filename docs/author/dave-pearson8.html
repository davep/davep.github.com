
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="all" />

  <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,400&display=swap" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="https://blog.davep.org/theme/stylesheet/style.min.css">

    <link id="dark-theme-style" rel="stylesheet" type="text/css"
          media="(prefers-color-scheme: dark), (prefers-color-scheme: no-preference)"
    href="https://blog.davep.org/theme/stylesheet/dark-theme.min.css">

    <link id="pygments-dark-theme" rel="stylesheet" type="text/css"
              media="(prefers-color-scheme: dark), (prefers-color-scheme: no-preference)"
          href="https://blog.davep.org/theme/pygments/monokai.min.css">
    <link id="pygments-light-theme" rel="stylesheet" type="text/css"
              media="(prefers-color-scheme: light)"
          href="https://blog.davep.org/theme/pygments/github.min.css">



  <link rel="stylesheet" type="text/css" href="https://blog.davep.org/theme/font-awesome/css/fontawesome.css">
  <link rel="stylesheet" type="text/css" href="https://blog.davep.org/theme/font-awesome/css/brands.css">
  <link rel="stylesheet" type="text/css" href="https://blog.davep.org/theme/font-awesome/css/solid.css">

  <link rel="stylesheet" type="text/css" href="https://blog.davep.org/static/davep.css">

  <link rel="shortcut icon" href="/static/favicon.ico" type="image/x-icon">
  <link rel="icon" href="/static/favicon.ico" type="image/x-icon">


  <link href="https://blog.davep.org/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="blog.davep.org Atom">

  <link href="https://blog.davep.org/feed.xml" type="application/rss+xml" rel="alternate" title="blog.davep.org RSS">







 

    <meta name="author" content="Dave Pearson" />
    <meta name="description" content="" />
  <meta property="og:site_name" content="blog.davep.org"/>
  <meta property="og:type" content="blog"/>
  <meta property="og:title" content="blog.davep.org"/>
  <meta property="og:description" content=""/>
  <meta property="og:locale" content="en_US"/>
  <meta property="og:url" content="https://blog.davep.org"/>
  <meta property="og:image" content="/static/davep.jpeg">

  <title>blog.davep.org &ndash; Posts by Dave Pearson:</title>


</head>
<body >

<aside>
  <div>
    <a href="https://blog.davep.org/">
      <img src="/static/davep.jpeg" alt="davep" title="davep">
    </a>

    <h1>
      <a href="https://blog.davep.org/">davep</a>
    </h1>

    <p>Code, Emacs, VR, Stuff...</p>


    <nav>
      <ul class="list">


            <li>
              <a target="_blank"
                 href="https://blog.davep.org/pages/about.html#about">
                About
              </a>
            </li>
            <li>
              <a target="_blank"
                 href="https://blog.davep.org/pages/dot-files.html#dot-files">
                Dot Files
              </a>
            </li>

          <li>
            <a target="_blank" href="http://davep.at/" >davep@</a>
          </li>
          <li>
            <a target="_blank" href="https://pinboard.in/u:davep" >Pinboard</a>
          </li>
          <li>
            <a target="_blank" href="https://seenbydavep.blogspot.com/" >Photoblog</a>
          </li>
          <li>
            <a target="_blank" href="https://elisp.dev/" >Emacs Packages</a>
          </li>
          <li>
            <a target="_blank" href="https://pypi.org/user/davepearson/" >Python Packages</a>
          </li>
      </ul>
    </nav>

    <ul class="social">
      <li>
        <a class="sc-github"
           href="https://github.com/davep"
           target="_blank">
          <i class="fa-brands fa-github"></i>
        </a>
      </li>
      <li>
        <a class="sc-mastodon"
rel="me"           href="https://fosstodon.org/@davep"
           target="_blank">
          <i class="fa-brands fa-mastodon"></i>
        </a>
      </li>
      <li>
        <a class="sc-flickr"
           href="https://www.flickr.com/photos/davepearson/"
           target="_blank">
          <i class="fa-brands fa-flickr"></i>
        </a>
      </li>
      <li>
        <a class="sc-lastfm"
           href="https://www.last.fm/user/davepdotorg"
           target="_blank">
          <i class="fa-brands fa-lastfm"></i>
        </a>
      </li>
      <li>
        <a class="sc-npm"
           href="https://www.npmjs.com/~davep.org"
           target="_blank">
          <i class="fa-brands fa-npm"></i>
        </a>
      </li>
      <li>
        <a class="sc-youtube"
           href="https://www.youtube.com/user/daveporg"
           target="_blank">
          <i class="fa-brands fa-youtube"></i>
        </a>
      </li>
      <li>
        <a class="sc-steam"
           href="https://steamcommunity.com/id/davepdotorg"
           target="_blank">
          <i class="fa-brands fa-steam"></i>
        </a>
      </li>
    </ul>
  </div>

</aside>
  <main>

<nav>
  <a href="https://blog.davep.org/">Home</a>

  <a href="/archives.html">Archives</a>
  <a href="/categories.html">Categories</a>
  <a href="/tags.html">Tags</a>

  <a href="https://blog.davep.org/feeds/all.atom.xml">Atom</a>

  <a href="https://blog.davep.org/feed.xml">RSS</a>
</nav>



<article>
  <header>
    <h2><a href="https://blog.davep.org/2020/07/11/swift-til-11.html#swift-til-11">Swift TIL 11</a></h2>
    <p>
      Posted on 2020-07-11 21:34 +0100 in <a href="https://blog.davep.org/category/til.html">TIL</a>

          &#8226; Tagged with
              <a href="https://blog.davep.org/tag/swift.html">Swift</a>,              <a href="https://blog.davep.org/tag/apple.html">Apple</a>
        &#8226; 2 min read
    </p>
  </header>
  <div>
      <div><p>This is one of those things, especially this little play to help appreciate
the feature, that I'm filing under "kinda cool, but I am <em>never</em> doing this
in production".</p>
<p>So Swift has operator overriding, and then some. Moreover, operators are, in
effect, functions, just with some extra syntax support. None of this is new
to me, I've worked in and with other languages that have this ability,
expect... I don't ever recall working in a language that, at the time I did,
supported creating brand new operators (okay, fine, Lisp is a bit of an
outlier here and there's all sorts of fun conversations to be had there --
but still, let's stick with more "conventional" syntax here). Support always
seemed to be about extending the ability of an existing operator.</p>
<p>Swift though... yeah, you get to pick from a huge character space when it
comes to creating operators.</p>
<p>Which got me thinking... How cool would it be to have a prefix operator that
turns a floating point number into a currency-friendly number (you know, the
sort of number type that can be used for currency-friendly calculations).</p>
<p>Swift has the
<a href="https://developer.apple.com/documentation/foundation/decimal"><code>decimal</code></a>
type which, at first glance anyway, looks to be a sensible candidate; even
if it isn't (and, really, how to actually sensibly handle currency is a
whole series of blog posts in their own right, that I have no wish to write
myself because such things are a previous working life for me, and other
people have doubtless done a very comprehensive job elsewhere over the
years) it will serve as a good stand-in for the little bit of horror I'm
going to write next.</p>
<p>So... Let's say we want to use <code>Â£</code> as a prefix operator to say "see this
number? make it a <code>decimal</code>", we could do something as simple as this:</p>
<div class="highlight"><pre><span></span><code><span class="kd">import</span> <span class="nc">Foundation</span>

<span class="kr">prefix</span> <span class="kd">operator</span> <span class="err">Â£</span>
<span class="kr">prefix</span> <span class="kd">func</span> <span class="err">Â£</span><span class="p">(</span> <span class="n">n</span> <span class="p">:</span> <span class="n">Decimal</span> <span class="p">)</span> <span class="p">-&gt;</span> <span class="n">Decimal</span> <span class="p">{</span> <span class="n">n</span> <span class="p">}</span>

<span class="bp">print</span><span class="p">(</span> <span class="err">Â£</span><span class="mf">1.20</span> <span class="o">+</span> <span class="err">Â£</span><span class="mf">0.75</span> <span class="o">+</span> <span class="err">Â£</span><span class="mf">0.01</span> <span class="p">)</span>
</code></pre></div>

<p>Horrifically and delightfully, it works:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>swift<span class="w"> </span>run
<span class="o">[</span><span class="m">3</span>/3<span class="o">]</span><span class="w"> </span>Linking<span class="w"> </span>opover
<span class="m">1</span>.96
</code></pre></div>

<p>I know, I know, I feel bad for even trying. But it's also kinda cool that
the language has this.</p>
<p>It gets better though...</p>
<p>While reading up on what characters can and can't be used as operators, one
thing that stood out was the fact that, more or less, any character that
isn't a valid identifier can be used as an operator. So... hang on, we can
use "emoji" as identifiers?</p>
<p>Like this?</p>
<div class="highlight"><pre><span></span><code><span class="kd">import</span> <span class="nc">Foundation</span>

<span class="kr">prefix</span> <span class="kd">operator</span> <span class="err">Â£</span>
<span class="kr">prefix</span> <span class="kd">func</span> <span class="err">Â£</span><span class="p">(</span> <span class="n">n</span> <span class="p">:</span> <span class="n">Decimal</span> <span class="p">)</span> <span class="p">-&gt;</span> <span class="n">Decimal</span> <span class="p">{</span> <span class="n">n</span> <span class="p">}</span>

<span class="kd">let</span> <span class="err">ðŸ’µ</span> <span class="p">=</span> <span class="err">Â£</span><span class="mf">1.20</span> <span class="o">+</span> <span class="err">Â£</span><span class="mf">0.75</span> <span class="o">+</span> <span class="err">Â£</span><span class="mf">0.01</span>

<span class="bp">print</span><span class="p">(</span> <span class="err">ðŸ’µ</span> <span class="p">)</span>
</code></pre></div>

<p>Why yes. Yes we can. ðŸ˜ˆ</p></div>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="https://blog.davep.org/2020/07/10/when-the-man-page-fibs.html#when-the-man-page-fibs">When the man page fibs</a></h2>
    <p>
      Posted on 2020-07-10 20:58 +0100 in <a href="https://blog.davep.org/category/coding.html">Coding</a>

          &#8226; Tagged with
              <a href="https://blog.davep.org/tag/homebrew.html">homebrew</a>,              <a href="https://blog.davep.org/tag/macos.html">macOS</a>,              <a href="https://blog.davep.org/tag/unix.html">Unix</a>,              <a href="https://blog.davep.org/tag/python.html">Python</a>
        &#8226; 3 min read
    </p>
  </header>
  <div>
      <div><p>Earlier this week something in my development environment, relating to
<a href="https://brew.sh/">Homebrew</a>, Python,
<a href="https://github.com/pyenv/pyenv">pyenv</a> and
<a href="https://pipenv.pypa.io/en/latest/">pipenv</a>, got updated and broke a handful
of repositories. Not in a way that I couldn't recover from, just in a way
that was annoying, got in the way of my workflow, and needed attention.
<em>(note to self: how I set up for Python/Django development on a machine
might be a good post in the future)</em></p>
<p>Once I was sure what the fix was (pretty much: nuke the virtual environment
and recreate it with <code>pipenv</code>, being very explicit about the version of
Python to use) the next step was to figure out how many repositories were
affected; not all were and there wasn't an obvious pattern to it. What was
obvious was that the problem came down to <code>python</code> in the <code>.venv</code> directory
pointing to a binary that didn't exist any more.</p>
<p><img alt="Screenshot 2020-07-10 at 20.21.15.png" src="/attachments/2020/07/10/Screenshot 2020-07-10 at 20.21.15.png"></p>
<p>So... tracking down problematic repositories would be simple enough, just
look for every instance of <code>.venv/bin/python</code> and be sure it points to
something rather than nothing; if it points to nothing I need to remake the
virtual environment.</p>
<p>I quickly knocked up a script that was based around looking over the results
of a <code>find</code>, and initially decided to use <code>file</code> to perform the test on
<code>python</code>. It seemed to make sense, as I wrote the script I checked the <code>man</code>
page for <code>file(1)</code> on macOS and sure enough, this exists:</p>
<blockquote>
<p>-E On filesystem errors (file not found etc), instead of handling the error as regular output as POSIX mandates and keep going, issue an error message and exit.</p>
</blockquote>
<p>Given that <code>file</code> dereferences links by default, that should get me an error
for a broken link, right? Bit hacky I guess, but it was the first thing that
came to mind for a quick bit of scripting and would do the trick. Only...</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>file<span class="w"> </span>-E<span class="w"> </span>does-not-exist
file:<span class="w"> </span>invalid<span class="w"> </span>option<span class="w"> </span>--<span class="w"> </span>E
Usage:<span class="w"> </span>file<span class="w"> </span><span class="o">[</span>bcCdEhikLlNnprsvzZ0<span class="o">]</span><span class="w"> </span><span class="o">[</span>-e<span class="w"> </span>test<span class="o">]</span><span class="w"> </span><span class="o">[</span>-f<span class="w"> </span>namefile<span class="o">]</span><span class="w"> </span><span class="o">[</span>-F<span class="w"> </span>separator<span class="o">]</span><span class="w"> </span><span class="o">[</span>-m<span class="w"> </span>magicfiles<span class="o">]</span><span class="w"> </span><span class="o">[</span>-M<span class="w"> </span>magicfiles<span class="o">]</span><span class="w"> </span>file...
<span class="w">       </span>file<span class="w"> </span>-C<span class="w"> </span>-m<span class="w"> </span>magicfiles
Try<span class="w"> </span><span class="sb">`</span>file<span class="w"> </span>--help<span class="err">&#39;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>more<span class="w"> </span>information.
</code></pre></div>

<p><a href="https://www.destroyallsoftware.com/talks/wat">Wat</a>?!? But it's right there! It says so in the manual! <code>-E</code> is documented right in the manual page! And yet it's not in the valid switch list as put out by the command, <em>and</em> it's an <code>invalid option</code>. The hell?</p>
<p>So I go back and look at the <code>man</code> page again and then I notice it isn't in
the list of switches in the synopsis.</p>
<blockquote>
<p>SYNOPSIS<br>
    file [-bcdDhiIkLnNprsvz] [--extension] [--mime-encoding] [--mime-type] [-f namefile] [-m magicfiles] [-P name=value] [-M magicfiles] file<br>
    file -C [-m magicfiles]<br>
    file [--help]  </p>
</blockquote>
<p>I then did the obvious tests. Did I have <code>file</code> aliased in some way? No. Was
some other thing that works and acts like <code>file</code> in my path? No. Was I
absolutely 100% using <code>/usr/bin/file</code>? Yes.</p>
<p>Long story short: it seems the <code>man</code> page for <code>file</code>, on macOS, fibs about
what switches it supports; it says that <code>-E</code> is a valid option, but it's not
there.</p>
<p>What's even odder is the man page says it documents v5.04 of the command,
but <code>--version</code> reports v5.37. Meanwhile, if I check on a GNU/Linux box I
have access to, it does support <code>-E</code>, reports it in the switches, documents
it in the <code>man</code> page (in both the synopsis and in the main body of the page)
and it is v5.25 (and so is its man page).</p>
<p>So that was something like 20 minutes lost to a very small problem, for
which there was no real solution, but was time that had to be spent to get
to the bottom of it.</p>
<p>In the end I went with what I probably should have gone with in the first
place: <code>stat -L</code>.</p>
<div class="highlight"><pre><span></span><code><span class="k">for</span><span class="w"> </span>venv<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">$(</span>find<span class="w"> </span>.<span class="w"> </span>-name<span class="w"> </span>.venv<span class="k">)</span>
<span class="k">do</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span>!<span class="w"> </span>stat<span class="w"> </span>-L<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$venv</span><span class="s2">/bin/python&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>/dev/null<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span>
<span class="w">    </span><span class="k">then</span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="k">$(</span>dirname<span class="w"> </span><span class="nv">$venv</span><span class="k">)</span><span class="s2">&quot;</span>
<span class="w">    </span><span class="k">fi</span>
<span class="k">done</span>
</code></pre></div>

<p>And now I have that script in my <code>~/bin</code> directory, ready for the next time
Homebrew and friends conspire to throw my day off for a while.</p></div>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="https://blog.davep.org/2020/07/09/helping-myself-change-the-default-git-branch.html#helping-myself-change-the-default-git-branch">Helping myself change the default git branch</a></h2>
    <p>
      Posted on 2020-07-09 20:17 +0100 in <a href="https://blog.davep.org/category/coding.html">Coding</a>

          &#8226; Tagged with
              <a href="https://blog.davep.org/tag/git.html">git</a>
        &#8226; 2 min read
    </p>
  </header>
  <div>
      <div><p>This is something I've being meaning to do for a couple or so years now, and
unsurprisingly it's bubbled up again recently: the business of swapping the
name of the <code>master</code> branch in <code>git</code> out for something better.</p>
<p>Because it's one of those jobs that's simultaneously simple and also
laborious, I kept putting it off. Changing up the local configuration so
that <code>main</code> (or whatever name you prefer) is used "out of the box" <a href="https://leigh.net.au/writing/git-init-main/">is
simple enough</a>; the laborious
part is updating all of the repositories that live in the "forge of choice".
In my case, <a href="https://github.com/davep">over on GitHub</a>, I have <a href="https://github.com/davep?tab=repositories">getting on
for 200 repositories</a> -- 142 of
which are public (as of the time of writing). At work we use
<a href="https://gitlab.com/">GitLab</a> as our internal forge and I've got a
non-trivial number of repositories on there too.</p>
<p>The obvious first step to tackling this is to knock up a little tool to help
find the repos that still need swapping. That was <a href="https://github.com/davep/git-archaic">simple
enough</a>:</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>

<span class="c1"># Quick and dirty tool to find repositories that still make use of a</span>
<span class="c1"># &quot;master&quot; branch. Helps with tracking down the ones that need</span>
<span class="c1"># updating/improving.</span>

<span class="k">for</span><span class="w"> </span>repo<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">$(</span>find<span class="w"> </span>.<span class="w"> </span>-name<span class="w"> </span>.git<span class="k">)</span>
<span class="k">do</span>
<span class="w">    </span><span class="o">(</span>
<span class="w">        </span><span class="nb">cd</span><span class="w"> </span><span class="s2">&quot;</span><span class="k">$(</span>dirname<span class="w"> </span><span class="nv">$repo</span><span class="k">)</span><span class="s2">&quot;</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span>git<span class="w"> </span>branch<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>master<span class="w"> </span>&gt;<span class="w"> </span>/dev/null<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span>
<span class="w">        </span><span class="k">then</span>
<span class="w">            </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="k">$(</span>dirname<span class="w"> </span><span class="nv">$repo</span><span class="k">)</span><span class="s2">&quot;</span>
<span class="w">        </span><span class="k">fi</span>
<span class="w">    </span><span class="o">)</span>
<span class="k">done</span>

<span class="c1">### git-archaic ends here</span>
</code></pre></div>

<p>It's not meant to be clever, just something I can run when I'm in a "default
branch swapping" mood so find a repository or two to tackle. The idea being
that it uses <code>find</code> to pull out any instance of <code>.git</code> in or below the
current directory, changes to it (inside a sub-process to ensure the <code>PWD</code>
gets put back after the <code>cd</code> that happens, before the next iteration of the
loop), gets a list of the branches and, if <code>master</code> is one of them, prints
the directory name.</p>
<p>Using this, I can now slowly work through my more active repositories and
make the swap -- the idea being that if I currently have them cloned down to
my machine, they're obviously some level of "active". At some point I
imagine I could get more clever and use the APIs of the forges to look at
all the repositories I own; that's another job for another day.</p>
<p>This gives me enough to be going on with. :-)</p></div>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="https://blog.davep.org/2020/07/05/swift-til-10.html#swift-til-10">Swift TIL 10</a></h2>
    <p>
      Posted on 2020-07-05 15:27 +0100 in <a href="https://blog.davep.org/category/til.html">TIL</a>

          &#8226; Tagged with
              <a href="https://blog.davep.org/tag/swift.html">Swift</a>,              <a href="https://blog.davep.org/tag/apple.html">Apple</a>
        &#8226; 2 min read
    </p>
  </header>
  <div>
      <div><p>My leisurely journey into getting to know Swift by reading and then making
notes to myself in my blog continues, and this weekend I encountered
<code>defer</code>. As I was reading about Swift I did keep wondering when something
like <code>try</code> (it has <code>try</code>), <code>catch</code> (it has <code>catch</code>) and <code>finally</code> (it
doesn't have <code>finally</code>, but...) might crop up. This weekend I hit the part
of the book that covered this sort of thing.</p>
<p>Given Swift's apparent general reliance on <em>not</em> throwing errors but instead
using <code>Optional</code> and <code>nil</code> to signify issues, it sort of came as no surprise
that its approach to implementing something like <code>try</code>...<code>finally</code> is
actually divorced from <code>try</code>. I'm not sure how I feel about it yet, but
<code>defer</code> makes sense.</p>
<p>Here's an utterly useless bit of code that demonstrates how it works:</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span> <span class="nf">add</span><span class="p">(</span> <span class="kc">_</span> <span class="n">n1</span> <span class="p">:</span> <span class="nb">Int</span><span class="p">,</span> <span class="kc">_</span> <span class="n">n2</span> <span class="p">:</span> <span class="nb">Int</span> <span class="p">)</span> <span class="p">-&gt;</span> <span class="nb">Int</span> <span class="p">{</span>

    <span class="k">defer</span> <span class="p">{</span>
        <span class="bp">print</span><span class="p">(</span> <span class="s">&quot;Huh! We did some adding!&quot;</span> <span class="p">)</span>
    <span class="p">}</span>

    <span class="bp">print</span><span class="p">(</span> <span class="s">&quot;About to do the add and then return&quot;</span> <span class="p">)</span>
    <span class="k">return</span> <span class="n">n1</span> <span class="o">+</span> <span class="n">n2</span>
<span class="p">}</span>

<span class="bp">print</span><span class="p">(</span> <span class="n">add</span><span class="p">(</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span> <span class="p">)</span> <span class="p">)</span>
</code></pre></div>

<p>When run, the output is this:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>swift<span class="w"> </span>run
<span class="o">[</span><span class="m">3</span>/3<span class="o">]</span><span class="w"> </span>Linking<span class="w"> </span>try-defer
About<span class="w"> </span>to<span class="w"> </span><span class="k">do</span><span class="w"> </span>the<span class="w"> </span>add<span class="w"> </span>and<span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="k">return</span>
Huh!<span class="w"> </span>We<span class="w"> </span>did<span class="w"> </span>some<span class="w"> </span>adding!
<span class="m">4</span>
</code></pre></div>

<p>A <code>defer</code> (and there can be multiple) is tied to the block that it's
declared in, and is executed when the block exits. This is, of course, going
to be really handy for things like resource-management where you don't want
to be leaking something, although I can imagine a few other uses too (none
of which are really going to be novel for someone who's coded in other
languages with similar constructs).</p>
<p>What I find interesting about this is that one or more <code>defer</code> blocks can be
declared at various locations within a block of code; this obviously makes
sense in that you might not want to be handling the tidy-up of something
you've not got around to creating yet. But there's also part of me feels
uneasy about the "exit" code being declared further up the body of code,
rather than down towards the end. On the other hand I think I do appreciate
the idea of, up front, writing "look, any time there's a GTFO in the code
that follows, this will happen" -- you're made aware pretty quickly of what
to expect.</p>
<p>Anyway, it's good to know Swift has something similar to a <code>finally</code>.</p></div>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="https://blog.davep.org/2020/06/30/swift-til-9.html#swift-til-9">Swift TIL 9</a></h2>
    <p>
      Posted on 2020-06-30 21:02 +0100 in <a href="https://blog.davep.org/category/til.html">TIL</a>

          &#8226; Tagged with
              <a href="https://blog.davep.org/tag/swift.html">Swift</a>,              <a href="https://blog.davep.org/tag/apple.html">Apple</a>
        &#8226; 2 min read
    </p>
  </header>
  <div>
      <div><p><em>Some may be happy to know that the frequency of these little notes to
myself may reduce real soon, as I'm sort of caught up with my notes, mostly,
and I'm unlikely to pick up the book that I'm reading for a couple or so
days now</em></p>
<p>I'm used to the idea of structures and classes from other languages, going
way back, but as I first started reading about Swift it wasn't obvious to me
why it had them both too. At first glance they appeared to be very similar.
It was only as I got a little further into reading that I found out one huge
difference (there are others, that pretty much stem from this one): objects
created from classes are <em>reference types</em> (which you'd expect, of course),
structures on the other hand are <em>value types</em>.</p>
<p>A quick illustration of the difference, in my head anyway, can be found if I
go back to <a href="/2020/06/24/swift-til-3.html">using an
observer</a>.
Take this daft bit of illustrative code for example:</p>
<div class="highlight"><pre><span></span><code><span class="kd">class</span> <span class="nc">Person</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nv">name</span> <span class="p">:</span> <span class="nb">String</span> <span class="p">=</span> <span class="s">&quot;No name&quot;</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nv">dave</span> <span class="p">=</span> <span class="n">Person</span><span class="p">()</span> <span class="p">{</span>
    <span class="kr">didSet</span> <span class="p">{</span>
        <span class="bp">print</span><span class="p">(</span> <span class="s">&quot;dave was set&quot;</span> <span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">dave</span><span class="p">.</span><span class="n">name</span> <span class="p">=</span> <span class="s">&quot;Dave&quot;</span>
</code></pre></div>

<p>If I run that, I get no output. That makes sense. The variable <code>dave</code> is
initialised to an instance of a <code>Person</code> but is never subsequently set to
anything else. The following assignment is to a property of the object.
We're working on a reference to an existing object.</p>
<p>But simply change <code>Person</code> to being a <code>struct</code>:</p>
<div class="highlight"><pre><span></span><code><span class="kd">struct</span> <span class="nc">Person</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nv">name</span> <span class="p">:</span> <span class="nb">String</span> <span class="p">=</span> <span class="s">&quot;No name&quot;</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nv">dave</span> <span class="p">=</span> <span class="n">Person</span><span class="p">()</span> <span class="p">{</span>
    <span class="kr">didSet</span> <span class="p">{</span>
        <span class="bp">print</span><span class="p">(</span> <span class="s">&quot;dave was set&quot;</span> <span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">dave</span><span class="p">.</span><span class="n">name</span> <span class="p">=</span> <span class="s">&quot;Dave&quot;</span>
</code></pre></div>

<p>and the output looks like this:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>swift<span class="w"> </span>run
<span class="o">[</span><span class="m">3</span>/3<span class="o">]</span><span class="w"> </span>Linking<span class="w"> </span>ref-vs-val
dave<span class="w"> </span>was<span class="w"> </span><span class="nb">set</span>
</code></pre></div>

<p>That's because the assignment to <code>dave.name</code> means a new value is created.</p>
<p>This, of course, is just the tip of the iceberg; there are all sorts of
other things to keep in mind that follow on from this, generally relating to
mutability (or the lack thereof). I also imagine this means that, when
there's no obvious benefit either way, the choice of using <code>class</code> vs
<code>struct</code> is something that could have performance implications. That's
something for me to look into more another day; but this is a note here to
myself that it's a thing to keep in mind.</p></div>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="https://blog.davep.org/2020/06/29/swift-til-8.html#swift-til-8">Swift TIL 8</a></h2>
    <p>
      Posted on 2020-06-29 22:48 +0100 in <a href="https://blog.davep.org/category/til.html">TIL</a>

          &#8226; Tagged with
              <a href="https://blog.davep.org/tag/swift.html">Swift</a>,              <a href="https://blog.davep.org/tag/apple.html">Apple</a>
        &#8226; 3 min read
    </p>
  </header>
  <div>
      <div><p>Although I read up on it a few days back, it was only this evening that I
fired up Emacs (well of course I'm testing Swift with Emacs, what did you
think I'd do?!?) and dabbled with some code to really get a feel for how
casting works in Swift.</p>
<p>Swift seems to be one of those languages that does it with a keyword rather
than a non-keyword approach. The two main keywords being <code>as?</code> and <code>as!</code>. I
kind of like how there's a polite version and a bossy version. Having the
two makes a lot of sense from what I read too.</p>
<p>To try and illustrate my understanding so far (and do keep in mind I'm not
writing this with the express purpose of explaining it to anyone else -- I'm
writing this to try and retain it all in my head by working through it),
here's a bit of utterly pointless and highly-contrived code that defines
three classes in a fairly ordinary hierarchy:</p>
<div class="highlight"><pre><span></span><code><span class="kd">class</span> <span class="nc">Animal</span> <span class="p">{}</span>

<span class="kd">class</span> <span class="nc">Dog</span> <span class="p">:</span> <span class="n">Animal</span> <span class="p">{}</span>

<span class="kd">class</span> <span class="nc">Cat</span> <span class="p">:</span> <span class="n">Animal</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="nf">beAdorable</span><span class="p">()</span> <span class="p">{</span>
        <span class="bp">print</span><span class="p">(</span> <span class="s">&quot;Purrrrrr!&quot;</span> <span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>So, so far, so good: we have animals, we have dogs which are a kind of
animal, and we have cats, which are also a kind of animal, but they have the
special ability of actually being adorable. ðŸ˜¼</p>
<p>Now, for the purposes of just testing all of this out, here's a horrible
function that makes little sense other than for testing:</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span> <span class="nf">adore</span><span class="p">(</span> <span class="kc">_</span> <span class="n">a</span> <span class="p">:</span> <span class="n">Animal</span> <span class="p">)</span> <span class="p">{</span>
    <span class="p">(</span> <span class="n">a</span> <span class="k">as</span><span class="p">!</span> <span class="n">Cat</span> <span class="p">).</span><span class="n">beAdorable</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div>

<p>Given an animal, it forces it to be a cat (by casting it with <code>as!</code>), and
then asks it to be adorable (because, of course, cats always do as they're
asked).</p>
<p>So, if we then had:</p>
<div class="highlight"><pre><span></span><code><span class="n">adore</span><span class="p">(</span> <span class="n">Cat</span><span class="p">()</span> <span class="p">)</span>
</code></pre></div>

<p>we'd get what we expect when run:</p>
<div class="highlight"><pre><span></span><code>Purrrrrr!
</code></pre></div>

<p>So far so good. But what about:</p>
<div class="highlight"><pre><span></span><code><span class="n">adore</span><span class="p">(</span> <span class="n">Dog</span><span class="p">()</span> <span class="p">)</span>
</code></pre></div>

<p>Yeah, that's not so good:</p>
<div class="highlight"><pre><span></span><code>~/d/p/s/casting$<span class="w"> </span>swift<span class="w"> </span>run
<span class="o">[</span><span class="m">3</span>/3<span class="o">]</span><span class="w"> </span>Linking<span class="w"> </span>casting
Could<span class="w"> </span>not<span class="w"> </span>cast<span class="w"> </span>value<span class="w"> </span>of<span class="w"> </span><span class="nb">type</span><span class="w"> </span><span class="s1">&#39;casting.Dog&#39;</span><span class="w"> </span><span class="o">(</span>0x10a1f8830<span class="o">)</span><span class="w"> </span>to<span class="w"> </span><span class="s1">&#39;casting.Cat&#39;</span><span class="w"> </span><span class="o">(</span>0x10a1f88c0<span class="o">)</span>.
fish:<span class="w"> </span><span class="s1">&#39;swift run&#39;</span><span class="w"> </span>terminated<span class="w"> </span>by<span class="w"> </span>signal<span class="w"> </span>SIGABRT<span class="w"> </span><span class="o">(</span>Abort<span class="o">)</span>
</code></pre></div>

<p>One way around this would be to use <code>as?</code>, which has the effect of casting
the result to an
<a href="https://developer.apple.com/documentation/swift/optional"><code>Optional</code></a>. This
means I can re-write the <code>adore</code> function like this:</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span> <span class="nf">adore</span><span class="p">(</span> <span class="kc">_</span> <span class="n">a</span> <span class="p">:</span> <span class="n">Animal</span> <span class="p">)</span> <span class="p">{</span>
    <span class="p">(</span> <span class="n">a</span> <span class="k">as</span><span class="p">?</span> <span class="n">Cat</span> <span class="p">)?.</span><span class="n">beAdorable</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div>

<p>Now, if <code>a</code> can be cast to a <code>Cat</code>, you get an optional that wraps the
<code>Cat</code>, otherwise you get an optional that wraps <code>nil</code> (hence the second <code>?</code>
before attempting to call the <code>beAdorable</code> member function).</p>
<p>So now, if I run the problematic dog call above again:</p>
<div class="highlight"><pre><span></span><code>~/d/p/s/casting$<span class="w"> </span>swift<span class="w"> </span>run
<span class="o">[</span><span class="m">3</span>/3<span class="o">]</span><span class="w"> </span>Linking<span class="w"> </span>casting
</code></pre></div>

<p>In other words, no output at all. Which is the idea here.</p>
<p>I think I like this, I think it makes sense, and I think I can see why both
<code>as!</code> and <code>as?</code> exist. The latter also means, of course, that you can do
something like:</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span> <span class="nf">adore</span><span class="p">(</span> <span class="kc">_</span> <span class="n">a</span> <span class="p">:</span> <span class="n">Animal</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nv">cat</span> <span class="p">=</span> <span class="n">a</span> <span class="k">as</span><span class="p">?</span> <span class="n">Cat</span>
    <span class="k">if</span> <span class="n">cat</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
        <span class="n">cat</span><span class="p">!.</span><span class="n">beAdorable</span><span class="p">()</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="bp">print</span><span class="p">(</span> <span class="s">&quot;That totally wasn&#39;t a cat&quot;</span> <span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>which, in the messy dog call again, now results in:</p>
<div class="highlight"><pre><span></span><code>~/d/p/s/casting$<span class="w"> </span>swift<span class="w"> </span>run
<span class="o">[</span><span class="m">3</span>/3<span class="o">]</span><span class="w"> </span>Linking<span class="w"> </span>casting
That<span class="w"> </span>totally<span class="w"> </span>wasn<span class="err">&#39;</span>t<span class="w"> </span>a<span class="w"> </span>cat
</code></pre></div>

<p>Or, of course, the same effect could be had with:</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span> <span class="nf">adore</span><span class="p">(</span> <span class="kc">_</span> <span class="n">a</span> <span class="p">:</span> <span class="n">Animal</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="n">a</span> <span class="k">is</span> <span class="n">Cat</span> <span class="p">{</span>
        <span class="p">(</span> <span class="n">a</span> <span class="k">as</span><span class="p">!</span> <span class="n">Cat</span> <span class="p">).</span><span class="n">beAdorable</span><span class="p">()</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="bp">print</span><span class="p">(</span> <span class="s">&quot;That totally wasn&#39;t a cat&quot;</span> <span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>It should be stressed, of course, that the example code is terrible design,
so given the above I'd ensure I never end up in this sort of situation in
the first place. But for the purposes of writing and compiling and running
code and seeing what the different situations result in, it helped.</p></div>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="https://blog.davep.org/2020/06/28/swift-til-7.html#swift-til-7">Swift TIL 7</a></h2>
    <p>
      Posted on 2020-06-28 16:25 +0100 in <a href="https://blog.davep.org/category/til.html">TIL</a>

          &#8226; Tagged with
              <a href="https://blog.davep.org/tag/swift.html">Swift</a>,              <a href="https://blog.davep.org/tag/apple.html">Apple</a>
        &#8226; 1 min read
    </p>
  </header>
  <div>
      <div><p>This post is <em>very</em> much a case of me writing it down to try and get it all
straight in my head, and to make sure it sticks. The other day I was reading
about Swift's types and type-equality checks, and as I'd expect from plenty
of other languages I've worked with, there's a way for checking that two
types are the same, such that super/subclasses aren't taken into account,
and a way where they are. So, given this silly code:</p>
<div class="highlight"><pre><span></span><code><span class="kd">class</span> <span class="nc">Animal</span> <span class="p">{}</span>

<span class="kd">class</span> <span class="nc">Cat</span> <span class="p">:</span> <span class="n">Animal</span> <span class="p">{}</span>

<span class="bp">print</span><span class="p">(</span> <span class="n">Cat</span><span class="p">.</span><span class="kc">self</span> <span class="p">==</span> <span class="n">Animal</span><span class="p">.</span><span class="kc">self</span> <span class="p">)</span>          <span class="c1">// False</span>
<span class="bp">print</span><span class="p">(</span> <span class="n">Cat</span><span class="p">.</span><span class="kc">self</span> <span class="k">is</span> <span class="n">Animal</span><span class="p">.</span><span class="kr">Type</span> <span class="p">)</span>          <span class="c1">// True</span>
<span class="bp">print</span><span class="p">(</span> <span class="n">type</span><span class="p">(</span> <span class="n">of</span><span class="p">:</span> <span class="n">Cat</span><span class="p">()</span> <span class="p">)</span> <span class="k">is</span> <span class="n">Animal</span><span class="p">.</span><span class="kr">Type</span> <span class="p">)</span> <span class="c1">// True</span>
</code></pre></div>

<p>it's made clear that <code>==</code> checks for strict equality and a super/subclass
relationship isn't taken into account. On the other hand <code>is</code> does take it
into account.</p>
<p>Only... what's with this whole <code>.self</code> sometimes and <code>.Type</code> other times
business? That took a little bit of writing code and playing to get
comfortable with. Here's how I understand it now (and do feel free to
correct me below if I'm way off):</p>
<p>Given the above code, <code>Animal.Type</code> is the type of a value that expresses
the type of <code>Animal</code>. On the other hand, <code>Animal.self</code> is a value that is
the type of an <code>Animal</code>. Yeah, I know, that still reads oddly. But written
as code:</p>
<div class="highlight"><pre><span></span><code><span class="kd">let</span> <span class="nv">feline</span> <span class="p">:</span> <span class="n">Cat</span><span class="p">.</span><span class="kr">Type</span> <span class="p">=</span> <span class="n">Cat</span><span class="p">.</span><span class="kc">self</span>
</code></pre></div>

<p>I think it makes a lot more sense. And having got there I felt I better
understood it. I'm not 100% sure I'm 100% with it, but I'm getting there.</p></div>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="https://blog.davep.org/2020/06/27/swift-til-6.html#swift-til-6">Swift TIL 6</a></h2>
    <p>
      Posted on 2020-06-27 21:23 +0100 in <a href="https://blog.davep.org/category/til.html">TIL</a>

          &#8226; Tagged with
              <a href="https://blog.davep.org/tag/swift.html">Swift</a>,              <a href="https://blog.davep.org/tag/apple.html">Apple</a>
        &#8226; 1 min read
    </p>
  </header>
  <div>
      <div><p>I'm going to file this one under "it seems really unnecessary, but it's also
kinda cool". While reading up about
<a href="https://docs.swift.org/swift-book/LanguageGuide/Protocols.html">protocols</a>
the book I'm reading introduced the <code>ExpressibleBy*Literal</code> protocols, where
the <code>*</code> is one of a number of obvious literals. For example:
<code>ExpressibleByStringLiteral</code>. As you might imagine, it lets you create a
class that can be initialised with a literal value, as opposed to needing to
appear to call the constructor for a class.</p>
<p>So, for a silly example:</p>
<div class="highlight"><pre><span></span><code><span class="kd">class</span> <span class="nc">Hello</span> <span class="p">:</span> <span class="n">ExpressibleByStringLiteral</span> <span class="p">{</span>

    <span class="kd">private</span> <span class="kd">let</span> <span class="nv">what</span> <span class="p">:</span> <span class="nb">String</span>

    <span class="kr">required</span> <span class="kd">init</span><span class="p">(</span> <span class="n">stringLiteral</span> <span class="n">what</span> <span class="p">:</span> <span class="nb">String</span> <span class="p">)</span> <span class="p">{</span>
        <span class="kc">self</span><span class="p">.</span><span class="n">what</span> <span class="p">=</span> <span class="n">what</span>
    <span class="p">}</span>

    <span class="kd">func</span> <span class="nf">say</span><span class="p">()</span> <span class="p">{</span>
        <span class="bp">print</span><span class="p">(</span> <span class="s">&quot;Hello, </span><span class="si">\(</span><span class="kc">self</span><span class="p">.</span><span class="n">what</span><span class="si">)</span><span class="s">!&quot;</span> <span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>You could, of course, write this:</p>
<div class="highlight"><pre><span></span><code><span class="kd">let</span> <span class="nv">v1</span> <span class="p">=</span> <span class="n">Hello</span><span class="p">(</span> <span class="s">&quot;world&quot;</span> <span class="p">)</span>
<span class="n">v1</span><span class="p">.</span><span class="n">say</span><span class="p">()</span>
</code></pre></div>

<p>but because of <code>ExpressibleByStringLiteral</code> you can also write:</p>
<div class="highlight"><pre><span></span><code><span class="kd">let</span> <span class="nv">v2</span> <span class="p">:</span> <span class="n">Hello</span> <span class="p">=</span> <span class="s">&quot;universe&quot;</span>
<span class="n">v2</span><span class="p">.</span><span class="n">say</span><span class="p">()</span>
</code></pre></div>

<p>Now, sure, in this case it saves you nothing, but this does also mean that
parameters of functions whose type uses one of the <code>`ExpressibleBy*Literal</code>
protocols can be passed a literal, rather than a "long-hand" instantiated
object. For example:</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span> <span class="nf">Greet</span><span class="p">(</span> <span class="kc">_</span> <span class="n">h</span> <span class="p">:</span> <span class="n">Hello</span> <span class="p">)</span> <span class="p">{</span>
    <span class="n">h</span><span class="p">.</span><span class="n">say</span><span class="p">()</span>
<span class="p">}</span>

<span class="n">Greet</span><span class="p">(</span> <span class="s">&quot;davep&quot;</span> <span class="p">)</span>
</code></pre></div>

<p>I can see that being quite handy.</p></div>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="https://blog.davep.org/2020/06/26/switch-til-5.html#switch-til-5">Swift TIL 5</a></h2>
    <p>
      Posted on 2020-06-26 15:44 +0100 in <a href="https://blog.davep.org/category/til.html">TIL</a>

          &#8226; Tagged with
              <a href="https://blog.davep.org/tag/swift.html">Swift</a>,              <a href="https://blog.davep.org/tag/apple.html">Apple</a>
        &#8226; 1 min read
    </p>
  </header>
  <div>
      <div><p>I'm going to file this one under "it makes perfect sense, but I don't think
it aids in making the code readable" -- something which I'm finding is a bit
of a theme with Swift.</p>
<p>In Swift <code>self</code> gets used and gets used in a way you'd expect from many
other languages. So far so good. But, it seems, <code>Self</code> is also a thing too,
and it's different from <code>self</code>. Whereas <code>self</code> is the current instance,
<code>Self</code> is the current type. So consider this:</p>
<div class="highlight"><pre><span></span><code><span class="kd">class</span> <span class="nc">Greeting</span> <span class="p">{</span>

    <span class="kd">class</span> <span class="nc">func</span> <span class="n">message</span><span class="p">()</span> <span class="p">-&gt;</span> <span class="nb">String</span> <span class="p">{</span>
        <span class="s">&quot;Ayup!&quot;</span>
    <span class="p">}</span>

    <span class="kd">func</span> <span class="nf">message</span><span class="p">()</span> <span class="p">-&gt;</span> <span class="nb">String</span> <span class="p">{</span>
        <span class="s">&quot;Well hello there&quot;</span>
    <span class="p">}</span>

    <span class="kd">func</span> <span class="nf">emit</span><span class="p">()</span> <span class="p">{</span>
        <span class="bp">print</span><span class="p">(</span> <span class="kc">Self</span><span class="p">.</span><span class="n">message</span><span class="p">()</span> <span class="p">)</span>
        <span class="bp">print</span><span class="p">(</span> <span class="kc">self</span><span class="p">.</span><span class="n">message</span><span class="p">()</span> <span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">Greeting</span><span class="p">().</span><span class="n">emit</span><span class="p">()</span>
</code></pre></div>

<p>When run, the output is:</p>
<div class="highlight"><pre><span></span><code>Ayup!
Well hello there
</code></pre></div>

<p>It makes sense that that's the case. I actually really like the ability to
use <code>Self</code> rather than having to use <code>Greeting</code>, but damn that's really
setting things up for either mistyping or misreading code. You're going to
want to hope that your development environment makes it super obvious what's
a value and what's a type when it comes to using font choices.</p></div>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="https://blog.davep.org/2020/06/25/swift-til-4.html#swift-til-4">Swift TIL 4</a></h2>
    <p>
      Posted on 2020-06-25 13:21 +0100 in <a href="https://blog.davep.org/category/til.html">TIL</a>

          &#8226; Tagged with
              <a href="https://blog.davep.org/tag/swift.html">Swift</a>,              <a href="https://blog.davep.org/tag/apple.html">Apple</a>
        &#8226; 1 min read
    </p>
  </header>
  <div>
      <div><p>Some languages favour a <a href="https://www.python.org/dev/peps/pep-0020/">"one way to do
it"</a> approach, some favour
<a href="https://en.wikipedia.org/wiki/There%27s_more_than_one_way_to_do_it">"there's more than one way to do
it"</a>.
I'm not sure I'm at a point where I have a feel for what Swift's approach
is, but I'm getting the impression it's more the latter than the former.</p>
<p>If there was one thing that made me think that, it was when I found out that
Swift's <code>bool</code> type has a <code>toggle</code> method.</p>
<div class="highlight"><pre><span></span><code><span class="kd">var</span> <span class="nv">cool</span> <span class="p">=</span> <span class="kc">false</span>

<span class="bp">print</span><span class="p">(</span> <span class="n">cool</span> <span class="p">)</span>
<span class="n">cool</span> <span class="p">=</span> <span class="o">!</span><span class="n">cool</span>
<span class="bp">print</span><span class="p">(</span> <span class="n">cool</span> <span class="p">)</span>
<span class="n">cool</span><span class="p">.</span><span class="n">toggle</span><span class="p">()</span>
<span class="bp">print</span><span class="p">(</span> <span class="n">cool</span> <span class="p">)</span>
</code></pre></div>

<p>giving:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>swift<span class="w"> </span>run
<span class="nb">false</span>
<span class="nb">true</span>
<span class="nb">false</span>
</code></pre></div>

<p>I can see a number of reasons why that's actually going to be handy -- the
main one being when you want to throw around a toggling method -- but it
still struck me as rather odd on first reading. I also think it's worth me
making a personal note about it because <code>foo.toggle()</code> isn't going to stand
out as much as <code>foo = !foo</code> when reading code. At least not for a short
while.</p></div>
  </div>
</article>

  <div class="pagination">
    <a class="btn float-left" href="https://blog.davep.org/author/dave-pearson9.html">
      <i class="fa fa-angle-left"></i> Older Posts
    </a>
    <a class="btn float-right" href="https://blog.davep.org/author/dave-pearson7.html">
      Newer Posts <i class="fa fa-angle-right"></i>
    </a>
  </div>



<footer>
<p>&copy; 2015-2024 Dave Pearson</p>
<p>
Built with <a href="http://getpelican.com" target="_blank">Pelican</a> using <a href="http://bit.ly/flex-pelican" target="_blank">Flex</a> theme
  <span class="footer-separator">|</span>
  Switch to the <a href="javascript:void(0)" onclick="theme.switch(`dark`)">dark</a> | <a href="javascript:void(0)" onclick="theme.switch(`light`)">light</a> | <a href="javascript:void(0)" onclick="theme.switch(`browser`)">browser</a> theme
  <script id="dark-theme-script"
          src="https://blog.davep.org/theme/dark-theme/dark-theme.min.js"
          data-enable-auto-detect-theme="True"
          data-default-theme="dark"
          type="text/javascript">
  </script>
</p></footer>  </main>

<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " blog.davep.org ",
  "url" : "https://blog.davep.org",
  "image": "/static/davep.jpeg",
  "description": ""
}
</script>
</body>
</html>