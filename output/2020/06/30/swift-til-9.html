<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>"Swift TIL 9"</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="Dave Pearson">

    <!-- Le styles -->
    <link rel="stylesheet" href="/theme/css/bootstrap.dark.css" type="text/css" />
    <style type="text/css">
      body {
        padding-top: 60px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
      .tag-1 {
        font-size: 13pt;
      }
      .tag-2 {
        font-size: 10pt;
      }
      .tag-2 {
        font-size: 8pt;
      }
      .tag-4 {
        font-size: 6pt;
     }
    </style>
    <link href="/theme/css/bootstrap-responsive.dark.css" rel="stylesheet">
        <link href="/theme/css/font-awesome.css" rel="stylesheet">

    <link href="/theme/css/pygments.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/theme/images/favicon.ico">
    <link rel="apple-touch-icon" href="/theme/images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/theme/images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/theme/images/apple-touch-icon-114x114.png">

    <link href="/" type="application/atom+xml" rel="alternate" title="blog.davep.org ATOM Feed" />

  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/index.html">blog.davep.org </a>
          <div class="nav-collapse">
            <ul class="nav">
                          <li class="divider-vertical"></li>
                  <li class="active">
                    <a href="/category/misc.html">
						<i class="icon-folder-open icon-large"></i>misc
					</a>
                  </li>

                          <ul class="nav pull-right">
                                <li><a href="/archives.html"><i class="icon-th-list"></i>Archives</a></li>
                          </ul>

            </ul>
            <!--<p class="navbar-text pull-right">Logged in as <a href="#">username</a></p>-->
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row">
        <div class="span9" id="content">
<section id="content">
        <article>
                <header>
                        <h1>
                                <a href=""
                                        rel="bookmark"
                                        title="Permalink to "Swift TIL 9"">
                                        "Swift TIL 9"
                                </a>
                        </h1>
                </header>
                <div class="entry-content">
                <div class="well">
<footer class="post-info">
<span class="label">Date</span>
<abbr class="published" title="2020-06-30T21:02:00+01:00">
        <i class="icon-calendar"></i>Tue 30 June 2020
</abbr>
<span class="label">By</span>
<a href="/author/dave-pearson.html"><i class="icon-user"></i>Dave Pearson</a>
<span class="label">Category</span>
<a href="/category/misc.html"><i class="icon-folder-open"></i>misc</a>.


<span class="label">Tags</span>
	<a href="/tag/swift.html"><i class="icon-tag"></i>[ "swift"</a>
	<a href="/tag/apple.html"><i class="icon-tag"></i>"apple"</a>
	<a href="/tag/til.html"><i class="icon-tag"></i>"TIL" ]</a>
</footer><!-- /.post-info -->                </div>
                <p><em>Some may be happy to know that the frequency of these little notes to
myself may reduce real soon, as I'm sort of caught up with my notes, mostly,
and I'm unlikely to pick up the book that I'm reading for a couple or so
days now</em></p>
<p>I'm used to the idea of structures and classes from other languages, going
way back, but as I first started reading about Swift it wasn't obvious to me
why it had them both too. At first glance they appeared to be very similar.
It was only as I got a little further into reading that I found out one huge
difference (there are others, that pretty much stem from this one): objects
created from classes are <em>reference types</em> (which you'd expect, of course),
structures on the other hand are <em>value types</em>.</p>
<p>A quick illustration of the difference, in my head anyway, can be found if I
go back to <a href="/2020/06/24/swift-til-3.html">using an
observer</a>.
Take this daft bit of illustrative code for example:</p>
<div class="highlight"><pre><span></span><code><span class="kd">class</span> <span class="nc">Person</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nv">name</span> <span class="p">:</span> <span class="nb">String</span> <span class="p">=</span> <span class="s">&quot;No name&quot;</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nv">dave</span> <span class="p">=</span> <span class="n">Person</span><span class="p">()</span> <span class="p">{</span>
    <span class="kr">didSet</span> <span class="p">{</span>
        <span class="bp">print</span><span class="p">(</span> <span class="s">&quot;dave was set&quot;</span> <span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">dave</span><span class="p">.</span><span class="n">name</span> <span class="p">=</span> <span class="s">&quot;Dave&quot;</span>
</code></pre></div>

<p>If I run that, I get no output. That makes sense. The variable <code>dave</code> is
initialised to an instance of a <code>Person</code> but is never subsequently set to
anything else. The following assignment is to a property of the object.
We're working on a reference to an existing object.</p>
<p>But simply change <code>Person</code> to being a <code>struct</code>:</p>
<div class="highlight"><pre><span></span><code><span class="kd">struct</span> <span class="nc">Person</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nv">name</span> <span class="p">:</span> <span class="nb">String</span> <span class="p">=</span> <span class="s">&quot;No name&quot;</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nv">dave</span> <span class="p">=</span> <span class="n">Person</span><span class="p">()</span> <span class="p">{</span>
    <span class="kr">didSet</span> <span class="p">{</span>
        <span class="bp">print</span><span class="p">(</span> <span class="s">&quot;dave was set&quot;</span> <span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">dave</span><span class="p">.</span><span class="n">name</span> <span class="p">=</span> <span class="s">&quot;Dave&quot;</span>
</code></pre></div>

<p>and the output looks like this:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>swift<span class="w"> </span>run
<span class="o">[</span><span class="m">3</span>/3<span class="o">]</span><span class="w"> </span>Linking<span class="w"> </span>ref-vs-val
dave<span class="w"> </span>was<span class="w"> </span><span class="nb">set</span>
</code></pre></div>

<p>That's because the assignment to <code>dave.name</code> means a new value is created.</p>
<p>This, of course, is just the tip of the iceberg; there are all sorts of
other things to keep in mind that follow on from this, generally relating to
mutability (or the lack thereof). I also imagine this means that, when
there's no obvious benefit either way, the choice of using <code>class</code> vs
<code>struct</code> is something that could have performance implications. That's
something for me to look into more another day; but this is a note here to
myself that it's a thing to keep in mind.</p>
                </div><!-- /.entry-content -->
                <div class="comments">
                <h2>Comments !</h2>
                        <div id="disqus_thread"></div>
                        <script type="text/javascript">
                           var disqus_identifier = "2020/06/30/swift-til-9.html";
                           (function() {
                                var dsq = document.createElement('script');
                                dsq.type = 'text/javascript'; dsq.async = true;
                                dsq.src = 'https://blogdaveporg.disqus.com/embed.js';
                                (document.getElementsByTagName('head')[0] ||
                                 document.getElementsByTagName('body')[0]).appendChild(dsq);
                          })();
                        </script>
                </div>
        </article>
</section>
        </div><!--/span-->

                <div class="span3 well sidebar-nav" id="sidebar">
<ul class="nav nav-list">
<li class="nav-header"><h4><i class="icon-external-link"></i>blogroll</h4></li>
    <li><a href="https://github.com/davep"><i class="icon-external-link"></i>GitHub</a></li>
<li class="nav-header"><h4><i class="icon-home icon-large"></i> social</h4></li>
<li><a href="/" rel="alternate"><i class="icon-bookmark icon-large"></i>atom feed</a></li>
    <li><a href="https://fosstodon.org/@davep"><i class="icon-Mastodon-sign icon-large"></i>Mastodon</a></li>

<li class="nav-header"><h4><i class="icon-folder-close icon-large"></i>Categories</h4></li>
<li>
<a href="/category/misc.html">
    <i class="icon-folder-open icon-large"></i>misc
</a>
</li>

<li class="nav-header"><h4><i class="icon-tags icon-large"></i>Tags</h4></li>


</ul>        </div><!--/.well -->

      </div><!--/row-->

      <hr>

      <footer>
        <address id="about">
                Proudly powered by <a href="http://pelican.notmyidea.org/">Pelican <i class="icon-external-link"></i></a>,
                                which takes great advantage of <a href="http://python.org">Python <i class="icon-external-link"></i></a>.
        </address><!-- /#about -->

        <p>The theme is based on <a href="http://twitter.github.com/bootstrap/">Bootstrap from Twitter <i class="icon-external-link"></i></a>,
                   and <a href="http://fortawesome.github.com/Font-Awesome/">Font-Awesome <i class="icon-external-link"></i></a>, thanks!</p>
      </footer>

    </div><!--/.fluid-container-->


<script type="text/javascript">
    var disqus_shortname = 'blogdaveporg';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>

    <!-- Le javascript -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="/theme/js/jquery-1.7.2.min.js"></script>
    <script src="/theme/js/bootstrap.min.js"></script>
  </body>
</html>