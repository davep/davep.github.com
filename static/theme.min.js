(function(){'use strict';const THEME_COOKIE_NAME='blogmore-theme';const THEME_COOKIE_DAYS=365;function getCookie(name){const value=`; ${document.cookie}`;const parts=value.split(`; ${name}=`);if(parts.length===2){return parts.pop().split(';').shift();}
return null;}
function setCookie(name,value,days){const date=new Date();date.setTime(date.getTime()+(days*24*60*60*1000));const expires=`expires=${date.toUTCString()}`;const secure=window.location.protocol==='https:'?';Secure':'';document.cookie=`${name}=${value};${expires};path=/;SameSite=Lax${secure}`;}
function getSystemTheme(){if(window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches){return'dark';}
return'light';}
function getCurrentTheme(){const savedTheme=getCookie(THEME_COOKIE_NAME);if(savedTheme){return savedTheme;}
return getSystemTheme();}
function applyTheme(theme){const html=document.documentElement;if(theme==='dark'||theme==='light'){html.setAttribute('data-theme',theme);}else{html.removeAttribute('data-theme');}}
function toggleTheme(){const currentTheme=getCurrentTheme();const newTheme=currentTheme==='dark'?'light':'dark';setCookie(THEME_COOKIE_NAME,newTheme,THEME_COOKIE_DAYS);applyTheme(newTheme);}
function initTheme(){const savedTheme=getCookie(THEME_COOKIE_NAME);if(savedTheme){applyTheme(savedTheme);}else{applyTheme(getSystemTheme());}}
function setupThemeToggle(){const toggleButton=document.querySelector('.theme-toggle');if(toggleButton){toggleButton.addEventListener('click',toggleTheme);}}
initTheme();if(document.readyState==='loading'){document.addEventListener('DOMContentLoaded',setupThemeToggle);}else{setupThemeToggle();}
if(window.matchMedia){window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change',function(e){const savedTheme=getCookie(THEME_COOKIE_NAME);if(!savedTheme){const newTheme=e.matches?'dark':'light';applyTheme(newTheme);}});}})();