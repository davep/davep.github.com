<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="blogmore v0.12.0">
    <title>Posts from 2020 - davep</title>
    
    <link rel="icon" href="/icons/favicon.ico">
    
    
    <!-- Shortcut icon for backward compatibility -->
    <link rel="shortcut icon" href="/favicon.ico">
    <!-- Favicon alternatives -->
    <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-touch-icon-120.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-touch-icon-152.png">
    <link rel="apple-touch-icon" sizes="167x167" href="/icons/apple-touch-icon-167.png">
    <!-- Android/Chrome -->
    <link rel="manifest" href="/icons/site.webmanifest">
    <!-- Windows/Edge -->
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-config" content="/icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    
    
    <link rel="stylesheet" href="/static/fontawesome.css">
    
    <link rel="stylesheet" href="/static/styles.min.css">
    
    
    <link rel="alternate" type="application/rss+xml" title="davep - RSS Feed" href="https://blog.davep.org/feed.xml">
    <link rel="alternate" type="application/atom+xml" title="davep - Atom Feed" href="https://blog.davep.org/feeds/all.atom.xml">
    
    
    
    <meta name="author" content="Dave Pearson">
    
    
    
<meta property="og:title" content="Posts from 2020 - davep">

<meta name="description" content="Dave Pearson&#39;s personal blog">
<meta property="og:description" content="Dave Pearson&#39;s personal blog">
<meta name="twitter:description" content="Dave Pearson&#39;s personal blog">


<meta name="keywords" content="Emacs, Python, Programming, Terminal, Textual">


    <script src="/static/theme.js"></script>
    
</head>
<body>
    <div class="site-container">
        <aside class="sidebar">
            <div class="sidebar-content">
                <div class="sidebar-header">
                    
                    <div class="sidebar-logo">
                        <a href="/">
                            <img src="/logo.jpeg" alt="davep">
                        </a>
                    </div>
                    

                    <div class="sidebar-title">
                        <h1><a href="/">davep</a></h1>
                        
                        <p class="sidebar-subtitle">Code and stuff</p>
                        
                    </div>
                </div>

                
                <div class="sidebar-pages">
                    <ul class="sidebar-links">
                        
                        <li><a href="/about.html">About</a></li>
                        
                        <li><a href="/dotfiles.html">Dot Files</a></li>
                        
                    </ul>
                </div>
                

                
                <section class="sidebar-section">
                    <h2>Links</h2>
                    <ul class="sidebar-links">
                        
                        <li><a href="https://davep.at/" target="_blank" rel="noopener noreferrer">davep@</a></li>
                        
                        <li><a href="https://raindrop.io/davep/public-46742255/sort=-created&amp;perpage=30&amp;page=0" target="_blank" rel="noopener noreferrer">Bookmarks</a></li>
                        
                        <li><a href="https://seenbydavep.blogspot.com/" target="_blank" rel="noopener noreferrer">Photoblog</a></li>
                        
                        <li><a href="https://elisp.dev/" target="_blank" rel="noopener noreferrer">Emacs Packages</a></li>
                        
                        <li><a href="https://pypi.org/user/davepearson/" target="_blank" rel="noopener noreferrer">Python Packages</a></li>
                        
                    </ul>
                </section>
                

                
                <section class="sidebar-section">
                    <h2>Social</h2>
                    <div class="sidebar-socials">
                        
                        <a href="https://www.flickr.com/photos/davepearson/" title="flickr" aria-label="flickr" target="_blank" rel="noopener noreferrer">
                            <i class="fa-brands fa-flickr"></i>
                        </a>
                        
                        <a href="https://github.com/davep" title="github" aria-label="github" target="_blank" rel="noopener noreferrer">
                            <i class="fa-brands fa-github"></i>
                        </a>
                        
                        <a href="https://www.last.fm/user/davepdotorg" title="lastfm" aria-label="lastfm" target="_blank" rel="noopener noreferrer">
                            <i class="fa-brands fa-lastfm"></i>
                        </a>
                        
                        <a href="https://fosstodon.org/@davep" title="mastodon" aria-label="mastodon" target="_blank" rel="noopener noreferrer">
                            <i class="fa-brands fa-mastodon"></i>
                        </a>
                        
                        <a href="https://www.npmjs.com/~davep.org" title="npm" aria-label="npm" target="_blank" rel="noopener noreferrer">
                            <i class="fa-brands fa-npm"></i>
                        </a>
                        
                        <a href="https://steamcommunity.com/id/davepdotorg" title="steam" aria-label="steam" target="_blank" rel="noopener noreferrer">
                            <i class="fa-brands fa-steam"></i>
                        </a>
                        
                        <a href="https://www.youtube.com/user/daveporg" title="youtube" aria-label="youtube" target="_blank" rel="noopener noreferrer">
                            <i class="fa-brands fa-youtube"></i>
                        </a>
                        
                    </div>
                </section>
                
            </div>
        </aside>

        <div class="main-wrapper">
            <header>
                <nav>
                    <ul>
                        <li><a href="/categories.html">Categories</a></li>
                        <li><a href="/tags.html">Tags</a></li>
                        <li><a href="/archive.html">Archive</a></li>
                        
                        <li><a href="/search.html">Search</a></li>
                        
                        
                        <li><a href="/feed.xml" title="Subscribe via RSS feed">RSS</a></li>
                        <li><a href="/feeds/all.atom.xml" title="Subscribe via Atom feed">Atom</a></li>
                        
                        <li>
                            <button class="theme-toggle" type="button" aria-label="Toggle theme">
                                <span class="icon light-icon">‚òÄÔ∏è</span>
                                <span class="icon dark-icon">üåô</span>
                                <span class="theme-label">Theme</span>
                            </button>
                        </li>
                    </ul>
                </nav>
            </header>

            <main>
                
<div class="archive">
    <h1>Posts from 2020</h1>
    
    
    
    
    
    <article class="post-summary">
        <h2><a href="/2020/06/29/swift-til-8.html">Swift TIL 8</a></h2>
        
        <time datetime="2020-06-29T22:48:00+01:00"><a href="/2020/">2020</a>-<a href="/2020/06/">06</a>-<a href="/2020/06/29/">29</a> 22:48:00 UTC+01:00</time>
        
        <div class="reading-time">2 min read</div>
        
        <div class="category">
            <a href="/category/til.html" class="category-link">TIL</a>
        </div>
        
        <div class="post-content">
            <p>Although I read up on it a few days back, it was only this evening that I
fired up Emacs (well of course I'm testing Swift with Emacs, what did you
think I'd do?!?) and dabbled with some code to really get a feel for how
casting works in Swift.</p>
<p>Swift seems to be one of those languages that does it with a keyword rather
than a non-keyword approach. The two main keywords being <code>as?</code> and <code>as!</code>. I
kind of like how there's a polite version and a bossy version. Having the
two makes a lot of sense from what I read too.</p>
<p>To try and illustrate my understanding so far (and do keep in mind I'm not
writing this with the express purpose of explaining it to anyone else -- I'm
writing this to try and retain it all in my head by working through it),
here's a bit of utterly pointless and highly-contrived code that defines
three classes in a fairly ordinary hierarchy:</p>
<div class="highlight"><pre><span></span><code><span class="kd">class</span><span class="w"> </span><span class="nc">Animal</span><span class="w"> </span><span class="p">{}</span>

<span class="kd">class</span><span class="w"> </span><span class="nc">Dog</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Animal</span><span class="w"> </span><span class="p">{}</span>

<span class="kd">class</span><span class="w"> </span><span class="nc">Cat</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Animal</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">func</span><span class="w"> </span><span class="nf">beAdorable</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="bp">print</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Purrrrrr!&quot;</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>So, so far, so good: we have animals, we have dogs which are a kind of
animal, and we have cats, which are also a kind of animal, but they have the
special ability of actually being adorable. üòº</p>
<p>Now, for the purposes of just testing all of this out, here's a horrible
function that makes little sense other than for testing:</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="nf">adore</span><span class="p">(</span><span class="w"> </span><span class="kc">_</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Animal</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">(</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">as</span><span class="p">!</span><span class="w"> </span><span class="n">Cat</span><span class="w"> </span><span class="p">).</span><span class="n">beAdorable</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div>

<p>Given an animal, it forces it to be a cat (by casting it with <code>as!</code>), and
then asks it to be adorable (because, of course, cats always do as they're
asked).</p>
<p>So, if we then had:</p>
<div class="highlight"><pre><span></span><code><span class="n">adore</span><span class="p">(</span><span class="w"> </span><span class="n">Cat</span><span class="p">()</span><span class="w"> </span><span class="p">)</span>
</code></pre></div>

<p>we'd get what we expect when run:</p>
<div class="highlight"><pre><span></span><code>Purrrrrr!
</code></pre></div>

<p>So far so good. But what about:</p>
<div class="highlight"><pre><span></span><code><span class="n">adore</span><span class="p">(</span><span class="w"> </span><span class="n">Dog</span><span class="p">()</span><span class="w"> </span><span class="p">)</span>
</code></pre></div>

<p>Yeah, that's not so good:</p>
<div class="highlight"><pre><span></span><code>~/d/p/s/casting$<span class="w"> </span>swift<span class="w"> </span>run
<span class="o">[</span><span class="m">3</span>/3<span class="o">]</span><span class="w"> </span>Linking<span class="w"> </span>casting
Could<span class="w"> </span>not<span class="w"> </span>cast<span class="w"> </span>value<span class="w"> </span>of<span class="w"> </span><span class="nb">type</span><span class="w"> </span><span class="s1">&#39;casting.Dog&#39;</span><span class="w"> </span><span class="o">(</span>0x10a1f8830<span class="o">)</span><span class="w"> </span>to<span class="w"> </span><span class="s1">&#39;casting.Cat&#39;</span><span class="w"> </span><span class="o">(</span>0x10a1f88c0<span class="o">)</span>.
fish:<span class="w"> </span><span class="s1">&#39;swift run&#39;</span><span class="w"> </span>terminated<span class="w"> </span>by<span class="w"> </span>signal<span class="w"> </span>SIGABRT<span class="w"> </span><span class="o">(</span>Abort<span class="o">)</span>
</code></pre></div>

<p>One way around this would be to use <code>as?</code>, which has the effect of casting
the result to an
<a href="https://developer.apple.com/documentation/swift/optional" rel="noopener noreferrer" target="_blank"><code>Optional</code></a>. This
means I can re-write the <code>adore</code> function like this:</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="nf">adore</span><span class="p">(</span><span class="w"> </span><span class="kc">_</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Animal</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">(</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">as</span><span class="p">?</span><span class="w"> </span><span class="n">Cat</span><span class="w"> </span><span class="p">)?.</span><span class="n">beAdorable</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div>

<p>Now, if <code>a</code> can be cast to a <code>Cat</code>, you get an optional that wraps the
<code>Cat</code>, otherwise you get an optional that wraps <code>nil</code> (hence the second <code>?</code>
before attempting to call the <code>beAdorable</code> member function).</p>
<p>So now, if I run the problematic dog call above again:</p>
<div class="highlight"><pre><span></span><code>~/d/p/s/casting$<span class="w"> </span>swift<span class="w"> </span>run
<span class="o">[</span><span class="m">3</span>/3<span class="o">]</span><span class="w"> </span>Linking<span class="w"> </span>casting
</code></pre></div>

<p>In other words, no output at all. Which is the idea here.</p>
<p>I think I like this, I think it makes sense, and I think I can see why both
<code>as!</code> and <code>as?</code> exist. The latter also means, of course, that you can do
something like:</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="nf">adore</span><span class="p">(</span><span class="w"> </span><span class="kc">_</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Animal</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nv">cat</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">as</span><span class="p">?</span><span class="w"> </span><span class="n">Cat</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">cat</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">cat</span><span class="p">!.</span><span class="n">beAdorable</span><span class="p">()</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="bp">print</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;That totally wasn&#39;t a cat&quot;</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>which, in the messy dog call again, now results in:</p>
<div class="highlight"><pre><span></span><code>~/d/p/s/casting$<span class="w"> </span>swift<span class="w"> </span>run
<span class="o">[</span><span class="m">3</span>/3<span class="o">]</span><span class="w"> </span>Linking<span class="w"> </span>casting
That<span class="w"> </span>totally<span class="w"> </span>wasn<span class="err">&#39;</span>t<span class="w"> </span>a<span class="w"> </span>cat
</code></pre></div>

<p>Or, of course, the same effect could be had with:</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="nf">adore</span><span class="p">(</span><span class="w"> </span><span class="kc">_</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Animal</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">Cat</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">(</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">as</span><span class="p">!</span><span class="w"> </span><span class="n">Cat</span><span class="w"> </span><span class="p">).</span><span class="n">beAdorable</span><span class="p">()</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="bp">print</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;That totally wasn&#39;t a cat&quot;</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>It should be stressed, of course, that the example code is terrible design,
so given the above I'd ensure I never end up in this sort of situation in
the first place. But for the purposes of writing and compiling and running
code and seeing what the different situations result in, it helped.</p>
        </div>
        
        <div class="tags">
            
            <a href="/tag/swift.html" class="tag">Swift</a>
            
            <a href="/tag/apple.html" class="tag">Apple</a>
            
        </div>
        
    </article>
    
    <article class="post-summary">
        <h2><a href="/2020/06/28/swift-til-7.html">Swift TIL 7</a></h2>
        
        <time datetime="2020-06-28T16:25:00+01:00"><a href="/2020/">2020</a>-<a href="/2020/06/">06</a>-<a href="/2020/06/28/">28</a> 16:25:00 UTC+01:00</time>
        
        <div class="reading-time">1 min read</div>
        
        <div class="category">
            <a href="/category/til.html" class="category-link">TIL</a>
        </div>
        
        <div class="post-content">
            <p>This post is <em>very</em> much a case of me writing it down to try and get it all
straight in my head, and to make sure it sticks. The other day I was reading
about Swift's types and type-equality checks, and as I'd expect from plenty
of other languages I've worked with, there's a way for checking that two
types are the same, such that super/subclasses aren't taken into account,
and a way where they are. So, given this silly code:</p>
<div class="highlight"><pre><span></span><code><span class="kd">class</span><span class="w"> </span><span class="nc">Animal</span><span class="w"> </span><span class="p">{}</span>

<span class="kd">class</span><span class="w"> </span><span class="nc">Cat</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Animal</span><span class="w"> </span><span class="p">{}</span>

<span class="bp">print</span><span class="p">(</span><span class="w"> </span><span class="n">Cat</span><span class="p">.</span><span class="kc">self</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="n">Animal</span><span class="p">.</span><span class="kc">self</span><span class="w"> </span><span class="p">)</span><span class="w">          </span><span class="c1">// False</span>
<span class="bp">print</span><span class="p">(</span><span class="w"> </span><span class="n">Cat</span><span class="p">.</span><span class="kc">self</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">Animal</span><span class="p">.</span><span class="kr">Type</span><span class="w"> </span><span class="p">)</span><span class="w">          </span><span class="c1">// True</span>
<span class="bp">print</span><span class="p">(</span><span class="w"> </span><span class="n">type</span><span class="p">(</span><span class="w"> </span><span class="n">of</span><span class="p">:</span><span class="w"> </span><span class="n">Cat</span><span class="p">()</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">Animal</span><span class="p">.</span><span class="kr">Type</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="c1">// True</span>
</code></pre></div>

<p>it's made clear that <code>==</code> checks for strict equality and a super/subclass
relationship isn't taken into account. On the other hand <code>is</code> does take it
into account.</p>
<p>Only... what's with this whole <code>.self</code> sometimes and <code>.Type</code> other times
business? That took a little bit of writing code and playing to get
comfortable with. Here's how I understand it now (and do feel free to
correct me below if I'm way off):</p>
<p>Given the above code, <code>Animal.Type</code> is the type of a value that expresses
the type of <code>Animal</code>. On the other hand, <code>Animal.self</code> is a value that is
the type of an <code>Animal</code>. Yeah, I know, that still reads oddly. But written
as code:</p>
<div class="highlight"><pre><span></span><code><span class="kd">let</span><span class="w"> </span><span class="nv">feline</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Cat</span><span class="p">.</span><span class="kr">Type</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">Cat</span><span class="p">.</span><span class="kc">self</span>
</code></pre></div>

<p>I think it makes a lot more sense. And having got there I felt I better
understood it. I'm not 100% sure I'm 100% with it, but I'm getting there.</p>
        </div>
        
        <div class="tags">
            
            <a href="/tag/swift.html" class="tag">Swift</a>
            
            <a href="/tag/apple.html" class="tag">Apple</a>
            
        </div>
        
    </article>
    
    <article class="post-summary">
        <h2><a href="/2020/06/27/swift-til-6.html">Swift TIL 6</a></h2>
        
        <time datetime="2020-06-27T21:23:00+01:00"><a href="/2020/">2020</a>-<a href="/2020/06/">06</a>-<a href="/2020/06/27/">27</a> 21:23:00 UTC+01:00</time>
        
        <div class="reading-time">1 min read</div>
        
        <div class="category">
            <a href="/category/til.html" class="category-link">TIL</a>
        </div>
        
        <div class="post-content">
            <p>I'm going to file this one under "it seems really unnecessary, but it's also
kinda cool". While reading up about
<a href="https://docs.swift.org/swift-book/LanguageGuide/Protocols.html" rel="noopener noreferrer" target="_blank">protocols</a>
the book I'm reading introduced the <code>ExpressibleBy*Literal</code> protocols, where
the <code>*</code> is one of a number of obvious literals. For example:
<code>ExpressibleByStringLiteral</code>. As you might imagine, it lets you create a
class that can be initialised with a literal value, as opposed to needing to
appear to call the constructor for a class.</p>
<p>So, for a silly example:</p>
<div class="highlight"><pre><span></span><code><span class="kd">class</span><span class="w"> </span><span class="nc">Hello</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">ExpressibleByStringLiteral</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">let</span><span class="w"> </span><span class="nv">what</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nb">String</span>

<span class="w">    </span><span class="kr">required</span><span class="w"> </span><span class="kd">init</span><span class="p">(</span><span class="w"> </span><span class="n">stringLiteral</span><span class="w"> </span><span class="n">what</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kc">self</span><span class="p">.</span><span class="n">what</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">what</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">func</span><span class="w"> </span><span class="nf">say</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="bp">print</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Hello, </span><span class="si">\(</span><span class="kc">self</span><span class="p">.</span><span class="n">what</span><span class="si">)</span><span class="s">!&quot;</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>You could, of course, write this:</p>
<div class="highlight"><pre><span></span><code><span class="kd">let</span><span class="w"> </span><span class="nv">v1</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">Hello</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;world&quot;</span><span class="w"> </span><span class="p">)</span>
<span class="n">v1</span><span class="p">.</span><span class="n">say</span><span class="p">()</span>
</code></pre></div>

<p>but because of <code>ExpressibleByStringLiteral</code> you can also write:</p>
<div class="highlight"><pre><span></span><code><span class="kd">let</span><span class="w"> </span><span class="nv">v2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Hello</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;universe&quot;</span>
<span class="n">v2</span><span class="p">.</span><span class="n">say</span><span class="p">()</span>
</code></pre></div>

<p>Now, sure, in this case it saves you nothing, but this does also mean that
parameters of functions whose type uses one of the <code>`ExpressibleBy*Literal</code>
protocols can be passed a literal, rather than a "long-hand" instantiated
object. For example:</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="nf">Greet</span><span class="p">(</span><span class="w"> </span><span class="kc">_</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Hello</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">h</span><span class="p">.</span><span class="n">say</span><span class="p">()</span>
<span class="p">}</span>

<span class="n">Greet</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;davep&quot;</span><span class="w"> </span><span class="p">)</span>
</code></pre></div>

<p>I can see that being quite handy.</p>
        </div>
        
        <div class="tags">
            
            <a href="/tag/swift.html" class="tag">Swift</a>
            
            <a href="/tag/apple.html" class="tag">Apple</a>
            
        </div>
        
    </article>
    
    <article class="post-summary">
        <h2><a href="/2020/06/26/switch-til-5.html">Swift TIL 5</a></h2>
        
        <time datetime="2020-06-26T15:44:00+01:00"><a href="/2020/">2020</a>-<a href="/2020/06/">06</a>-<a href="/2020/06/26/">26</a> 15:44:00 UTC+01:00</time>
        
        <div class="reading-time">1 min read</div>
        
        <div class="category">
            <a href="/category/til.html" class="category-link">TIL</a>
        </div>
        
        <div class="post-content">
            <p>I'm going to file this one under "it makes perfect sense, but I don't think
it aids in making the code readable" -- something which I'm finding is a bit
of a theme with Swift.</p>
<p>In Swift <code>self</code> gets used and gets used in a way you'd expect from many
other languages. So far so good. But, it seems, <code>Self</code> is also a thing too,
and it's different from <code>self</code>. Whereas <code>self</code> is the current instance,
<code>Self</code> is the current type. So consider this:</p>
<div class="highlight"><pre><span></span><code><span class="kd">class</span><span class="w"> </span><span class="nc">Greeting</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">class</span><span class="w"> </span><span class="nc">func</span><span class="w"> </span><span class="n">message</span><span class="p">()</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">String</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s">&quot;Ayup!&quot;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">func</span><span class="w"> </span><span class="nf">message</span><span class="p">()</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">String</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s">&quot;Well hello there&quot;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">func</span><span class="w"> </span><span class="nf">emit</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="bp">print</span><span class="p">(</span><span class="w"> </span><span class="kc">Self</span><span class="p">.</span><span class="n">message</span><span class="p">()</span><span class="w"> </span><span class="p">)</span>
<span class="w">        </span><span class="bp">print</span><span class="p">(</span><span class="w"> </span><span class="kc">self</span><span class="p">.</span><span class="n">message</span><span class="p">()</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="n">Greeting</span><span class="p">().</span><span class="n">emit</span><span class="p">()</span>
</code></pre></div>

<p>When run, the output is:</p>
<div class="highlight"><pre><span></span><code>Ayup!
Well hello there
</code></pre></div>

<p>It makes sense that that's the case. I actually really like the ability to
use <code>Self</code> rather than having to use <code>Greeting</code>, but damn that's really
setting things up for either mistyping or misreading code. You're going to
want to hope that your development environment makes it super obvious what's
a value and what's a type when it comes to using font choices.</p>
        </div>
        
        <div class="tags">
            
            <a href="/tag/swift.html" class="tag">Swift</a>
            
            <a href="/tag/apple.html" class="tag">Apple</a>
            
        </div>
        
    </article>
    
    <article class="post-summary">
        <h2><a href="/2020/06/25/swift-til-4.html">Swift TIL 4</a></h2>
        
        <time datetime="2020-06-25T13:21:00+01:00"><a href="/2020/">2020</a>-<a href="/2020/06/">06</a>-<a href="/2020/06/25/">25</a> 13:21:00 UTC+01:00</time>
        
        <div class="reading-time">1 min read</div>
        
        <div class="category">
            <a href="/category/til.html" class="category-link">TIL</a>
        </div>
        
        <div class="post-content">
            <p>Some languages favour a <a href="https://www.python.org/dev/peps/pep-0020/" rel="noopener noreferrer" target="_blank">"one way to do
it"</a> approach, some favour
<a href="https://en.wikipedia.org/wiki/There%27s_more_than_one_way_to_do_it" rel="noopener noreferrer" target="_blank">"there's more than one way to do
it"</a>.
I'm not sure I'm at a point where I have a feel for what Swift's approach
is, but I'm getting the impression it's more the latter than the former.</p>
<p>If there was one thing that made me think that, it was when I found out that
Swift's <code>bool</code> type has a <code>toggle</code> method.</p>
<div class="highlight"><pre><span></span><code><span class="kd">var</span><span class="w"> </span><span class="nv">cool</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kc">false</span>

<span class="bp">print</span><span class="p">(</span><span class="w"> </span><span class="n">cool</span><span class="w"> </span><span class="p">)</span>
<span class="n">cool</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="o">!</span><span class="n">cool</span>
<span class="bp">print</span><span class="p">(</span><span class="w"> </span><span class="n">cool</span><span class="w"> </span><span class="p">)</span>
<span class="n">cool</span><span class="p">.</span><span class="n">toggle</span><span class="p">()</span>
<span class="bp">print</span><span class="p">(</span><span class="w"> </span><span class="n">cool</span><span class="w"> </span><span class="p">)</span>
</code></pre></div>

<p>giving:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>swift<span class="w"> </span>run
<span class="nb">false</span>
<span class="nb">true</span>
<span class="nb">false</span>
</code></pre></div>

<p>I can see a number of reasons why that's actually going to be handy -- the
main one being when you want to throw around a toggling method -- but it
still struck me as rather odd on first reading. I also think it's worth me
making a personal note about it because <code>foo.toggle()</code> isn't going to stand
out as much as <code>foo = !foo</code> when reading code. At least not for a short
while.</p>
        </div>
        
        <div class="tags">
            
            <a href="/tag/swift.html" class="tag">Swift</a>
            
            <a href="/tag/apple.html" class="tag">Apple</a>
            
        </div>
        
    </article>
    
    <article class="post-summary">
        <h2><a href="/2020/06/24/swift-til-3.html">Swift TIL 3</a></h2>
        
        <time datetime="2020-06-24T16:38:00+01:00"><a href="/2020/">2020</a>-<a href="/2020/06/">06</a>-<a href="/2020/06/24/">24</a> 16:38:00 UTC+01:00</time>
        
        <div class="reading-time">1 min read</div>
        
        <div class="category">
            <a href="/category/til.html" class="category-link">TIL</a>
        </div>
        
        <div class="post-content">
            <p>Today's little "Swift TIL" is observers. While reading up on the language I
was delighted to find that it has observer support baked right into the
language, for any sort of variable. So code like this:</p>
<div class="highlight"><pre><span></span><code><span class="kd">var</span><span class="w"> </span><span class="nv">name</span><span class="w">  </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;David&quot;</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kr">willSet</span><span class="p">(</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="bp">print</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;About to change name from </span><span class="si">\(</span><span class="n">name</span><span class="si">)</span><span class="s"> to </span><span class="si">\(</span><span class="n">new</span><span class="si">)</span><span class="s">&quot;</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kr">didSet</span><span class="p">(</span><span class="w"> </span><span class="n">old</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="bp">print</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Name changed from </span><span class="si">\(</span><span class="n">old</span><span class="si">)</span><span class="s"> to </span><span class="si">\(</span><span class="n">name</span><span class="si">)</span><span class="s">&quot;</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="n">name</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;davep&quot;</span>
</code></pre></div>

<p>Does what you'd imagine:</p>
<div class="highlight"><pre><span></span><code>About to change name from David to davep
Name changed from David to davep
</code></pre></div>

<p>Not only can I see how that'd be useful for the main sorts of purposes that
Swift is put to, I can think of many times when I'd have benefitted from
that in my general day-to-day work. Of course, you can create an observer
approach in any language really, but having an idiom that's part of the
language feels nice and tidy.</p>
        </div>
        
        <div class="tags">
            
            <a href="/tag/swift.html" class="tag">Swift</a>
            
            <a href="/tag/apple.html" class="tag">Apple</a>
            
        </div>
        
    </article>
    
    <article class="post-summary">
        <h2><a href="/2020/06/23/swift-til-2.html">Swift TIL 2</a></h2>
        
        <time datetime="2020-06-23T14:21:00+01:00"><a href="/2020/">2020</a>-<a href="/2020/06/">06</a>-<a href="/2020/06/23/">23</a> 14:21:00 UTC+01:00</time>
        
        <div class="reading-time">1 min read</div>
        
        <div class="category">
            <a href="/category/til.html" class="category-link">TIL</a>
        </div>
        
        <div class="post-content">
            <p><a href="/2020/06/22/swift-til-1.html">Following on</a> with writing little notes to
myself so I remember some key things as I learn about Swift...</p>
<p>I sort of feel like this will make reading code a little harder, so it's one
I want to keep in mind. When calling an instance method, if it's not
ambiguous, you can omit <code>self.</code> from the call. For example:</p>
<div class="highlight"><pre><span></span><code><span class="kd">class</span><span class="w"> </span><span class="nc">Foo</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">func</span><span class="w"> </span><span class="nf">inner</span><span class="p">()</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">String</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s">&quot;Foo&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="kd">func</span><span class="w"> </span><span class="nf">outer</span><span class="p">()</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">String</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">inner</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="kc">self</span><span class="p">.</span><span class="n">inner</span><span class="p">()</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>

<span class="bp">print</span><span class="p">(</span><span class="w"> </span><span class="n">Foo</span><span class="p">().</span><span class="n">outer</span><span class="p">()</span><span class="w"> </span><span class="p">)</span>
</code></pre></div>

<p>This makes me feel a little uneasy, and I strongly suspect I'll always use
<code>self.</code> when writing such code: I'm a big fan of the idea that we write code
for people, not for compilers.</p>
        </div>
        
        <div class="tags">
            
            <a href="/tag/swift.html" class="tag">Swift</a>
            
            <a href="/tag/apple.html" class="tag">Apple</a>
            
        </div>
        
    </article>
    
    <article class="post-summary">
        <h2><a href="/2020/06/22/swift-til-1.html">Swift TIL 1</a></h2>
        
        <time datetime="2020-06-22T13:18:00+01:00"><a href="/2020/">2020</a>-<a href="/2020/06/">06</a>-<a href="/2020/06/22/">22</a> 13:18:00 UTC+01:00</time>
        
        <div class="reading-time">1 min read</div>
        
        <div class="category">
            <a href="/category/til.html" class="category-link">TIL</a>
        </div>
        
        <div class="post-content">
            <p>As <a href="/2020/06/21/a-second-attempt-to-learn-swift.html">I mentioned
yesterday</a>,
I'm going to make a small series of posts where I write down things that
I've stumbled on while getting to know Swift that are, for me personally,
worthy of note, different, unusual, cool, or just simply "WTF!?!".</p>
<p>Because learning new stuff is fun.</p>
<p>My first one is that you can use keywords as identifiers if you "escape"
them with backticks. Kind of like this:</p>
<div class="highlight"><pre><span></span><code><span class="kd">let</span><span class="w"> </span><span class="p">`</span><span class="kd">let</span><span class="p">`</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;let&quot;</span>

<span class="bp">print</span><span class="p">(</span><span class="w"> </span><span class="p">`</span><span class="kd">let</span><span class="p">`</span><span class="w"> </span><span class="p">)</span>
</code></pre></div>

<p>I'm struggling to imagine a situation where I'd ever want to do this. I'm
still unsure if my reaction is "that's cool" or "WTF?!?".</p>
        </div>
        
        <div class="tags">
            
            <a href="/tag/swift.html" class="tag">Swift</a>
            
            <a href="/tag/apple.html" class="tag">Apple</a>
            
        </div>
        
    </article>
    
    <article class="post-summary">
        <h2><a href="/2020/06/21/a-second-attempt-to-learn-swift.html">A second attempt to learn Swift</a></h2>
        
        <time datetime="2020-06-21T14:48:00+01:00"><a href="/2020/">2020</a>-<a href="/2020/06/">06</a>-<a href="/2020/06/21/">21</a> 14:48:00 UTC+01:00</time>
        
        <div class="reading-time">5 min read</div>
        
        <div class="category">
            <a href="/category/coding.html" class="category-link">Coding</a>
        </div>
        
        <div class="post-content">
            <p>It's five years ago this month that I bought myself my first macOS (then OS
X) device. After many years of having a Windows machine as my daily driver,
which was also my work machine (I worked from home), I decided it was high
time that I returned to having a Unix-a-like system on my desk too. For a
decade or so, starting in the later-90s, I'd had a GNU/Linux desktop. I
still had a Windows desktop (until a couple of years ago most of my work was
on DOS and Windows), but thanks to the wonders of a KVM, and later an X
server that ran on Windows, my personal hacking was done on a GNU/Linux
desktop.</p>
<p>But as things moved around, priorities changed, as life moved on, the
GNU/Linux boxes got retired and never quite replaced. Eventually, in 2015, I
found myself with the means and desire to recover that sort of setup. Long
story short, after a lot of reading up and weighing up options I decided
that the best option for a desktop Unix was... an iMac!</p>
<p>I loved it. Sure, <a href="/2015/06/27/my-first-couple-of-weeks-with-an-imac.html">there were lots of little things on the surface that were
different or annoying or just plain not as cool as the Mac fans would tell
you</a>,
but under the hood I found what I needed: a Unix CLI with all the things I
knew well. And, of course, it ran GNU Emacs just fine; that was the really
important thing for me.</p>
<p>Pretty much right away I decided that it might be fun to learn the tools
necessary to develop native Mac apps, and perhaps even iOS apps. I
downloaded XCode, bought a book, and started working through it. Having got
that book, I decided it might be interesting to own an iOS device too. So,
sort of needing an MP3 player, and having no wish to get an iPhone, <a href="/2015/06/23/and-now-for-some-ios.html">I got
myself an iPod
Touch</a>. So I
was all set to devour the Swift book, write some stuff for OS X, create an
iOS app or two, and... life happened. Stuff cropped up that distracted me
from taking that further and I never really returned to working through the
book.</p>
<p>Fast forward to now and that initial iMac and iPod purchase spiralled a wee
bit. Next after the iPod was an iPad Mini, when my Nexus 7 was starting to
show its age and it was obvious that Google wasn't going to produce any more
good Android tablets. Then, when I needed a very portable Unix-a-like
machine for trips between where I was living and Edinburgh, <a href="/2016/04/28/i-now-own-a-macbook.html">I got myself a
MacBook Air</a>.
Since then the iPod Touch has been replaced once, as has the iPad Mini. I
now also own an iPad and a MacBook Pro. Unless Apple screw up and turn Macs
into something unusable for developers (there are rumours), I imagine I'll
be using Apple devices for some time to come now.</p>
<p>And then, last month, having finally got frustrated with where Google were
going with Android and the Pixel series, I jumped ship to the iPhone 11.</p>
<p>As of right now I'm in a situation where I'm all about the Apple ecosystem
regarding hardware and operating systems (including for my work machine),
all of which is there to support my heavy use of the Google ecosystem
(actually, the one bit of Google hardware I still lean on heavily is the
Google Home -- I have 3 around my home).</p>
<p>So... given all of that, I thought it was time to look at returning to
learning Swift, with a view to writing some native macOS and i(Pad)OS stuff.
I soon realised that the book I'd bought back in 2015 was rather out of
date. It covers Swift 1.2 -- <a href="https://en.wikipedia.org/wiki/Swift_(programming_language)#Version_history" rel="noopener noreferrer" target="_blank">we're now up to
5.2</a>!
Given this, and given I've forgotten pretty much everything I'd read at the
time, I decided I should start again from scratch.</p>
<p>This weekend I've started reading my way though <a href="https://www.oreilly.com/library/view/ios-13-programming/9781492074526/" rel="noopener noreferrer" target="_blank"><em>iOS Programming
Fundamentals with
Swift</em></a>.
While this obviously has an emphasis on iOS, I'm already finding that the
first part of the book is a really great introduction to the Swift language
in general. The pace seems just right, and the way topics are grouped makes
it easy enough for me to skip over what's obvious (I don't need to know what
objected-oriented programming is, and what the difference between a class
and an object is, etc) and read up on the detail of this particular language
when it comes to general concepts I know (knowing the differences between a
class, struct and enum in the language is important, for example).</p>
<p>I've yet to write a line of code, but I'm fine with that. The book is
spending a lot of time introducing the language before encouraging you to
fire up XCode, and I'm okay with that. I'm never a fan of being asked to
write out code that I can't properly follow -- that just makes stuff look
like magic when it's far more educational to know what's going on. What I am
finding is I'm making lots of notes that are either <em>"oh, yeah, this is
cool, I like this idea!"</em> or <em>"WTF are you kidding me?!?"</em>. Which is really
nice -- it's always great to learn a new language that's a bit different
from what you normally use.</p>
<p>My plan then, over the next few weeks, it to keep at this and hopefully
document my journey. I think I'd like to write a short series of TIL-type
posts; nothing too long, just some new thing I read or discovered and my
reaction to it. So, if you happen to follow this blog, I apologise in
advance for any Swift-spam.</p>
<p>You have been warned. ;-)</p>
        </div>
        
        <div class="tags">
            
            <a href="/tag/swift.html" class="tag">Swift</a>
            
            <a href="/tag/apple.html" class="tag">Apple</a>
            
            <a href="/tag/coding.html" class="tag">coding</a>
            
        </div>
        
    </article>
    
    <article class="post-summary">
        <h2><a href="/2020/06/14/my-journey-to-the-dark-side-is-complete.html">My journey to the dark side is complete</a></h2>
        
        <time datetime="2020-06-14T20:00:00+01:00"><a href="/2020/">2020</a>-<a href="/2020/06/">06</a>-<a href="/2020/06/14/">14</a> 20:00:00 UTC+01:00</time>
        
        <div class="reading-time">4 min read</div>
        
        <div class="category">
            <a href="/category/emacs.html" class="category-link">Emacs</a>
        </div>
        
        <div class="post-content">
            <p>Ever since the whole business of "light mode" and "dark mode" really kicked
off in the mobile OS world, I've been a fan of the dark modes. On both
Android and iOS/iPadOS, when apps became available with dark modes, I'd
switch to it. When the operating systems themselves adopted the switch,
that's what I went for. As well as having a love for all things black
(anyone who knows me personally will know that), I think it just looks
better on mobile devices. I can't quite say why, but it just works best for
me.</p>
<p>So, when macOS got a supported dark mode, I instantly switched it on,
obviously. Then, within a day, I switched it back to light mode.
Surprisingly it just didn't work for me, and I wasn't sure why. Since then
I've tried living with it a few times and it's rarely lasted more than a few
hours. There was something, something I couldn't quite put my finger on,
that didn't sit right.</p>
<p>Last Monday I decided to give it another go. This time, however, I thought
I'd figured it out. The "problem" was Emacs! As mentioned <a href="/2020/01/11/where-i-live-and-work.html">back in
January</a>,
for as long as I've used it (so since the mid-1990s), my Emacs has always
had a light background -- probably because that's how it came "out of the
box" (I'm talking Emacs in graphical mode here; I started with it on <a href="https://en.wikipedia.org/wiki/OS/2#1994%E2%80%931996:_The_%22Warp%22_years" rel="noopener noreferrer" target="_blank">OS/2
Warp</a>
and then moved to a GNU/Linux X-based desktop). I figured that the contrast
between the colour scheme of Emacs, and the rest of the machine, was the
issue here.</p>
<p>I spend most of my working day either in Emacs, or in
<a href="https://www.iterm2.com/" rel="noopener noreferrer" target="_blank">iTerm2</a> -- often rapidly switching between the
two. I've always run iTerm2 in the usual dark background mode with light
text. So I figured the problem was having a dark OS desktop, dark terminal,
and then a light editing environment. Eventually that'd feel wrong.</p>
<p>So I decided that, for the first time in about 25 years, I should give Emacs
a go with a dark mode. Taking a quick look at <a href="https://pawelbx.github.io/emacs-theme-gallery/" rel="noopener noreferrer" target="_blank">popular dark
themes</a> I noticed
<a href="https://github.com/purcell/color-theme-sanityinc-tomorrow" rel="noopener noreferrer" target="_blank"><code>sanityinc-tomorrow-night</code></a>
looked easy on the eye, so I gave that a go (actually, I gave each of the
themes in that set a go, <a href="https://github.com/davep/.emacs.d/commit/07f1c4c4c8c0c476f1e5e34845a834956d2be0c4" rel="noopener noreferrer" target="_blank">initially starting with
<code>sanityinc-tomorrow-eighties</code></a>,
but I finally settled on <code>sanityinc-tomorrow-night</code>).</p>
<p>To start with it didn't look too good; not because of a problem with the
theme itself, but because, over time, I'd made changes and tweaks to my
setup that assumed I'd be using my usual light theme. After some dabbling
and tinkering and trying things out, I got it looking "just so".</p>
<p><img alt="Screenshot 2020-06-14 at 19.40.43.png" src="/attachments/2020/06/14/Screenshot 2020-06-14 at 19.40.43.png" /></p>
<p>Having got that working, I then thought it would be nice to be able to have
Emacs -- at least on restart -- adapt to me switching between dark and light
mode on macOS. It turns out that detecting if macOS is in dark mode is easy
enough, the command <code>defaults read -g AppleInterfaceStyle</code> will emit <code>Dark</code>
if in dark mode. So, knowing that, I updated <a href="https://github.com/davep/is-a.el/blob/2b3eb99a213454536d789325f01477e3ce7eec87/is-a.el#L67-L70" rel="noopener noreferrer" target="_blank">my personal package for
checking things about the environment that Emacs is in to use that
information</a>:</p>
<div class="highlight"><pre><span></span><code><span class="p">(</span><span class="k">defconst</span><span class="w"> </span><span class="nv">is-a-macOS-dark-mode-window-p</span>
<span class="w">  </span><span class="p">(</span><span class="k">and</span>
<span class="w">   </span><span class="nv">is-a-macOS-window-p</span>
<span class="w">   </span><span class="p">(</span><span class="nf">string=</span><span class="w"> </span><span class="p">(</span><span class="nv">shell-command-to-string</span><span class="w"> </span><span class="s">&quot;defaults read -g AppleInterfaceStyle&quot;</span><span class="p">)</span><span class="w"> </span><span class="s">&quot;Dark\n&quot;</span><span class="p">))</span>
<span class="w">  </span><span class="s">&quot;Are we running in a macOS window in dark mode?&quot;</span><span class="p">)</span>
</code></pre></div>

<p>So, as of now, my Emacs setup is such that, <a href="https://github.com/davep/.emacs.d/blob/f8389ac8f93b66c614ef82705929b86f01efc130/init.d/init-style.el#L15-L24" rel="noopener noreferrer" target="_blank">if I'm in graphical mode on
macOS and I'm in dark mode, Emacs will use a dark theme, otherwise it'll do
what it did before -- with a light background in a graphical mode and a more
Borland-a-like blue background when in CHUI
mode</a>.</p>
<p>This seems to have made a difference. Almost one week on my work Macbook is
still in dark mode, and I've switched both of my personal Macbooks, and my
iMac, into dark mode too. I think it's sticking this time. Next up is to
give some serious consideration to darkening the web in general. Only now am
I noticing just how damn bright most of it is!</p>
<hr />
<p>As a slight aside to the above, I've also made one other change to Emacs:
I've finally dropped the display of scroll bars. In the themes I'm using
they didn't look so great, appearing to be distracting. For the past 25
years I've had the scrollbars there, but never actually <em>used</em> them; all
they've ever done is serve as a visual aid to where I am in a file. Thing
is, I'm not sure I ever really pay that much attention to that either. So,
as a test, I've also been running with them turned off and, so far, I'm
really not noticing them been gone.</p>
<p>The habits we form that we convince ourselves make sense...</p>
        </div>
        
        <div class="tags">
            
            <a href="/tag/emacs.html" class="tag">Emacs</a>
            
        </div>
        
    </article>
    
    
    
    
    
    
    <nav class="pagination">
        
            
                <a href="/2020/index.html" class="pagination-prev">‚Üê Previous</a>
            
        
        
        <span class="pagination-info">Page 2 of 3</span>
        
        
            <a href="/2020/page/3.html" class="pagination-next">Next ‚Üí</a>
        
    </nav>
    
</div>

            </main>

            <footer>
                <p>Generated with <a href="https://github.com/davep/blogmore" target="_blank" rel="noopener noreferrer">Blogmore</a></p>
            </footer>
        </div>
    </div>
</body>
</html>