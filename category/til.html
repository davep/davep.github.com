<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="blogmore v0.9.0">
    <title>Category: TIL - davep</title>
    
    <link rel="icon" href="/icons/favicon.ico">
    
    
    <!-- Favicon alternatives -->
    <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-touch-icon-120.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-touch-icon-152.png">
    <link rel="apple-touch-icon" sizes="167x167" href="/icons/apple-touch-icon-167.png">
    <!-- Android/Chrome -->
    <link rel="manifest" href="/icons/site.webmanifest">
    <!-- Windows/Edge -->
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-config" content="/icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="/static/style.css">
    
    
<link rel="alternate" type="application/rss+xml" title="davep - TIL - RSS Feed" href="https://blog.davep.org/feeds/til.rss.xml">
<link rel="alternate" type="application/atom+xml" title="davep - TIL - Atom Feed" href="https://blog.davep.org/feeds/til.atom.xml">

    
    <script src="/static/theme.js"></script>
    
</head>
<body>
    <div class="site-container">
        <aside class="sidebar">
            <div class="sidebar-content">
                <div class="sidebar-header">
                    
                    <div class="sidebar-logo">
                        <a href="/">
                            <img src="/davep.jpeg" alt="davep">
                        </a>
                    </div>
                    

                    <div class="sidebar-title">
                        <h1><a href="/">davep</a></h1>
                        
                        <p class="sidebar-subtitle">Code and stuff</p>
                        
                    </div>
                </div>

                
                <div class="sidebar-pages">
                    <ul class="sidebar-links">
                        
                        <li><a href="/about.html">About</a></li>
                        
                        <li><a href="/dotfiles.html">Dot Files</a></li>
                        
                    </ul>
                </div>
                

                
                <section class="sidebar-section">
                    <h2>Links</h2>
                    <ul class="sidebar-links">
                        
                        <li><a href="http://davep.at/" target="_blank" rel="noopener noreferrer">davep@</a></li>
                        
                        <li><a href="https://raindrop.io/davep/public-46742255/sort=-created&amp;perpage=30&amp;page=0" target="_blank" rel="noopener noreferrer">Bookmarks</a></li>
                        
                        <li><a href="https://seenbydavep.blogspot.com/" target="_blank" rel="noopener noreferrer">Photoblog</a></li>
                        
                        <li><a href="https://elisp.dev/" target="_blank" rel="noopener noreferrer">Emacs Packages</a></li>
                        
                        <li><a href="https://pypi.org/user/davepearson/" target="_blank" rel="noopener noreferrer">Python Packages</a></li>
                        
                    </ul>
                </section>
                

                
                <section class="sidebar-section">
                    <h2>Social</h2>
                    <div class="sidebar-socials">
                        
                        <a href="https://www.flickr.com/photos/davepearson/" title="flickr" aria-label="flickr" target="_blank" rel="noopener noreferrer">
                            <i class="fa-brands fa-flickr"></i>
                        </a>
                        
                        <a href="https://github.com/davep" title="github" aria-label="github" target="_blank" rel="noopener noreferrer">
                            <i class="fa-brands fa-github"></i>
                        </a>
                        
                        <a href="https://www.last.fm/user/davepdotorg" title="lastfm" aria-label="lastfm" target="_blank" rel="noopener noreferrer">
                            <i class="fa-brands fa-lastfm"></i>
                        </a>
                        
                        <a href="https://fosstodon.org/@davep" title="mastodon" aria-label="mastodon" target="_blank" rel="noopener noreferrer">
                            <i class="fa-brands fa-mastodon"></i>
                        </a>
                        
                        <a href="https://www.npmjs.com/~davep.org" title="npm" aria-label="npm" target="_blank" rel="noopener noreferrer">
                            <i class="fa-brands fa-npm"></i>
                        </a>
                        
                        <a href="https://steamcommunity.com/id/davepdotorg" title="steam" aria-label="steam" target="_blank" rel="noopener noreferrer">
                            <i class="fa-brands fa-steam"></i>
                        </a>
                        
                        <a href="https://www.youtube.com/user/daveporg" title="youtube" aria-label="youtube" target="_blank" rel="noopener noreferrer">
                            <i class="fa-brands fa-youtube"></i>
                        </a>
                        
                    </div>
                </section>
                
            </div>
        </aside>

        <div class="main-wrapper">
            <header>
                <nav>
                    <ul>
                        <li><a href="/categories.html">Categories</a></li>
                        <li><a href="/tags.html">Tags</a></li>
                        <li><a href="/archive.html">Archive</a></li>
                        
                        <li><a href="/search.html">Search</a></li>
                        
                        
<li><a href="/feeds/til.rss.xml" title="Subscribe to TIL via RSS feed">RSS</a></li>
<li><a href="/feeds/til.atom.xml" title="Subscribe to TIL via Atom feed">Atom</a></li>

                        <li>
                            <button class="theme-toggle" type="button" aria-label="Toggle theme">
                                <span class="icon light-icon">‚òÄÔ∏è</span>
                                <span class="icon dark-icon">üåô</span>
                                <span class="theme-label">Theme</span>
                            </button>
                        </li>
                    </ul>
                </nav>
            </header>

            <main>
                
<div class="category-page">
    <h1>Posts in category "TIL"</h1>
    
    
    
    <article class="post-summary">
        <h2><a href="/2026/01/27/til-uvx-sh.html">TIL - uvx.sh</a></h2>
        
        <time datetime="2026-01-27T16:03:00+00:00"><a href="/2026/">2026</a>-<a href="/2026/01/">01</a>-<a href="/2026/01/27/">27</a> 16:03:00 UTC</time>
        
        <div class="reading-time">1 min read</div>
        <div class="post-content">
            <p>In the past few months, like a lot of folk in the Python world, I've been
won over by <a href="https://docs.astral.sh/uv/" rel="noopener noreferrer" target="_blank"><code>uv</code></a>. When it comes to managing my
own projects my journey over the past few years as been
<a href="https://pipenv.pypa.io/en/latest/" rel="noopener noreferrer" target="_blank"><code>pipenv</code></a>, then
<a href="https://rye.astral.sh" rel="noopener noreferrer" target="_blank"><code>rye</code></a>, and then when rye was killed off I finally
swapped to <code>uv</code> (later than I should have, I realised in hindsight). At each
step I've found each tool cleaner, easier to work with and more
feature-rich.</p>
<p>There's no doubt in my mind that <code>uv</code> has done the most work to make
installing Python-based tools (or at least PyPI-based tools) <a href="https://docs.astral.sh/uv/guides/tools/" rel="noopener noreferrer" target="_blank">as
friction-free an experience as
possible</a>.</p>
<p>Now I've discovered <a href="https://uvx.sh" rel="noopener noreferrer" target="_blank">uvx.sh</a>. The thing with <code>uv</code> is the
person installing your application first needs to get and install <code>uv</code>; this
site removes that friction. Now if someone wants to install
<a href="https://obs2nlm.davep.dev" rel="noopener noreferrer" target="_blank">obs2nlm</a> (for example) they should be able to
just do:</p>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-LsSf<span class="w"> </span>uvx.sh/obs2nlm/install.sh<span class="w"> </span><span class="p">|</span><span class="w"> </span>sh
</code></pre></div>

<p>and away they go (assuming they have <a href="https://curl.se" rel="noopener noreferrer" target="_blank">curl</a> installed,
which is generally going to be far more likely than having <code>uv</code> installed).</p>
<p>Of course, there are <a href="https://www.djm.org.uk/posts/protect-yourself-from-non-obvious-dangers-curl-url-pipe-sh/" rel="noopener noreferrer" target="_blank">the usual caveats and
concerns</a>
about the <em>"just pipe this stuff via <code>sh</code> trust me bro"</em> approach, but if
you are comfortable with suggesting this kind of install method it looks
worth adding this to an application's installation documentation.</p>
<p>I think I'm going to start mentioning it as an option.</p>
        </div>
        
        <div class="tags">
            
            <a href="/tag/python.html" class="tag">Python</a>
            
            <a href="/tag/pypi.html" class="tag">PyPI</a>
            
            <a href="/tag/coding.html" class="tag">coding</a>
            
        </div>
        
    </article>
    
    <article class="post-summary">
        <h2><a href="/2023/07/14/cmd-tab-switcher-on-all-screens.html">Cmd-Tab switcher on all screens</a></h2>
        
        <time datetime="2023-07-14T07:56:00+01:00"><a href="/2023/">2023</a>-<a href="/2023/07/">07</a>-<a href="/2023/07/14/">14</a> 07:56:00 UTC+01:00</time>
        
        <div class="reading-time">2 min read</div>
        <div class="post-content">
            <p>This week, on Monday gone in fact, <a href="https://www.textualize.io/" rel="noopener noreferrer" target="_blank">we</a> moved
office. We've now got a bigger space and, as part of that, bigger desks.
Somewhat (but not entirely) coincidentally the work desk will also convert
into a standing desk<sup id="fnref:72-1"><a class="footnote-ref" href="#fn:72-1">1</a></sup>. Also also... I inherited a second screen for the
desk too. Ever since the days of CRTs and video cards that supported it,
I've been a fan of having at least a couple of screens in front of me, and
now at my work desk I've got 3 (two external displays and the display of the
MacBook Pro itself).</p>
<p>This caused a slight problem though: horizontally there's quite the spread
of things to look at. This is fine, mostly I'm looking at the screen that's
in front of me; the MacBook is to the left and the "second" screen is to the
right, both with "other" stuff on them. In front of me is Emacs and my
browser, which I flip between lots.</p>
<p>The problem is this: the MacBook needs to go to the left (because of
physical layout), which means that despite me setting the screen in front of
me as the "main" screen, the <kbd>Cmd</kbd>-<kbd>Tab</kbd> display (you know
the thing: when you hit <kbd>Cmd</kbd>-<kbd>Tab</kbd> you see the icons of
all your active applications) appears on the left-most display, which is the
MacBook.</p>
<p>Not great. If I'm looking at the right-most display, and want to switch
using the keyboard, I've got to look over to the left, as a worst case. That
makes for a lot of unnecessary head-swivelling.</p>
<p>One quick Google later and <em>Today I Learnt</em> that the following pretty much
solves the problem:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>defaults<span class="w"> </span>write<span class="w"> </span>com.apple.Dock<span class="w"> </span>appswitcher-all-displays<span class="w"> </span>-bool<span class="w"> </span><span class="nb">true</span>
$<span class="w"> </span>killall<span class="w"> </span>Dock
</code></pre></div>

<p>As the name of the setting would suggest: once done, the switcher appears on
<em>all</em> displays.</p>
<p>That's perfect.</p>
<div class="footnote">
<hr />
<ol>
<li id="fn:72-1">
<p>Although the work one is manual hand-cranked, not electronic
button-push goodness like <a href="2023/07/08/new-desk.html">my new one at
home</a>.&#160;<a class="footnote-backref" href="#fnref:72-1" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
</ol>
</div>
        </div>
        
        <div class="tags">
            
            <a href="/tag/apple.html" class="tag">Apple</a>
            
            <a href="/tag/mac.html" class="tag">Mac</a>
            
            <a href="/tag/macos.html" class="tag">macOS</a>
            
            <a href="/tag/work.html" class="tag">Work</a>
            
        </div>
        
    </article>
    
    <article class="post-summary">
        <h2><a href="/2020/07/18/swift-til-12.html">Swift TIL 12</a></h2>
        
        <time datetime="2020-07-18T10:16:00+01:00"><a href="/2020/">2020</a>-<a href="/2020/07/">07</a>-<a href="/2020/07/18/">18</a> 10:16:00 UTC+01:00</time>
        
        <div class="reading-time">2 min read</div>
        <div class="post-content">
            <p>First a small aside: To be honest, the <code>T</code> part of <code>TIL</code> is getting to be
less and less true with this series of posts, but the posts themselves serve
a useful purpose for me. As I've been reading the book I'm working through,
I've also been making notes on my iPad in the <a href="https://apps.apple.com/us/app/notes/id1110145109" rel="noopener noreferrer" target="_blank">Apple Notes
application</a>. I'm not
really convinced that that's the best final location for such notes, so
early on I made an extra step in keeping track of what I'm doing and trying
to reinforce what I'm learning: transfer the notes into
<a href="https://orgmode.org/" rel="noopener noreferrer" target="_blank">Org-Mode</a> documents in my notebook repository.</p>
<p>This repository contains lots of Org-Mode files, broken down into subject
directories, that hang on to longer-form information I want to keep track of
regarding software development and general operating system use. I'm sure
you know the sort of thing, the things where you know you know them but you
can't always retain all the detail -- so having the detail where you know
you'll find it is useful.</p>
<p>So I've made that part of the process: read book, find thing worth noting,
note in Apple Notes, a wee while later re-read and test out by writing
sample code and transfer to the Org-Mode notebook. During that latter step I
sometimes also write up something that I really liked or found interesting
here to further reinforce the learning process.</p>
<p>The "TIL" I wanted to note quickly today is how happy I was to see that
Swift has something that's a reasonably recent addition to Emacs Lisp:
conditional binding. Skipping off into Emacs Lisp for a moment, it would be
very common for me to find myself writing something like this (this actually
happens in all languages really):</p>
<div class="highlight"><pre><span></span><code><span class="p">(</span><span class="k">let</span><span class="w"> </span><span class="p">((</span><span class="nv">foo</span><span class="w"> </span><span class="p">(</span><span class="nv">get-something-from-elsewhere</span><span class="p">)))</span>
<span class="w">  </span><span class="p">(</span><span class="nb">when</span><span class="w"> </span><span class="nv">foo</span>
<span class="w">    </span><span class="p">(</span><span class="nv">do-something-with</span><span class="w"> </span><span class="nv">foo</span><span class="p">)))</span>
</code></pre></div>

<p>Quite simply: I'd get a value from elsewhere, that value could possibly be
<code>nil</code> to mark that there was a failure to get a value, but that failure
wasn't in any way fatal or even a problem worthy of note: I just needed to
skip along. But that binding followed by the test was always a little
jarring. And then, <a href="https://endlessparentheses.com/new-in-emacs-25-1-more-flow-control-macros.html" rel="noopener noreferrer" target="_blank">back in
25.1</a>,
<code>if-let</code> and <code>when-let</code> got added (of course, this being Lisp, <a href="https://www.gnu.org/software/emacs/manual/html_node/elisp/Macros.html#Macros" rel="noopener noreferrer" target="_blank">it would
have been very simple to add them
anyway</a>),
and it was easier to <a href="https://github.com/davep/pinboard.el/blob/d426f9d2ebec5f907c8a89d6b38ccbcb13750d4f/pinboard.el#L308" rel="noopener noreferrer" target="_blank">write the code so it looked just a little
nicer</a>:</p>
<div class="highlight"><pre><span></span><code><span class="p">(</span><span class="nv">when-let</span><span class="w"> </span><span class="p">((</span><span class="nv">foo</span><span class="w"> </span><span class="p">(</span><span class="nv">get-something-from-elsewhere</span><span class="p">)))</span>
<span class="w">  </span><span class="p">(</span><span class="nv">do-something-with</span><span class="w"> </span><span class="nv">foo</span><span class="p">))</span>
</code></pre></div>

<p>It's a small difference, but I find it a pleasing one.</p>
<p>So of course I was pleased to find that Swift has something similar with
<code>if</code> and
<a href="https://developer.apple.com/documentation/swift/optional" rel="noopener noreferrer" target="_blank"><code>Optional</code></a>
values, where you can write something like:</p>
<div class="highlight"><pre><span></span><code><span class="k">if</span><span class="w"> </span><span class="kd">let</span><span class="w"> </span><span class="nv">foo</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">getSomethingFromElsewhere</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Do something with foo but only if it&#39;s not nil</span>
<span class="p">}</span>
</code></pre></div>

<p>Which means you can do things like this (not that I'd really do things like
this, but it was a handy test on the command line):</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="nf">oddRand</span><span class="p">()</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">Int</span><span class="p">?</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nv">n</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">Int</span><span class="p">.</span><span class="n">random</span><span class="p">(</span><span class="w"> </span><span class="k">in</span><span class="p">:</span><span class="w"> </span><span class="mf">0.</span><span class="p">..</span><span class="mi">99</span><span class="w"> </span><span class="p">)</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kc">nil</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">n</span>
<span class="p">}</span>

<span class="k">for</span><span class="w"> </span><span class="kc">_</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mf">0.</span><span class="p">..</span><span class="mi">10</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="kd">let</span><span class="w"> </span><span class="nv">n</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">oddRand</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="bp">print</span><span class="p">(</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="bp">print</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Nope&quot;</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>As usual... of course that's horrible code, it was just thrown together to
test/experience the language feature on the command line.</p>
<p>I like it though. I figure <a href="https://clojuredocs.org/clojure.core/when-let" rel="noopener noreferrer" target="_blank">all the best languages have conditional
binding</a>. ;-)</p>
        </div>
        
        <div class="tags">
            
            <a href="/tag/swift.html" class="tag">Swift</a>
            
            <a href="/tag/apple.html" class="tag">Apple</a>
            
        </div>
        
    </article>
    
    <article class="post-summary">
        <h2><a href="/2020/07/11/swift-til-11.html">Swift TIL 11</a></h2>
        
        <time datetime="2020-07-11T21:34:00+01:00"><a href="/2020/">2020</a>-<a href="/2020/07/">07</a>-<a href="/2020/07/11/">11</a> 21:34:00 UTC+01:00</time>
        
        <div class="reading-time">2 min read</div>
        <div class="post-content">
            <p>This is one of those things, especially this little play to help appreciate
the feature, that I'm filing under "kinda cool, but I am <em>never</em> doing this
in production".</p>
<p>So Swift has operator overriding, and then some. Moreover, operators are, in
effect, functions, just with some extra syntax support. None of this is new
to me, I've worked in and with other languages that have this ability,
expect... I don't ever recall working in a language that, at the time I did,
supported creating brand new operators (okay, fine, Lisp is a bit of an
outlier here and there's all sorts of fun conversations to be had there --
but still, let's stick with more "conventional" syntax here). Support always
seemed to be about extending the ability of an existing operator.</p>
<p>Swift though... yeah, you get to pick from a huge character space when it
comes to creating operators.</p>
<p>Which got me thinking... How cool would it be to have a prefix operator that
turns a floating point number into a currency-friendly number (you know, the
sort of number type that can be used for currency-friendly calculations).</p>
<p>Swift has the
<a href="https://developer.apple.com/documentation/foundation/decimal" rel="noopener noreferrer" target="_blank"><code>decimal</code></a>
type which, at first glance anyway, looks to be a sensible candidate; even
if it isn't (and, really, how to actually sensibly handle currency is a
whole series of blog posts in their own right, that I have no wish to write
myself because such things are a previous working life for me, and other
people have doubtless done a very comprehensive job elsewhere over the
years) it will serve as a good stand-in for the little bit of horror I'm
going to write next.</p>
<p>So... Let's say we want to use <code>¬£</code> as a prefix operator to say "see this
number? make it a <code>decimal</code>", we could do something as simple as this:</p>
<div class="highlight"><pre><span></span><code><span class="kd">import</span><span class="w"> </span><span class="nc">Foundation</span>

<span class="kr">prefix</span><span class="w"> </span><span class="kd">operator</span><span class="w"> </span><span class="err">¬£</span>
<span class="kr">prefix</span><span class="w"> </span><span class="kd">func</span><span class="w"> </span><span class="err">¬£</span><span class="p">(</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Decimal</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="n">Decimal</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="p">}</span>

<span class="bp">print</span><span class="p">(</span><span class="w"> </span><span class="err">¬£</span><span class="mf">1.20</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="err">¬£</span><span class="mf">0.75</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="err">¬£</span><span class="mf">0.01</span><span class="w"> </span><span class="p">)</span>
</code></pre></div>

<p>Horrifically and delightfully, it works:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>swift<span class="w"> </span>run
<span class="o">[</span><span class="m">3</span>/3<span class="o">]</span><span class="w"> </span>Linking<span class="w"> </span>opover
<span class="m">1</span>.96
</code></pre></div>

<p>I know, I know, I feel bad for even trying. But it's also kinda cool that
the language has this.</p>
<p>It gets better though...</p>
<p>While reading up on what characters can and can't be used as operators, one
thing that stood out was the fact that, more or less, any character that
isn't a valid identifier can be used as an operator. So... hang on, we can
use "emoji" as identifiers?</p>
<p>Like this?</p>
<div class="highlight"><pre><span></span><code><span class="kd">import</span><span class="w"> </span><span class="nc">Foundation</span>

<span class="kr">prefix</span><span class="w"> </span><span class="kd">operator</span><span class="w"> </span><span class="err">¬£</span>
<span class="kr">prefix</span><span class="w"> </span><span class="kd">func</span><span class="w"> </span><span class="err">¬£</span><span class="p">(</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Decimal</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="n">Decimal</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="p">}</span>

<span class="kd">let</span><span class="w"> </span><span class="err">üíµ</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="err">¬£</span><span class="mf">1.20</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="err">¬£</span><span class="mf">0.75</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="err">¬£</span><span class="mf">0.01</span>

<span class="bp">print</span><span class="p">(</span><span class="w"> </span><span class="err">üíµ</span><span class="w"> </span><span class="p">)</span>
</code></pre></div>

<p>Why yes. Yes we can. üòà</p>
        </div>
        
        <div class="tags">
            
            <a href="/tag/swift.html" class="tag">Swift</a>
            
            <a href="/tag/apple.html" class="tag">Apple</a>
            
        </div>
        
    </article>
    
    <article class="post-summary">
        <h2><a href="/2020/07/05/swift-til-10.html">Swift TIL 10</a></h2>
        
        <time datetime="2020-07-05T15:27:00+01:00"><a href="/2020/">2020</a>-<a href="/2020/07/">07</a>-<a href="/2020/07/05/">05</a> 15:27:00 UTC+01:00</time>
        
        <div class="reading-time">2 min read</div>
        <div class="post-content">
            <p>My leisurely journey into getting to know Swift by reading and then making
notes to myself in my blog continues, and this weekend I encountered
<code>defer</code>. As I was reading about Swift I did keep wondering when something
like <code>try</code> (it has <code>try</code>), <code>catch</code> (it has <code>catch</code>) and <code>finally</code> (it
doesn't have <code>finally</code>, but...) might crop up. This weekend I hit the part
of the book that covered this sort of thing.</p>
<p>Given Swift's apparent general reliance on <em>not</em> throwing errors but instead
using <code>Optional</code> and <code>nil</code> to signify issues, it sort of came as no surprise
that its approach to implementing something like <code>try</code>...<code>finally</code> is
actually divorced from <code>try</code>. I'm not sure how I feel about it yet, but
<code>defer</code> makes sense.</p>
<p>Here's an utterly useless bit of code that demonstrates how it works:</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="nf">add</span><span class="p">(</span><span class="w"> </span><span class="kc">_</span><span class="w"> </span><span class="n">n1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nb">Int</span><span class="p">,</span><span class="w"> </span><span class="kc">_</span><span class="w"> </span><span class="n">n2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nb">Int</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">Int</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="k">defer</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="bp">print</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Huh! We did some adding!&quot;</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="bp">print</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;About to do the add and then return&quot;</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">n1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">n2</span>
<span class="p">}</span>

<span class="bp">print</span><span class="p">(</span><span class="w"> </span><span class="n">add</span><span class="p">(</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">)</span>
</code></pre></div>

<p>When run, the output is this:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>swift<span class="w"> </span>run
<span class="o">[</span><span class="m">3</span>/3<span class="o">]</span><span class="w"> </span>Linking<span class="w"> </span>try-defer
About<span class="w"> </span>to<span class="w"> </span><span class="k">do</span><span class="w"> </span>the<span class="w"> </span>add<span class="w"> </span>and<span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="k">return</span>
Huh!<span class="w"> </span>We<span class="w"> </span>did<span class="w"> </span>some<span class="w"> </span>adding!
<span class="m">4</span>
</code></pre></div>

<p>A <code>defer</code> (and there can be multiple) is tied to the block that it's
declared in, and is executed when the block exits. This is, of course, going
to be really handy for things like resource-management where you don't want
to be leaking something, although I can imagine a few other uses too (none
of which are really going to be novel for someone who's coded in other
languages with similar constructs).</p>
<p>What I find interesting about this is that one or more <code>defer</code> blocks can be
declared at various locations within a block of code; this obviously makes
sense in that you might not want to be handling the tidy-up of something
you've not got around to creating yet. But there's also part of me feels
uneasy about the "exit" code being declared further up the body of code,
rather than down towards the end. On the other hand I think I do appreciate
the idea of, up front, writing "look, any time there's a GTFO in the code
that follows, this will happen" -- you're made aware pretty quickly of what
to expect.</p>
<p>Anyway, it's good to know Swift has something similar to a <code>finally</code>.</p>
        </div>
        
        <div class="tags">
            
            <a href="/tag/swift.html" class="tag">Swift</a>
            
            <a href="/tag/apple.html" class="tag">Apple</a>
            
        </div>
        
    </article>
    
    <article class="post-summary">
        <h2><a href="/2020/06/30/swift-til-9.html">Swift TIL 9</a></h2>
        
        <time datetime="2020-06-30T21:02:00+01:00"><a href="/2020/">2020</a>-<a href="/2020/06/">06</a>-<a href="/2020/06/30/">30</a> 21:02:00 UTC+01:00</time>
        
        <div class="reading-time">2 min read</div>
        <div class="post-content">
            <p><em>Some may be happy to know that the frequency of these little notes to
myself may reduce real soon, as I'm sort of caught up with my notes, mostly,
and I'm unlikely to pick up the book that I'm reading for a couple or so
days now</em></p>
<p>I'm used to the idea of structures and classes from other languages, going
way back, but as I first started reading about Swift it wasn't obvious to me
why it had them both too. At first glance they appeared to be very similar.
It was only as I got a little further into reading that I found out one huge
difference (there are others, that pretty much stem from this one): objects
created from classes are <em>reference types</em> (which you'd expect, of course),
structures on the other hand are <em>value types</em>.</p>
<p>A quick illustration of the difference, in my head anyway, can be found if I
go back to <a href="/2020/06/24/swift-til-3.html">using an
observer</a>.
Take this daft bit of illustrative code for example:</p>
<div class="highlight"><pre><span></span><code><span class="kd">class</span><span class="w"> </span><span class="nc">Person</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nv">name</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;No name&quot;</span>
<span class="p">}</span>

<span class="kd">var</span><span class="w"> </span><span class="nv">dave</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">Person</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kr">didSet</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="bp">print</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;dave was set&quot;</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="n">dave</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;Dave&quot;</span>
</code></pre></div>

<p>If I run that, I get no output. That makes sense. The variable <code>dave</code> is
initialised to an instance of a <code>Person</code> but is never subsequently set to
anything else. The following assignment is to a property of the object.
We're working on a reference to an existing object.</p>
<p>But simply change <code>Person</code> to being a <code>struct</code>:</p>
<div class="highlight"><pre><span></span><code><span class="kd">struct</span><span class="w"> </span><span class="nc">Person</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nv">name</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;No name&quot;</span>
<span class="p">}</span>

<span class="kd">var</span><span class="w"> </span><span class="nv">dave</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">Person</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kr">didSet</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="bp">print</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;dave was set&quot;</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="n">dave</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;Dave&quot;</span>
</code></pre></div>

<p>and the output looks like this:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>swift<span class="w"> </span>run
<span class="o">[</span><span class="m">3</span>/3<span class="o">]</span><span class="w"> </span>Linking<span class="w"> </span>ref-vs-val
dave<span class="w"> </span>was<span class="w"> </span><span class="nb">set</span>
</code></pre></div>

<p>That's because the assignment to <code>dave.name</code> means a new value is created.</p>
<p>This, of course, is just the tip of the iceberg; there are all sorts of
other things to keep in mind that follow on from this, generally relating to
mutability (or the lack thereof). I also imagine this means that, when
there's no obvious benefit either way, the choice of using <code>class</code> vs
<code>struct</code> is something that could have performance implications. That's
something for me to look into more another day; but this is a note here to
myself that it's a thing to keep in mind.</p>
        </div>
        
        <div class="tags">
            
            <a href="/tag/swift.html" class="tag">Swift</a>
            
            <a href="/tag/apple.html" class="tag">Apple</a>
            
        </div>
        
    </article>
    
    <article class="post-summary">
        <h2><a href="/2020/06/29/swift-til-8.html">Swift TIL 8</a></h2>
        
        <time datetime="2020-06-29T22:48:00+01:00"><a href="/2020/">2020</a>-<a href="/2020/06/">06</a>-<a href="/2020/06/29/">29</a> 22:48:00 UTC+01:00</time>
        
        <div class="reading-time">2 min read</div>
        <div class="post-content">
            <p>Although I read up on it a few days back, it was only this evening that I
fired up Emacs (well of course I'm testing Swift with Emacs, what did you
think I'd do?!?) and dabbled with some code to really get a feel for how
casting works in Swift.</p>
<p>Swift seems to be one of those languages that does it with a keyword rather
than a non-keyword approach. The two main keywords being <code>as?</code> and <code>as!</code>. I
kind of like how there's a polite version and a bossy version. Having the
two makes a lot of sense from what I read too.</p>
<p>To try and illustrate my understanding so far (and do keep in mind I'm not
writing this with the express purpose of explaining it to anyone else -- I'm
writing this to try and retain it all in my head by working through it),
here's a bit of utterly pointless and highly-contrived code that defines
three classes in a fairly ordinary hierarchy:</p>
<div class="highlight"><pre><span></span><code><span class="kd">class</span><span class="w"> </span><span class="nc">Animal</span><span class="w"> </span><span class="p">{}</span>

<span class="kd">class</span><span class="w"> </span><span class="nc">Dog</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Animal</span><span class="w"> </span><span class="p">{}</span>

<span class="kd">class</span><span class="w"> </span><span class="nc">Cat</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Animal</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">func</span><span class="w"> </span><span class="nf">beAdorable</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="bp">print</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Purrrrrr!&quot;</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>So, so far, so good: we have animals, we have dogs which are a kind of
animal, and we have cats, which are also a kind of animal, but they have the
special ability of actually being adorable. üòº</p>
<p>Now, for the purposes of just testing all of this out, here's a horrible
function that makes little sense other than for testing:</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="nf">adore</span><span class="p">(</span><span class="w"> </span><span class="kc">_</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Animal</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">(</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">as</span><span class="p">!</span><span class="w"> </span><span class="n">Cat</span><span class="w"> </span><span class="p">).</span><span class="n">beAdorable</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div>

<p>Given an animal, it forces it to be a cat (by casting it with <code>as!</code>), and
then asks it to be adorable (because, of course, cats always do as they're
asked).</p>
<p>So, if we then had:</p>
<div class="highlight"><pre><span></span><code><span class="n">adore</span><span class="p">(</span><span class="w"> </span><span class="n">Cat</span><span class="p">()</span><span class="w"> </span><span class="p">)</span>
</code></pre></div>

<p>we'd get what we expect when run:</p>
<div class="highlight"><pre><span></span><code>Purrrrrr!
</code></pre></div>

<p>So far so good. But what about:</p>
<div class="highlight"><pre><span></span><code><span class="n">adore</span><span class="p">(</span><span class="w"> </span><span class="n">Dog</span><span class="p">()</span><span class="w"> </span><span class="p">)</span>
</code></pre></div>

<p>Yeah, that's not so good:</p>
<div class="highlight"><pre><span></span><code>~/d/p/s/casting$<span class="w"> </span>swift<span class="w"> </span>run
<span class="o">[</span><span class="m">3</span>/3<span class="o">]</span><span class="w"> </span>Linking<span class="w"> </span>casting
Could<span class="w"> </span>not<span class="w"> </span>cast<span class="w"> </span>value<span class="w"> </span>of<span class="w"> </span><span class="nb">type</span><span class="w"> </span><span class="s1">&#39;casting.Dog&#39;</span><span class="w"> </span><span class="o">(</span>0x10a1f8830<span class="o">)</span><span class="w"> </span>to<span class="w"> </span><span class="s1">&#39;casting.Cat&#39;</span><span class="w"> </span><span class="o">(</span>0x10a1f88c0<span class="o">)</span>.
fish:<span class="w"> </span><span class="s1">&#39;swift run&#39;</span><span class="w"> </span>terminated<span class="w"> </span>by<span class="w"> </span>signal<span class="w"> </span>SIGABRT<span class="w"> </span><span class="o">(</span>Abort<span class="o">)</span>
</code></pre></div>

<p>One way around this would be to use <code>as?</code>, which has the effect of casting
the result to an
<a href="https://developer.apple.com/documentation/swift/optional" rel="noopener noreferrer" target="_blank"><code>Optional</code></a>. This
means I can re-write the <code>adore</code> function like this:</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="nf">adore</span><span class="p">(</span><span class="w"> </span><span class="kc">_</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Animal</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">(</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">as</span><span class="p">?</span><span class="w"> </span><span class="n">Cat</span><span class="w"> </span><span class="p">)?.</span><span class="n">beAdorable</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div>

<p>Now, if <code>a</code> can be cast to a <code>Cat</code>, you get an optional that wraps the
<code>Cat</code>, otherwise you get an optional that wraps <code>nil</code> (hence the second <code>?</code>
before attempting to call the <code>beAdorable</code> member function).</p>
<p>So now, if I run the problematic dog call above again:</p>
<div class="highlight"><pre><span></span><code>~/d/p/s/casting$<span class="w"> </span>swift<span class="w"> </span>run
<span class="o">[</span><span class="m">3</span>/3<span class="o">]</span><span class="w"> </span>Linking<span class="w"> </span>casting
</code></pre></div>

<p>In other words, no output at all. Which is the idea here.</p>
<p>I think I like this, I think it makes sense, and I think I can see why both
<code>as!</code> and <code>as?</code> exist. The latter also means, of course, that you can do
something like:</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="nf">adore</span><span class="p">(</span><span class="w"> </span><span class="kc">_</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Animal</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nv">cat</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">as</span><span class="p">?</span><span class="w"> </span><span class="n">Cat</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">cat</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">cat</span><span class="p">!.</span><span class="n">beAdorable</span><span class="p">()</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="bp">print</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;That totally wasn&#39;t a cat&quot;</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>which, in the messy dog call again, now results in:</p>
<div class="highlight"><pre><span></span><code>~/d/p/s/casting$<span class="w"> </span>swift<span class="w"> </span>run
<span class="o">[</span><span class="m">3</span>/3<span class="o">]</span><span class="w"> </span>Linking<span class="w"> </span>casting
That<span class="w"> </span>totally<span class="w"> </span>wasn<span class="err">&#39;</span>t<span class="w"> </span>a<span class="w"> </span>cat
</code></pre></div>

<p>Or, of course, the same effect could be had with:</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="nf">adore</span><span class="p">(</span><span class="w"> </span><span class="kc">_</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Animal</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">Cat</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">(</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">as</span><span class="p">!</span><span class="w"> </span><span class="n">Cat</span><span class="w"> </span><span class="p">).</span><span class="n">beAdorable</span><span class="p">()</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="bp">print</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;That totally wasn&#39;t a cat&quot;</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>It should be stressed, of course, that the example code is terrible design,
so given the above I'd ensure I never end up in this sort of situation in
the first place. But for the purposes of writing and compiling and running
code and seeing what the different situations result in, it helped.</p>
        </div>
        
        <div class="tags">
            
            <a href="/tag/swift.html" class="tag">Swift</a>
            
            <a href="/tag/apple.html" class="tag">Apple</a>
            
        </div>
        
    </article>
    
    <article class="post-summary">
        <h2><a href="/2020/06/28/swift-til-7.html">Swift TIL 7</a></h2>
        
        <time datetime="2020-06-28T16:25:00+01:00"><a href="/2020/">2020</a>-<a href="/2020/06/">06</a>-<a href="/2020/06/28/">28</a> 16:25:00 UTC+01:00</time>
        
        <div class="reading-time">1 min read</div>
        <div class="post-content">
            <p>This post is <em>very</em> much a case of me writing it down to try and get it all
straight in my head, and to make sure it sticks. The other day I was reading
about Swift's types and type-equality checks, and as I'd expect from plenty
of other languages I've worked with, there's a way for checking that two
types are the same, such that super/subclasses aren't taken into account,
and a way where they are. So, given this silly code:</p>
<div class="highlight"><pre><span></span><code><span class="kd">class</span><span class="w"> </span><span class="nc">Animal</span><span class="w"> </span><span class="p">{}</span>

<span class="kd">class</span><span class="w"> </span><span class="nc">Cat</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Animal</span><span class="w"> </span><span class="p">{}</span>

<span class="bp">print</span><span class="p">(</span><span class="w"> </span><span class="n">Cat</span><span class="p">.</span><span class="kc">self</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="n">Animal</span><span class="p">.</span><span class="kc">self</span><span class="w"> </span><span class="p">)</span><span class="w">          </span><span class="c1">// False</span>
<span class="bp">print</span><span class="p">(</span><span class="w"> </span><span class="n">Cat</span><span class="p">.</span><span class="kc">self</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">Animal</span><span class="p">.</span><span class="kr">Type</span><span class="w"> </span><span class="p">)</span><span class="w">          </span><span class="c1">// True</span>
<span class="bp">print</span><span class="p">(</span><span class="w"> </span><span class="n">type</span><span class="p">(</span><span class="w"> </span><span class="n">of</span><span class="p">:</span><span class="w"> </span><span class="n">Cat</span><span class="p">()</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">Animal</span><span class="p">.</span><span class="kr">Type</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="c1">// True</span>
</code></pre></div>

<p>it's made clear that <code>==</code> checks for strict equality and a super/subclass
relationship isn't taken into account. On the other hand <code>is</code> does take it
into account.</p>
<p>Only... what's with this whole <code>.self</code> sometimes and <code>.Type</code> other times
business? That took a little bit of writing code and playing to get
comfortable with. Here's how I understand it now (and do feel free to
correct me below if I'm way off):</p>
<p>Given the above code, <code>Animal.Type</code> is the type of a value that expresses
the type of <code>Animal</code>. On the other hand, <code>Animal.self</code> is a value that is
the type of an <code>Animal</code>. Yeah, I know, that still reads oddly. But written
as code:</p>
<div class="highlight"><pre><span></span><code><span class="kd">let</span><span class="w"> </span><span class="nv">feline</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Cat</span><span class="p">.</span><span class="kr">Type</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">Cat</span><span class="p">.</span><span class="kc">self</span>
</code></pre></div>

<p>I think it makes a lot more sense. And having got there I felt I better
understood it. I'm not 100% sure I'm 100% with it, but I'm getting there.</p>
        </div>
        
        <div class="tags">
            
            <a href="/tag/swift.html" class="tag">Swift</a>
            
            <a href="/tag/apple.html" class="tag">Apple</a>
            
        </div>
        
    </article>
    
    <article class="post-summary">
        <h2><a href="/2020/06/27/swift-til-6.html">Swift TIL 6</a></h2>
        
        <time datetime="2020-06-27T21:23:00+01:00"><a href="/2020/">2020</a>-<a href="/2020/06/">06</a>-<a href="/2020/06/27/">27</a> 21:23:00 UTC+01:00</time>
        
        <div class="reading-time">1 min read</div>
        <div class="post-content">
            <p>I'm going to file this one under "it seems really unnecessary, but it's also
kinda cool". While reading up about
<a href="https://docs.swift.org/swift-book/LanguageGuide/Protocols.html" rel="noopener noreferrer" target="_blank">protocols</a>
the book I'm reading introduced the <code>ExpressibleBy*Literal</code> protocols, where
the <code>*</code> is one of a number of obvious literals. For example:
<code>ExpressibleByStringLiteral</code>. As you might imagine, it lets you create a
class that can be initialised with a literal value, as opposed to needing to
appear to call the constructor for a class.</p>
<p>So, for a silly example:</p>
<div class="highlight"><pre><span></span><code><span class="kd">class</span><span class="w"> </span><span class="nc">Hello</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">ExpressibleByStringLiteral</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">let</span><span class="w"> </span><span class="nv">what</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nb">String</span>

<span class="w">    </span><span class="kr">required</span><span class="w"> </span><span class="kd">init</span><span class="p">(</span><span class="w"> </span><span class="n">stringLiteral</span><span class="w"> </span><span class="n">what</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kc">self</span><span class="p">.</span><span class="n">what</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">what</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">func</span><span class="w"> </span><span class="nf">say</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="bp">print</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Hello, </span><span class="si">\(</span><span class="kc">self</span><span class="p">.</span><span class="n">what</span><span class="si">)</span><span class="s">!&quot;</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>You could, of course, write this:</p>
<div class="highlight"><pre><span></span><code><span class="kd">let</span><span class="w"> </span><span class="nv">v1</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">Hello</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;world&quot;</span><span class="w"> </span><span class="p">)</span>
<span class="n">v1</span><span class="p">.</span><span class="n">say</span><span class="p">()</span>
</code></pre></div>

<p>but because of <code>ExpressibleByStringLiteral</code> you can also write:</p>
<div class="highlight"><pre><span></span><code><span class="kd">let</span><span class="w"> </span><span class="nv">v2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Hello</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;universe&quot;</span>
<span class="n">v2</span><span class="p">.</span><span class="n">say</span><span class="p">()</span>
</code></pre></div>

<p>Now, sure, in this case it saves you nothing, but this does also mean that
parameters of functions whose type uses one of the <code>`ExpressibleBy*Literal</code>
protocols can be passed a literal, rather than a "long-hand" instantiated
object. For example:</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="nf">Greet</span><span class="p">(</span><span class="w"> </span><span class="kc">_</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Hello</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">h</span><span class="p">.</span><span class="n">say</span><span class="p">()</span>
<span class="p">}</span>

<span class="n">Greet</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;davep&quot;</span><span class="w"> </span><span class="p">)</span>
</code></pre></div>

<p>I can see that being quite handy.</p>
        </div>
        
        <div class="tags">
            
            <a href="/tag/swift.html" class="tag">Swift</a>
            
            <a href="/tag/apple.html" class="tag">Apple</a>
            
        </div>
        
    </article>
    
    <article class="post-summary">
        <h2><a href="/2020/06/26/switch-til-5.html">Swift TIL 5</a></h2>
        
        <time datetime="2020-06-26T15:44:00+01:00"><a href="/2020/">2020</a>-<a href="/2020/06/">06</a>-<a href="/2020/06/26/">26</a> 15:44:00 UTC+01:00</time>
        
        <div class="reading-time">1 min read</div>
        <div class="post-content">
            <p>I'm going to file this one under "it makes perfect sense, but I don't think
it aids in making the code readable" -- something which I'm finding is a bit
of a theme with Swift.</p>
<p>In Swift <code>self</code> gets used and gets used in a way you'd expect from many
other languages. So far so good. But, it seems, <code>Self</code> is also a thing too,
and it's different from <code>self</code>. Whereas <code>self</code> is the current instance,
<code>Self</code> is the current type. So consider this:</p>
<div class="highlight"><pre><span></span><code><span class="kd">class</span><span class="w"> </span><span class="nc">Greeting</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">class</span><span class="w"> </span><span class="nc">func</span><span class="w"> </span><span class="n">message</span><span class="p">()</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">String</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s">&quot;Ayup!&quot;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">func</span><span class="w"> </span><span class="nf">message</span><span class="p">()</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">String</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s">&quot;Well hello there&quot;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">func</span><span class="w"> </span><span class="nf">emit</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="bp">print</span><span class="p">(</span><span class="w"> </span><span class="kc">Self</span><span class="p">.</span><span class="n">message</span><span class="p">()</span><span class="w"> </span><span class="p">)</span>
<span class="w">        </span><span class="bp">print</span><span class="p">(</span><span class="w"> </span><span class="kc">self</span><span class="p">.</span><span class="n">message</span><span class="p">()</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="n">Greeting</span><span class="p">().</span><span class="n">emit</span><span class="p">()</span>
</code></pre></div>

<p>When run, the output is:</p>
<div class="highlight"><pre><span></span><code>Ayup!
Well hello there
</code></pre></div>

<p>It makes sense that that's the case. I actually really like the ability to
use <code>Self</code> rather than having to use <code>Greeting</code>, but damn that's really
setting things up for either mistyping or misreading code. You're going to
want to hope that your development environment makes it super obvious what's
a value and what's a type when it comes to using font choices.</p>
        </div>
        
        <div class="tags">
            
            <a href="/tag/swift.html" class="tag">Swift</a>
            
            <a href="/tag/apple.html" class="tag">Apple</a>
            
        </div>
        
    </article>
    
    
    
    
    <nav class="pagination">
        
        
        <span class="pagination-info">Page 1 of 2</span>
        
        
            <a href="/category/til/2.html" class="pagination-next">Next ‚Üí</a>
        
    </nav>
    
</div>

            </main>

            <footer>
                <p>Generated with <a href="https://github.com/davep/blogmore" target="_blank" rel="noopener noreferrer">Blogmore</a></p>
            </footer>
        </div>
    </div>
</body>
</html>