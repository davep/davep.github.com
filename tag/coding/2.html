<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="blogmore v1.3.0">
    <link rel="canonical" href="https://blog.davep.org/tag/coding/2.html">
    <title>Tag: coding - davep</title>
    
    <link rel="icon" href="/icons/favicon.ico">
    
    
    <!-- Shortcut icon for backward compatibility -->
    <link rel="shortcut icon" href="/favicon.ico">
    <!-- Favicon alternatives -->
    <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-touch-icon-120.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-touch-icon-152.png">
    <link rel="apple-touch-icon" sizes="167x167" href="/icons/apple-touch-icon-167.png">
    <!-- Android/Chrome -->
    <link rel="manifest" href="/icons/site.webmanifest">
    <!-- Windows/Edge -->
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-config" content="/icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    
    
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/webfonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin="anonymous">
    <link rel="stylesheet" href="/static/fontawesome.css">
    
    <link rel="stylesheet" href="/static/styles.min.css">
    
    
    <link rel="alternate" type="application/rss+xml" title="davep - RSS Feed" href="https://blog.davep.org/feed.xml">
    <link rel="alternate" type="application/atom+xml" title="davep - Atom Feed" href="https://blog.davep.org/feeds/all.atom.xml">
    
    
    
    <meta name="author" content="Dave Pearson">
    
    
    
<meta property="og:title" content="Tag: coding - davep">

<meta name="description" content="Dave Pearson&#39;s personal blog">
<meta property="og:description" content="Dave Pearson&#39;s personal blog">
<meta name="twitter:description" content="Dave Pearson&#39;s personal blog">


<meta name="keywords" content="Emacs, Python, Programming, Terminal, Textual">


    <script src="/static/theme.min.js"></script>
    <link rel="prev" href="/tag/coding.html">
    <link rel="next" href="/tag/coding/3.html">
    
</head>
<body>
    <div class="site-container">
        <aside class="sidebar">
            <div class="sidebar-content">
                <div class="sidebar-header">
                    
                    <div class="sidebar-logo">
                        <a href="/">
                            <img src="/logo.jpeg" alt="davep">
                        </a>
                    </div>
                    

                    <div class="sidebar-title">
                        <h1><a href="/">davep</a></h1>
                        
                        <p class="sidebar-subtitle">Code and stuff</p>
                        
                    </div>
                </div>

                
                <div class="sidebar-pages">
                    <ul class="sidebar-links">
                        
                        <li><a href="/about.html">About</a></li>
                        
                        <li><a href="/dotfiles.html">Dot Files</a></li>
                        
                    </ul>
                </div>
                

                
                <section class="sidebar-section">
                    <h2>Links</h2>
                    <ul class="sidebar-links">
                        
                        <li><a href="https://davep.at/" target="_blank" rel="noopener noreferrer">davep@</a></li>
                        
                        <li><a href="https://raindrop.io/davep/public-46742255/sort=-created&amp;perpage=30&amp;page=0" target="_blank" rel="noopener noreferrer">Bookmarks</a></li>
                        
                        <li><a href="https://seenbydavep.blogspot.com/" target="_blank" rel="noopener noreferrer">Photoblog</a></li>
                        
                        <li><a href="https://elisp.dev/" target="_blank" rel="noopener noreferrer">Emacs Packages</a></li>
                        
                        <li><a href="https://pypi.org/user/davepearson/" target="_blank" rel="noopener noreferrer">Python Packages</a></li>
                        
                    </ul>
                </section>
                

                
                <section class="sidebar-section">
                    <h2>Social</h2>
                    <div class="sidebar-socials">
                        
                        <a href="https://www.flickr.com/photos/davepearson/" title="flickr" aria-label="flickr" target="_blank" rel="noopener noreferrer">
                            <i class="fa-brands fa-flickr"></i>
                        </a>
                        
                        <a href="https://github.com/davep" title="github" aria-label="github" target="_blank" rel="noopener noreferrer">
                            <i class="fa-brands fa-github"></i>
                        </a>
                        
                        <a href="https://www.last.fm/user/davepdotorg" title="lastfm" aria-label="lastfm" target="_blank" rel="noopener noreferrer">
                            <i class="fa-brands fa-lastfm"></i>
                        </a>
                        
                        <a href="https://fosstodon.org/@davep" title="mastodon" aria-label="mastodon" target="_blank" rel="noopener noreferrer">
                            <i class="fa-brands fa-mastodon"></i>
                        </a>
                        
                        <a href="https://www.npmjs.com/~davep.org" title="npm" aria-label="npm" target="_blank" rel="noopener noreferrer">
                            <i class="fa-brands fa-npm"></i>
                        </a>
                        
                        <a href="https://steamcommunity.com/id/davepdotorg" title="steam" aria-label="steam" target="_blank" rel="noopener noreferrer">
                            <i class="fa-brands fa-steam"></i>
                        </a>
                        
                        <a href="https://www.youtube.com/user/daveporg" title="youtube" aria-label="youtube" target="_blank" rel="noopener noreferrer">
                            <i class="fa-brands fa-youtube"></i>
                        </a>
                        
                    </div>
                </section>
                
            </div>
        </aside>

        <div class="main-wrapper">
            <header>
                <nav>
                    <ul>
                        <li><a href="/categories.html">Categories</a></li>
                        <li><a href="/tags.html">Tags</a></li>
                        <li><a href="/archive.html">Archive</a></li>
                        
                        <li><a href="/search.html">Search</a></li>
                        
                        
                        <li><a href="/feed.xml" title="Subscribe via RSS feed">RSS</a></li>
                        <li><a href="/feeds/all.atom.xml" title="Subscribe via Atom feed">Atom</a></li>
                        
                        <li>
                            <button class="theme-toggle" type="button" aria-label="Toggle theme">
                                <span class="icon light-icon">‚òÄÔ∏è</span>
                                <span class="icon dark-icon">üåô</span>
                                <span class="theme-label">Theme</span>
                            </button>
                        </li>
                    </ul>
                </nav>
            </header>

            <main>
                
<div class="tag-page">
    <h1>Posts tagged with "coding"</h1>
    

<nav class="pagination" aria-label="Page navigation">
    
    
    <a href="/tag/coding.html" class="pagination-link pagination-prev">‚Üê Previous</a>
    

    
    
    
        
            
            
    <a href="/tag/coding.html" class="pagination-link pagination-number">1</a>
            
            
        
    
        
            
            
    <span class="pagination-link pagination-number pagination-current" aria-current="page">2</span>
            
            
        
    
        
            
            
    <a href="/tag/coding/3.html" class="pagination-link pagination-number">3</a>
            
            
        
    

    
    
    <a href="/tag/coding/3.html" class="pagination-link pagination-next">Next ‚Üí</a>
    
</nav>



    
    
    <article class="post-summary">
        <h2><a href="/2022/12/01/new-things-on-pypi.html">New Things On PyPi</a></h2>
        
        <time datetime="2022-12-01T22:13:00+00:00"><a href="/2022/">2022</a>-<a href="/2022/12/">12</a>-<a href="/2022/12/01/">01</a> 22:13:00 UTC</time>
        
        <div class="reading-time">5 min read</div>
        
        <div class="category">
            <a href="/category/python.html" class="category-link">Python</a>
        </div>
        
        <div class="post-content">
            <h1 id="an-update">An update</h1>
<p>So, it's fast approaching 2 months now <a href="/2022/10/05/on-to-something-new-redux.html">since I started the new
thing</a> and it's been a busy
time. I've had to adjust to a quite a few new things, not least of which has
been a longer and more involved commute. I'm actually mostly enjoying it
too. While having to contend with busses isn't the <em>best</em> thing to be doing
with my day, I do have a very fond spot for Edinburgh and it's nice to be in
there most days of the week.</p>
<p>Part of the fallout from the new job has been that, in the last couple of
weeks, I've thrown some more stuff up on PyPi. This comes about as part of a
bit of a dog-fooding campaign we're on at the moment (you can read some
background to this <a href="https://textual.textualize.io/blog/2022/11/26/on-dog-food-the-original-metaverse-and-not-being-bored/" rel="noopener noreferrer" target="_blank">over on the company
blog</a>).
While they have been, and will continue to be, mentioned on the Textualize
blog, I thought I'd give a brief mention of them here on my own blog too
given they are, essentially, personal projects.</p>
<h1 id="gridinfo">gridinfo</h1>
<p>This is one I'd like to tweak some more and improve on if possible. It is,
in essence, a Python-coded terminal tool that does more or less the same as
<a href="https://github.com/davep/slstats.el" rel="noopener noreferrer" target="_blank"><code>slstats.el</code></a>. It started out as <a href="https://twitter.com/davepdotorg/status/1590476280457490434" rel="noopener noreferrer" target="_blank">a
rather silly quick
hack</a>, designed
to do something different with
<a href="https://github.com/darrenburns/rich-pixels" rel="noopener noreferrer" target="_blank"><code>rich-pixels</code></a>.</p>
<p>Here's the finished version (as of the time of writing) being put through
its paces:</p>
<div style="text-align: center;">
<iframe width="560" height="315"
src="https://www.youtube.com/embed/dzpGgVPD2aM" title="YouTube video player"
frameborder="0" allow="accelerometer; autoplay; clipboard-write;
encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</div>

<p>Download <a href="https://pypi.org/project/gridinfo/" rel="noopener noreferrer" target="_blank">from here</a>, or install and
play with it with a quick <code>pipx install gridinfo</code>.</p>
<h1 id="unbored">unbored</h1>
<p>The next experiment with Textual was to write a terminal-based client for
the <a href="https://www.boredapi.com/" rel="noopener noreferrer" target="_blank">Bored-API</a>. My initial plan for this was to
just have a button or two that the user could mash on and they'd get an
activity suggestion dropped into the middle of the terminal; but really that
seemed a bit boring. Then I realised that it'd be a bit more silly and a bit
more fun if I did it as a sort of TODO app. Bored? Run it up and use one of
the activities you'd generated before. Don't like any of them? Ignore them
and generate some more! Feeling bad that you've got such a backlog of
reasons to not be bored? Delete a bunch!</p>
<p>And so on.</p>
<p>Here's a short video of it in action:</p>
<div style="text-align: center;">
<iframe width="560" height="315"
src="https://www.youtube.com/embed/Zl3dIzYfIWI" title="YouTube video player"
frameborder="0" allow="accelerometer; autoplay; clipboard-write;
encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</div>

<p>Download <a href="https://pypi.org/project/unbored/" rel="noopener noreferrer" target="_blank">from here</a>, or install and play
with it with a quick <code>pipx install unbored</code>.</p>
<h1 id="textual-qrcode">textual-qrcode</h1>
<p>This one... this one I'm going to blame on the brain fog that followed flu
<em>and</em> Covid jabs that happened the day before (and which are still kicking
my arse 4 days later). Monday morning, at my desk, and I'm wondering what to
next write to experiment with Textual, and I realised it would be
interesting to write something that would show off that it's easy to make a
third party widget library.</p>
<p>And... yeah, I don't know why, but I remembered
<a href="https://github.com/davep/qrencode.el" rel="noopener noreferrer" target="_blank"><code>qrencode.el</code></a> and so
<code>textual-qrcode</code> was born!</p>
<p><img alt="The most useless Textal widget yet" src="/attachments/2022/12/01/textual-qrcode.png" /></p>
<p>I think the most amusing part about this is that I did it in full knowledge
that it would be useless; the idea being it would be a daft way of showing
off how you could build a widget library as an add-on for Textual. But...
more than one person actually ended up saying "yeah hold up there this could
actually be handy!"</p>
<p>If you're one of those people... <a href="https://pypi.org/project/textual-qrcode/" rel="noopener noreferrer" target="_blank">you'll find it
here</a>.</p>
<h1 id="fivepyfive">FivePyFive</h1>
<p>While I was on a roll putting stuff up on PyPi, I also decided to tweak up
my Textual-based 5x5 and throw that up too. This was <a href="https://twitter.com/davepdotorg/status/1554207518615814148" rel="noopener noreferrer" target="_blank">my first app built
with Textual</a>,
initially written before I'd even spoken to Will about the position here. At
one point I even did <a href="https://github.com/davep/textual/blob/c4f60548922609133763c0e49f7b23aea5d44c2b/sandbox/davep/five_by_five.hy" rel="noopener noreferrer" target="_blank">a version in
Lisp</a>.</p>
<p>It's since gone on to become <a href="https://github.com/Textualize/textual/tree/d2ba22b86f48f4ce5b0f55767efdcf1a5478b180/examples" rel="noopener noreferrer" target="_blank">one of the example apps in Textual
itself</a>
but I felt it deserved being made available to the world via an easy(ish)
install. So, if you fancy trying to crack the puzzle in your terminal, just
do a quick:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>pipx<span class="w"> </span>install<span class="w"> </span>fivepyfive
</code></pre></div>

<p>and click away.</p>
<div style="text-align: center;">
<iframe width="343" height="610"
src="https://www.youtube.com/embed/Rf34Z5r7Q60" title="FivePyFive -- A
little annoying puzzle for the terminal" frameborder="0"
allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope;
picture-in-picture" allowfullscreen></iframe>
</div>

<p>You can find it <a href="https://pypi.org/project/fivepyfive/" rel="noopener noreferrer" target="_blank">over here</a>.</p>
<h1 id="pispy">PISpy</h1>
<p>Finally... for this week anyway, is a tool I've called PISpy. It's designed
as a simple terminal client for looking up package information on PyPi. As
of right now it's pretty straightforward, but I'd like to add more to it
over time. Here's an example of it in action:</p>
<div style="text-align: center;">
<iframe width="560" height="315"
src="https://www.youtube.com/embed/yMGD6bXqIEo" title="YouTube video player"
frameborder="0" allow="accelerometer; autoplay; clipboard-write;
encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</div>

<p>One small wrinkle with publishing it to PyPi was the fact that, once I'd
chosen the name, I checked that it hadn't been used on PyPi (it hadn't) but
when it came to publishing the package it got rejected because the name was
too similar to another package! I don't know which, it wouldn't say, but
that was a problem. So in the end the published name ended up having to be
slightly different from the actual tool's name.</p>
<p>See <a href="https://pypi.org/project/pispy-client/" rel="noopener noreferrer" target="_blank">over here</a> for the package, and
you can install it with a:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>pipx<span class="w"> </span>install<span class="w"> </span>pispy-client
</code></pre></div>

<p>and then just run <code>pispy</code> in the terminal.</p>
<h1 id="conclusion">Conclusion</h1>
<p>It's been a fun couple of weeks coming up with stuff to help exercise
Textual, and there's more to come. Personally I've found the process really
helpful in that it's help me learn more about the framework and also figure
out my own approach to working with it. Each thing I've built so far has
been a small step in evolution on from what I did in the previous thing. I
doubt I've arrived at a plateau of understanding just yet.</p>
        </div>
        
        <div class="tags">
            
            <a href="/tag/python.html" class="tag">Python</a>
            
            <a href="/tag/coding.html" class="tag">coding</a>
            
            <a href="/tag/textual.html" class="tag">Textual</a>
            
            <a href="/tag/pypi.html" class="tag">PyPi</a>
            
        </div>
        
    </article>
    
    <article class="post-summary">
        <h2><a href="/2022/11/05/python-and-macos.html">Python and macOS</a></h2>
        
        <time datetime="2022-11-05T08:49:00+00:00"><a href="/2022/">2022</a>-<a href="/2022/11/">11</a>-<a href="/2022/11/05/">05</a> 08:49:00 UTC</time>
        
        <div class="reading-time">6 min read</div>
        
        <div class="category">
            <a href="/category/python.html" class="category-link">Python</a>
        </div>
        
        <div class="post-content">
            <h1 id="introduction">Introduction</h1>
<p>On Twitter, a few weeks back, <a href="https://twitter.com/itsBexli/status/1577332548933500928" rel="noopener noreferrer" target="_blank">@itsBexli asked me how I go about setting up
Python for development on
macOS</a>. It's a
great question and one that seems to crop up in various places, and since <a href="/2015/06/27/my-first-couple-of-weeks-with-an-imac.html">I
first got into using
macOS</a> and then
<a href="/2017/12/12/on_to_something_new.html">subsequently got back into coding lots in
Python</a> it's absolutely an issue I ran
into.</p>
<p>With my previous employer, while I was the only developer, I wasn't the only
person writing code and more than one other person had this issue so I
eventually wrote up my approach to solving this problem. That document is on
their internal GitLab, but I thought it worth me writing my personal
macOS/Python "rules" up again, just in case they're useful to anyone else.</p>
<p>I am, of course, not the first person to tackle this, to document this, to
write down a good approach to this. Before and after I settled on my
approach I'd seen other people write about this. So... this post isn't here
to try and replace those, it's simply to write down my own approach, so if
anyone asks again I can point them here. I feel it's important to stress:
this isn't the only way or thoughts on this issue, there are lots of others.
Do go read them too and then settle on an approach that works for you.</p>
<p>One other point to note, which may or may not make a difference (and may or
may not affect how this changes with time): for the past few years I've been
a heavy user of <a href="https://pipenv.pypa.io/en/latest/" rel="noopener noreferrer" target="_blank"><code>pipenv</code></a> to manage my
virtual environments. This is very likely to change from now on, but keep in
mind that what follows was arrived at from the perspective of a <code>pipenv</code>
user.</p>
<p>So... with that admin aside...</p>
<h1 id="the-problem">The Problem</h1>
<p>When I first got back into writing Python it was on macOS and, really early
on, I ran into all the usual issues: virtual environments breaking because
they were based on the system Python and it got updated, virtual
environments based on the Homebrew-installed Python and it got updated,
etc... Simply put, an occasional, annoying, non-show-stopping breaking of my
development environment which would distract me when I'd sat down to just
hack on some code, not do system admin!</p>
<h1 id="my-solution">My Solution</h1>
<p>For me, what's worked for me without a problem over the past few years, in
short, is this:</p>
<ol>
<li><strong>NEVER</strong> use the system version of Python. Just don't.</li>
<li><strong>NEVER</strong> use the Homebrew's own version of Python (I'm not even sure
   this is an issue any more; but it used to be).</li>
<li><strong>NEVER</strong> use a version of Python installed with Homebrew (or, more to
   the point, never install Python with Homebrew).</li>
<li>Manage everything with <a href="https://github.com/pyenv/" rel="noopener noreferrer" target="_blank"><code>pyenv</code></a>; which I do
   install from Homebrew.</li>
</ol>
<h1 id="the-detail">The Detail</h1>
<p>As mentioned earlier, what I'm writing here assumes that virtual
environments are being managed with <code>pipenv</code> (something I still do for
personal projects, for now, but this may change soon). Your choices and
mileage may vary, etc... This is what works well for me.</p>
<h2 id="the-one-time-items">The "one time" items</h2>
<p>These are the items that need initially installing into a new macOS machine:</p>
<h3 id="homebrew">Homebrew</h3>
<p>Unless it comes from the Mac App Store, I try and install everything via
<a href="https://brew.sh/" rel="noopener noreferrer" target="_blank">Homebrew</a>. It's really handy for keeping track of what
I've got installed, for recreating a development environment in general, and
for keeping things up to date.</p>
<h3 id="pyenv">pyenv</h3>
<p>With Homebrew installed the next step for me is to install <code>pyenv</code>. Doing so
is as easy as:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>brew<span class="w"> </span>install<span class="w"> </span>pyenv
</code></pre></div>

<p>Once installed, if it's not done it for you, you may need to make some
changes to your login profile. I'm a user of <a href="https://fishshell.com" rel="noopener noreferrer" target="_blank">fish</a>
so I have <a href="https://github.com/davep/fish/blob/efc77fd20c4bd2f36eb628730787924b6a56fcfd/conf.d/python.fish#L21-L25" rel="noopener noreferrer" target="_blank">these lines in my
setup</a>.
Simply put: it asks pyenv to set up my environment so my calls to Python go
via its setup.</p>
<p>Plenty of help on how to set up <code>pyenv</code> can be found <a href="https://github.com/pyenv/pyenv#installation" rel="noopener noreferrer" target="_blank">in its
README</a>.</p>
<p>Once I've done this I tend to go on and install the Python versions I'm
likely to need. For me this tends to be the most recent "active" stable
versions (as of the time of writing, 3.7 through 3.10; although I need to
now start throwing 3.11 into the mix too).</p>
<p>I use this command:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>pyenv<span class="w"> </span>install<span class="w"> </span>--list
</code></pre></div>

<p>to see the available versions. If I want to see what's available for a
specific version I'll pipe through grep:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>pyenv<span class="w"> </span>install<span class="w"> </span>--list<span class="w"> </span><span class="p">|</span><span class="w"> </span>fgrep<span class="w"> </span><span class="s2">&quot;  3.9&quot;</span>
</code></pre></div>

<p>This is handy if I want to check what the very latest release of a specific
version of Python is.</p>
<h3 id="the-global-python">The "Global" Python</h3>
<p>When I'm done with the above I then tend to use <code>pyenv</code> to set my "global"
Python. This is the version I want to get when I run <code>python</code> and I'm not
inside a virtual environment. Doing that is as simple as:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>pyenv<span class="w"> </span>global<span class="w"> </span><span class="m">3</span>.10.7
</code></pre></div>

<p>Of course, you'd swap the version for whatever works for you.</p>
<h3 id="when-stuff-breaks">When Stuff Breaks</h3>
<p>It seems more rare these days, but on occasion I've had it such that some
update somewhere still causes my environment to break. Now though I find
that all it takes is a quick:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>pyenv<span class="w"> </span>rehash
</code></pre></div>

<p>and everything is good again.</p>
<h2 id="setting-up-a-repo">Setting Up A Repo</h2>
<p>With all of the stuff above being mostly a one-off (or at least something I
do once when I set up a new machine -- which isn't often), the real "work"
here is when I set up a fresh repository when I start a new project. Really
it's no work at all. Again, as I've said before, I've tended to use <code>pipenv</code>
for my own work, and still do for personal stuff (but do want to change
that), mileage may vary here depending on tool.</p>
<p>When I start a new project I think about which Python version I want to be
working with, I ensure I have the latest version of it installed with
<code>pyenv</code>, and then ask <code>pipenv</code> to create a new virtual environment with
that:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>pipenv<span class="w"> </span>--python<span class="w"> </span><span class="m">3</span>.10.7
</code></pre></div>

<p>When you do this, you should see <code>pipenv</code> pulling the version of Python from
the <code>pyenv</code> directories:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>pipenv<span class="w"> </span>--python<span class="w"> </span><span class="m">3</span>.10.7
Creating<span class="w"> </span>a<span class="w"> </span>virtualenv<span class="w"> </span><span class="k">for</span><span class="w"> </span>this<span class="w"> </span>project...
Pipfile:<span class="w"> </span>/Users/davep/temp/cool-project/Pipfile
Using<span class="w"> </span>/Users/davep/.pyenv/versions/3.10.7/bin/python3<span class="w"> </span><span class="o">(</span><span class="m">3</span>.10.7<span class="o">)</span><span class="w"> </span>to<span class="w"> </span>create<span class="w"> </span>virtualenv...
‚†ô<span class="w"> </span>Creating<span class="w"> </span>virtual<span class="w"> </span>environment...created<span class="w"> </span>virtual<span class="w"> </span>environment<span class="w"> </span>CPython3.10.7.final.0-64<span class="w"> </span><span class="k">in</span><span class="w"> </span>795ms
<span class="w">  </span>creator<span class="w"> </span>CPython3Posix<span class="o">(</span><span class="nv">dest</span><span class="o">=</span>/Users/davep/temp/cool-project/.venv,<span class="w"> </span><span class="nv">clear</span><span class="o">=</span>False,<span class="w"> </span><span class="nv">no_vcs_ignore</span><span class="o">=</span>False,<span class="w"> </span><span class="nv">global</span><span class="o">=</span>False<span class="o">)</span>
<span class="w">  </span>seeder<span class="w"> </span>FromAppData<span class="o">(</span><span class="nv">download</span><span class="o">=</span>False,<span class="w"> </span><span class="nv">pip</span><span class="o">=</span>bundle,<span class="w"> </span><span class="nv">setuptools</span><span class="o">=</span>bundle,<span class="w"> </span><span class="nv">wheel</span><span class="o">=</span>bundle,<span class="w"> </span><span class="nv">via</span><span class="o">=</span>copy,<span class="w"> </span><span class="nv">app_data_dir</span><span class="o">=</span>/Users/davep/Library/Application<span class="w"> </span>Support/virtualenv<span class="o">)</span>
<span class="w">    </span>added<span class="w"> </span>seed<span class="w"> </span>packages:<span class="w"> </span><span class="nv">pip</span><span class="o">==</span><span class="m">22</span>.2.2,<span class="w"> </span><span class="nv">setuptools</span><span class="o">==</span><span class="m">65</span>.3.0,<span class="w"> </span><span class="nv">wheel</span><span class="o">==</span><span class="m">0</span>.37.1
<span class="w">  </span>activators<span class="w"> </span>BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator,PythonActivator
‚úî<span class="w"> </span>Successfully<span class="w"> </span>created<span class="w"> </span>virtual<span class="w"> </span>environment!
Virtualenv<span class="w"> </span>location:<span class="w"> </span>/Users/davep/temp/cool-project/.venv
Creating<span class="w"> </span>a<span class="w"> </span>Pipfile<span class="w"> </span><span class="k">for</span><span class="w"> </span>this<span class="w"> </span>project...
</code></pre></div>

<p>The key thing here is seeing that <code>pipenv</code> is pulling Python from
<code>~/.pyenv/versions/</code>. If it isn't there's a good chance you have a Python
earlier in your <code>PATH</code> than the <code>pyenv</code> one -- something you generally don't
want. It will work, but it's more likely to break at some point in the
future. That's the key thing I look for; if I see that I know things are
going to be okay.</p>
<h2 id="conclusion">Conclusion</h2>
<p>Since I adopted these personal rules and approaches (and really, calling
them "rules" is kind of grand -- there's almost nothing to this) I've found
I've had near-zero issues with the stability of my Python virtual
environments (and what issues I have run into tend to be trivial and of my
own doing).</p>
<p>As I said at the start: there are, of course, other approaches to this, but
this is mine and works well for me. Do feel free to comment with your own,
I'm always happy to learn about new ways!</p>
        </div>
        
        <div class="tags">
            
            <a href="/tag/python.html" class="tag">Python</a>
            
            <a href="/tag/macos.html" class="tag">macOS</a>
            
            <a href="/tag/coding.html" class="tag">coding</a>
            
        </div>
        
    </article>
    
    <article class="post-summary">
        <h2><a href="/2022/10/06/build-in-public-even-in-private.html">Build in public, even in private</a></h2>
        
        <time datetime="2022-10-06T10:44:00+01:00"><a href="/2022/">2022</a>-<a href="/2022/10/">10</a>-<a href="/2022/10/06/">06</a> 10:44:00 UTC+01:00</time>
        
        <div class="reading-time">5 min read</div>
        
        <div class="category">
            <a href="/category/coding.html" class="category-link">Coding</a>
        </div>
        
        <div class="post-content">
            <p>As mentioned <a href="/2022/10/05/on-to-something-new-redux.html">yesterday</a>, I'm
about to start working at <a href="https://www.textualize.io" rel="noopener noreferrer" target="_blank">Textualize</a>, and
building Open-source software is important to the company.
<a href="https://twitter.com/willmcgugan" rel="noopener noreferrer" target="_blank">Will</a> -- the CEO -- is all about building
in public. If you follow him on Twitter you'll notice that his Python coding
adventure tweets actually outnumber is cooking tweets!</p>
<p>As someone who has long been a supporter of and fan of <a href="https://www.gnu.org/philosophy/free-sw.en.html" rel="noopener noreferrer" target="_blank">Free
Software</a> and <a href="https://en.wikipedia.org/wiki/Open-source_software" rel="noopener noreferrer" target="_blank">Open-source
software</a>, and has made
some small contributions along the way, I've also always made a point of
<a href="https://github.com/davep/" rel="noopener noreferrer" target="_blank">building my own tools in public</a>. In most cases
they're things that are likely only helpful to me, but some are more
generally useful. The point being though: it's all there in case it's
helpfull to someone else.</p>
<p>Which means that, as much as possible, when I'm writing code, I write it as
if it's going to be visible in public and someone else is going to be
reading it. I try and make the code tidy. I try and comment it well. I try
(but don't always manage for personal projects) to fully document it. The
important thing here being that someone coming to the code fresh should be
able to follow what's going on.</p>
<p>Against that background, and having just gone through the process of handing
off almost 5 years of work to someone else as a left an employer, I got to
thinking: we should always "build in public", even if it's in private.</p>
<p>When I started with my previous employer, and even to the day I left, I was
the only software developer there. I worked with a team who wrote code, but
being software developers wasn't what they did. Bioinformaticians and
machine learning scientists have other things to be doing. But, as I wrote
my code, I wrote every line assuming they, or some other developer down the
line, would be reading it. Pretty much every line was written for an
audience I couldn't see and didn't fully know. This, as mentioned above,
meant trying to keep the code clean, ensuring it was commented in helpful
ways, ensuring the documentation was helpful, and so on.</p>
<p>But it wasn't just about the code. Any non-trivial system will have more to
it than code. We had an internal instance of GitLab and I tracked all of my
work on there. So, as I planned and worked on new features, or went on bug
hunts, I'd document the process in the issue tracker. As much as possible
I'd be really verbose about the process. Often I wouldn't just open an
issue, go work on it, and then mark it closed; as I worked through the issue
I'd add comment after comment under it, documenting my thinking, problems,
solutions, cite sources when looking something up, that sort of thing.</p>
<p>The whole process was an act in having a conversation with current or future
team members if they ever needed to look; with future me (really, that
helped more than once -- we all have those "that the <em>hell</em> was I thinking?"
moments); with any developer(s) who took over from me in the future.</p>
<p>I did all this as if I was broadcasting it in public <a href="https://twitter.com/davepdotorg" rel="noopener noreferrer" target="_blank">on
Twitter</a> or <a href="https://github.com/davep" rel="noopener noreferrer" target="_blank">on
GitHub</a>, etc. It was in private, of course, but I
approached it as if it was in public.</p>
<p>There were always three main reasons for this, I felt:</p>
<ol>
<li>Accountability. At any moment someone who I worked with could review what
   I was doing and why I was doing it; it was an invitation to anyone
   curious enough to talk with me about what I was building and how I was
   building it.</li>
<li>Continuity of support for unplanned reasons. Life happens, sometimes you
   may, unplanned, never be available at work again. I never wanted to leave
   my employer in a position where picking up from such an event was a
   nightmare.</li>
<li>Continuity of support for planned reasons. It was possible, and it became
   inevitable, that I'd move on to something else. If that was to happen I
   wanted to be sure that whoever picked up after me would be able to do so
   without too much effort.</li>
</ol>
<p>In the end item 3 seemed to really pay off. When it came time for me to hand
over my work to someone else, as I left, the process was really smooth and
trouble-free. I was able to point the developer at all the documentation and
source code, at all the issues, and invite them to read through it all and
then come back to me with questions. In terms of time actually spent talking
about the main system I was handing over I'd say that 4 years of work was
handed over with just a few hours of actual talking about it.</p>
<p>It remains to be seen if it really paid off, of course. If they get really
stuck they do have an open invitation to ping me a question or two; I care
enough about what I designed and built that I want it to carry on being
useful for some time to come. But... I like to think that all of that
building in public, in private, will ensure that this is an invitation that
never needs to be called on. I like to think that, if something isn't clear,
they'll be able to check the code, the documentation and the issue history
and get to where they need to go.</p>
        </div>
        
        <div class="tags">
            
            <a href="/tag/coding.html" class="tag">coding</a>
            
        </div>
        
    </article>
    
    <article class="post-summary">
        <h2><a href="/2022/10/05/on-to-something-new-redux.html">On to something new (redux)</a></h2>
        
        <time datetime="2022-10-05T09:24:00+01:00"><a href="/2022/">2022</a>-<a href="/2022/10/">10</a>-<a href="/2022/10/05/">05</a> 09:24:00 UTC+01:00</time>
        
        <div class="reading-time">4 min read</div>
        
        <div class="category">
            <a href="/category/life.html" class="category-link">Life</a>
        </div>
        
        <div class="post-content">
            <p>Just over five years ago I got a message from my then employer to say I was
going to be made redundant after 21 years working for them. After the 3
month notice period the final day came. Meanwhile, I found something new
that <a href="/2017/12/12/on_to_something_new.html">looked terrifying but
interesting</a>. In the end it was less
terrifying and way more interesting than I imagined it would be. It was fun
too.</p>
<p>But... (there's always a but isn't there?)</p>
<p>In the four and change years I've been there the company got bought out, and
then the result of that got bought up. As I've mentioned before I'm
generally not a "big company" kind of person; in all my years I've found
that I'm happier working in a smaller place. After a couple of buyouts my
employer had gone from being 10s of people in size to 100s of people in size
(and technically 10s of 1,000s of people in size depending on how you look
at it).</p>
<p>This change in ownership and size meant the culture became... well, let's
just say not as friendly as you tend to enjoy when it's a smaller group of
folk. On top of that I was starting to notice that my efforts were making
less of an impact as things got bigger, and I started to feel like my
contributions weren't really relevant any more. There were some problematic
things happening too: undermining of efforts, removal of responsibilities
without consultation or communication, that sort of thing. Plus worse.
There's little point in going into the detail, but it's fair to say that
work wasn't as fun as it used to be.</p>
<p>That felt like a good time to start to look around. If work makes you feel
unhappy and you can look around... look around.</p>
<p>Thing is, I wasn't sure what to look for. I was in the comfortable position
of, unlike last time, not <em>needing</em> to find something, so I could take my
time at least. Over the course of the last year I've spoken to many
different companies and organisations, some big (yes, I know, I said I don't
like big places -- sometimes what's on offer deserves a fair hearing), some
small, but none of them quite said <em>"this feels like me"</em>. In some cases the
whole thing didn't have the right vibe, in others the industry either didn't
interest me, or felt uncomfortable given my personal values. In one
particular case a place looked interesting until I checked the CTO's socials
and OMG NO NO NO AVOID AVOID (that was a fun one).</p>
<p>Then I saw <a href="https://twitter.com/willmcgugan" rel="noopener noreferrer" target="_blank">Will McGugan</a> saying he was
hiring to expand <a href="https://www.textualize.io/" rel="noopener noreferrer" target="_blank">Textualize</a>. This caught my
interest right away for two good reasons.</p>
<p>I can't remember how long I've been following Will on Twitter; I likely
stumbled on him as I got back into Python in 2018 and I also remember noting
that he was a Python hacker just up the road from me. We'd vaguely chatted
on Twitter, briefly, in that "Twitter acquaintance" way we all often do (I
remember <a href="https://twitter.com/davepdotorg/status/1438887277623750661" rel="noopener noreferrer" target="_blank">one brief exchange about fungus on The
Meadows</a>), and
he'd seemed like a good sort. A small company run by a "good sort" kinda
person felt like a damn good reason.</p>
<p>The second reason was Textual itself. I'd been watching Will develop it, in
open, with great interest. I had (and still have) a plan to write a brand
new CHUI-based (okay fine TUI-based as the kids like to say these days!)
Norton Guide reader, all in Python, and Textual looked like the perfect
framework to do the UI in. The chance to be involved with it sounded
awesome.</p>
<p>Now, I said two reasons, but there's also a third I guess: Will's pitch for
applying to Textualize felt so damn accessible! I'm on the older end of the
age range of this industry; for much of my working life as a developer I've
worked in isolation from other developers; while I first touched Python in
the 90s, I've only been using it in anger since 2018 and still feel like
I've got a lot to learn. Despite all these things, and more, saying <em>"aye
Dave this is beyond you"</em> I felt comfortable dropping Will a line.</p>
<p>Which resulted in a chat.</p>
<p>Which resulted in some code tinkering and chatting.</p>
<p>Which resulted in...</p>
<p>Something new.</p>
<p>So, yeah, as of 2022-10-10 I'm on yet another new adventure. Time for me to
<em>really</em> work on my Python coding as I work with Will and the rest of the
team as part of Textualize.</p>
<p>Or, as I put it on Twitter a few days ago: <a href="https://twitter.com/davepdotorg/status/1574121611413921792" rel="noopener noreferrer" target="_blank">I'm going to be a Python
impostor syndrome
speedrunner</a>!</p>
        </div>
        
        <div class="tags">
            
            <a href="/tag/coding.html" class="tag">coding</a>
            
            <a href="/tag/work.html" class="tag">work</a>
            
            <a href="/tag/life.html" class="tag">life</a>
            
            <a href="/tag/python.html" class="tag">Python</a>
            
            <a href="/tag/news.html" class="tag">news</a>
            
        </div>
        
    </article>
    
    <article class="post-summary">
        <h2><a href="/2020/06/21/a-second-attempt-to-learn-swift.html">A second attempt to learn Swift</a></h2>
        
        <time datetime="2020-06-21T14:48:00+01:00"><a href="/2020/">2020</a>-<a href="/2020/06/">06</a>-<a href="/2020/06/21/">21</a> 14:48:00 UTC+01:00</time>
        
        <div class="reading-time">5 min read</div>
        
        <div class="category">
            <a href="/category/coding.html" class="category-link">Coding</a>
        </div>
        
        <div class="post-content">
            <p>It's five years ago this month that I bought myself my first macOS (then OS
X) device. After many years of having a Windows machine as my daily driver,
which was also my work machine (I worked from home), I decided it was high
time that I returned to having a Unix-a-like system on my desk too. For a
decade or so, starting in the later-90s, I'd had a GNU/Linux desktop. I
still had a Windows desktop (until a couple of years ago most of my work was
on DOS and Windows), but thanks to the wonders of a KVM, and later an X
server that ran on Windows, my personal hacking was done on a GNU/Linux
desktop.</p>
<p>But as things moved around, priorities changed, as life moved on, the
GNU/Linux boxes got retired and never quite replaced. Eventually, in 2015, I
found myself with the means and desire to recover that sort of setup. Long
story short, after a lot of reading up and weighing up options I decided
that the best option for a desktop Unix was... an iMac!</p>
<p>I loved it. Sure, <a href="/2015/06/27/my-first-couple-of-weeks-with-an-imac.html">there were lots of little things on the surface that were
different or annoying or just plain not as cool as the Mac fans would tell
you</a>,
but under the hood I found what I needed: a Unix CLI with all the things I
knew well. And, of course, it ran GNU Emacs just fine; that was the really
important thing for me.</p>
<p>Pretty much right away I decided that it might be fun to learn the tools
necessary to develop native Mac apps, and perhaps even iOS apps. I
downloaded XCode, bought a book, and started working through it. Having got
that book, I decided it might be interesting to own an iOS device too. So,
sort of needing an MP3 player, and having no wish to get an iPhone, <a href="/2015/06/23/and-now-for-some-ios.html">I got
myself an iPod
Touch</a>. So I
was all set to devour the Swift book, write some stuff for OS X, create an
iOS app or two, and... life happened. Stuff cropped up that distracted me
from taking that further and I never really returned to working through the
book.</p>
<p>Fast forward to now and that initial iMac and iPod purchase spiralled a wee
bit. Next after the iPod was an iPad Mini, when my Nexus 7 was starting to
show its age and it was obvious that Google wasn't going to produce any more
good Android tablets. Then, when I needed a very portable Unix-a-like
machine for trips between where I was living and Edinburgh, <a href="/2016/04/28/i-now-own-a-macbook.html">I got myself a
MacBook Air</a>.
Since then the iPod Touch has been replaced once, as has the iPad Mini. I
now also own an iPad and a MacBook Pro. Unless Apple screw up and turn Macs
into something unusable for developers (there are rumours), I imagine I'll
be using Apple devices for some time to come now.</p>
<p>And then, last month, having finally got frustrated with where Google were
going with Android and the Pixel series, I jumped ship to the iPhone 11.</p>
<p>As of right now I'm in a situation where I'm all about the Apple ecosystem
regarding hardware and operating systems (including for my work machine),
all of which is there to support my heavy use of the Google ecosystem
(actually, the one bit of Google hardware I still lean on heavily is the
Google Home -- I have 3 around my home).</p>
<p>So... given all of that, I thought it was time to look at returning to
learning Swift, with a view to writing some native macOS and i(Pad)OS stuff.
I soon realised that the book I'd bought back in 2015 was rather out of
date. It covers Swift 1.2 -- <a href="https://en.wikipedia.org/wiki/Swift_(programming_language)#Version_history" rel="noopener noreferrer" target="_blank">we're now up to
5.2</a>!
Given this, and given I've forgotten pretty much everything I'd read at the
time, I decided I should start again from scratch.</p>
<p>This weekend I've started reading my way though <a href="https://www.oreilly.com/library/view/ios-13-programming/9781492074526/" rel="noopener noreferrer" target="_blank"><em>iOS Programming
Fundamentals with
Swift</em></a>.
While this obviously has an emphasis on iOS, I'm already finding that the
first part of the book is a really great introduction to the Swift language
in general. The pace seems just right, and the way topics are grouped makes
it easy enough for me to skip over what's obvious (I don't need to know what
objected-oriented programming is, and what the difference between a class
and an object is, etc) and read up on the detail of this particular language
when it comes to general concepts I know (knowing the differences between a
class, struct and enum in the language is important, for example).</p>
<p>I've yet to write a line of code, but I'm fine with that. The book is
spending a lot of time introducing the language before encouraging you to
fire up XCode, and I'm okay with that. I'm never a fan of being asked to
write out code that I can't properly follow -- that just makes stuff look
like magic when it's far more educational to know what's going on. What I am
finding is I'm making lots of notes that are either <em>"oh, yeah, this is
cool, I like this idea!"</em> or <em>"WTF are you kidding me?!?"</em>. Which is really
nice -- it's always great to learn a new language that's a bit different
from what you normally use.</p>
<p>My plan then, over the next few weeks, it to keep at this and hopefully
document my journey. I think I'd like to write a short series of TIL-type
posts; nothing too long, just some new thing I read or discovered and my
reaction to it. So, if you happen to follow this blog, I apologise in
advance for any Swift-spam.</p>
<p>You have been warned. ;-)</p>
        </div>
        
        <div class="tags">
            
            <a href="/tag/swift.html" class="tag">Swift</a>
            
            <a href="/tag/apple.html" class="tag">Apple</a>
            
            <a href="/tag/coding.html" class="tag">coding</a>
            
        </div>
        
    </article>
    
    <article class="post-summary">
        <h2><a href="/2019/11/17/getting-started.html">Getting started</a></h2>
        
        <time datetime="2019-11-17T11:36:00+00:00"><a href="/2019/">2019</a>-<a href="/2019/11/">11</a>-<a href="/2019/11/17/">17</a> 11:36:00 UTC</time>
        
        <div class="reading-time">1 min read</div>
        
        <div class="category">
            <a href="/category/coding.html" class="category-link">Coding</a>
        </div>
        
        <div class="post-content">
            <p>By coincidence, in a couple of different places over the last couple of
weeks, the subject of <em>"how do I progress in leaning to program?"</em> has
cropped up. For me, I think the approaches and solutions tend to be the same
for when I want to get my head around a new language: read good examples of
idiomatic code, read other related materials, find a problem you care about
and implement a solution (ideally something you'll directly benefit from, or
at least others may benefit from). Hence the <a href="/2019/11/10/going-on-a-journey.html">5x5 puzzle and Norton Guide
reader projects I mentioned in my previous
post</a>.</p>
<p>Of course, not everyone has problems that they need solving in a way that
would work for this approach. So another approach I've recommended in the
past is to go looking on somewhere like GitHub and find projects that
promote "low-hanging fruit" issues in a way that's designed to be friendly
for those who are new to development, new to contributing or new to the
problem domain.</p>
<p>While looking for examples of this yesterday I stumbled on <a href="https://github.com/MunGell/awesome-for-beginners" rel="noopener noreferrer" target="_blank"><em>Awesome for
Beginners</em></a>. This looks
like a great list and one I'm going to keep <a href="https://pinboard.in/u:davep/" rel="noopener noreferrer" target="_blank">bookmarked for future
reference</a>. Now, this particular list does
seem to have an emphasis on <a href="https://github.com/MunGell/awesome-for-beginners/issues/215" rel="noopener noreferrer" target="_blank">pulling in people who are new to contributing
to a project</a>
rather than new to development, but it does strike me as a good place to
start looking no matter where you're coming from.</p>
<p>I know I'm going to start having a wander around that list. It's always nice
to contribute and I feel there's real personal benefit in actively solving a
problem that someone else has and welcomes help with.</p>
        </div>
        
        <div class="tags">
            
            <a href="/tag/coding.html" class="tag">Coding</a>
            
            <a href="/tag/learning.html" class="tag">learning</a>
            
        </div>
        
    </article>
    
    <article class="post-summary">
        <h2><a href="/2017/12/12/on_to_something_new.html">On to something new</a></h2>
        
        <time datetime="2017-12-12T13:59:01+00:00"><a href="/2017/">2017</a>-<a href="/2017/12/">12</a>-<a href="/2017/12/12/">12</a> 13:59:01 UTC</time>
        
        <div class="reading-time">2 min read</div>
        
        <div class="category">
            <a href="/category/life.html" class="category-link">Life</a>
        </div>
        
        <div class="post-content">
            <p>Today is a fairly significant day for me. For the past 21 (and a bit) years
I've worked for the same company. I know that, for lots of people in my
industry, that's a hell of a long time to be in one position. It was a setup
that served me pretty well; the company was small (I'm not much of a big
company person), I generally got to dictate the development tools and
direction, and I also got to work from home.</p>
<p>The working from home part was especially helpful as other life events
involved me and happened around me. The job I've been in has seen a marriage
come and go, and a move from Hampshire to Lincolnshire, and then from
Lincolnshire to Midlothian. There's been a few adventures along the way.</p>
<p>But, three months ago, I got a call to say that I was to be made redundant.
This sucked, obviously. It also appeared pretty stupid on the part of my
employer: a company that is based around software had decided it no longer
wanted an in-house software developer. A bold, and I think unwise, choice.
From this point on they've decided to only go with contract developers and
<em>only</em> contract developers from overseas (or so the story goes).</p>
<p>As it goes, things have turned out okay. Today is my last day with my old
employer and, as I'm sat here typing this out while having some lunch, I'm
actually glad that it's coming to a close and that I can get to move on.</p>
<p>I have a new employer, and will be starting in my new position during the
first week of January. It'll be very different. It'll all be different. Not
only will I be back working in an office (one where jeans and t-shirts are
the norm, thankfully!), I'm also going to be working in an industry (as a
developer still, of course) that I have no background in and no real
knowledge of. It's going to be a seriously exciting challenge.</p>
<p><img alt="New book" src="/attachments/2017/12/12/IMG_20171212_140656-01.jpeg#centre" /></p>
<p>Over the next couple of weeks I've got a fair amount of background reading
(and video watching) to be doing. This isn't so much that I can get on with
the job of development (although there will be a good bit of that to do too
-- who doesn't want to be trying to understand new options for
development?), it's more about understanding the language of the industry
I'll be in and so that I can understand the needs of my users.</p>
<p>Goodbye fashion retail and all related things. Hello genetics and... well, I
don't know, I'm going to find out. :)</p>
        </div>
        
        <div class="tags">
            
            <a href="/tag/coding.html" class="tag">coding</a>
            
            <a href="/tag/work.html" class="tag">work</a>
            
            <a href="/tag/life.html" class="tag">life</a>
            
            <a href="/tag/news.html" class="tag">news</a>
            
        </div>
        
    </article>
    
    <article class="post-summary">
        <h2><a href="/2017/07/13/more_revamping_of_my_emacs_config.html">More revamping of my Emacs config</a></h2>
        
        <time datetime="2017-07-13T15:25:29+01:00"><a href="/2017/">2017</a>-<a href="/2017/07/">07</a>-<a href="/2017/07/13/">13</a> 15:25:29 UTC+01:00</time>
        
        <div class="reading-time">2 min read</div>
        
        <div class="category">
            <a href="/category/emacs.html" class="category-link">Emacs</a>
        </div>
        
        <div class="post-content">
            <p>I've been pretty quiet on here since I last wrote about how I'd done a
further revamp of my Emacs config, so I thought that subject would be a good
reason to write another blog post.</p>
<p>It'll be a mostly short one, and one to muse over something that's been
bugging me for a while now: my decision to lean heavily on <code>customize</code> to
set all sorts of settings.</p>
<p>Initially,
<a href="/2016/05/26/starting_fresh_with_gnu_emacs.html">when I nuked my original config over a year ago</a>,
it seemed to make a lot of sense. Let all the tweaks and set values "hide"
in a file of their own and try and keep the hand-edited config files as
small and as clean as possible. Recently though I've got to thinking that
this obscures too much, hides too much detail, and removes the ability to
actually document what I'm doing and why. It also does make it tricky to
adapt some settings to different platforms or even environments on a single
platform.</p>
<p>Another problem I've run into is
this:
<a href="/2017/04/01/another_revamp_of_my_emacs_config.html">when I made the second round of changes</a> and
decided to lean heavily
on <a href="https://github.com/jwiegley/use-package" rel="noopener noreferrer" target="_blank"><code>use-package</code></a>, I soon ran into
the minor issue of some packages not making sense, or even being needed, on
some platforms (stuff that's useful on my macOS machines isn't always useful
on my Windows machines, that sort of thing). While <code>use-package</code> can handle
this easily thanks to the <code>:if</code> keyword, I'm still left with the fact that
<code>package-selected-packages</code> still gets populated.</p>
<p>Having <code>package-selected-packages</code> contain a list of installed packages
likely makes sense if you're using just the Emacs package system and you're
not doing the installing with <code>use-package</code> and <code>:ensure</code>. But with
<code>use-package</code> and <code>:ensure</code> I feel like I've got far more control over
things and can adapt what gets installed when depending on which Emacs I'm
running where.</p>
<p>But, because I'm syncing my <code>~/.emacs.d/.custom.el</code> to all my machines too, any
<code>use-package</code> that has a <code>:if</code> to not bother using a package has little
effect because the package still ends up being listed/loaded/seen as part of
the installation.</p>
<p>Ideally, I think, I'd like to be able to have <code>package-selected-packages</code>
held in its own file, or I'd only ever use <code>~/.emacs.d/.custom.el</code> for local
stuff (and so stop syncing it).</p>
<p>Starting today I'm going about a process of moving as much as I can out of
<code>~/.emacs.d/.custom.el</code> and into hand-edited files. In some respects I guess
I am going back to how I used to manage Emacs configuration, but this time
it's not a massive monolithic file-of-Lisp, it's neatly broken down into
sensible sections and it's also biased towards a "grab and config this
package" approach.</p>
<p>Meanwhile, I've not seen any good discussions online about <code>customize</code> vs
"hand-edit", which strikes me as a little odd as it feels like the perfect
"religious issue" for people to have endless disagreements over. I guess,
over the next couple or so weeks, I'll find out if switching back was a good
idea.</p>
        </div>
        
        <div class="tags">
            
            <a href="/tag/emacs.html" class="tag">Emacs</a>
            
            <a href="/tag/lisp.html" class="tag">Lisp</a>
            
            <a href="/tag/coding.html" class="tag">coding</a>
            
            <a href="/tag/emacs-lisp.html" class="tag">Emacs Lisp</a>
            
        </div>
        
    </article>
    
    <article class="post-summary">
        <h2><a href="/2017/04/01/another_revamp_of_my_emacs_config.html">Another revamp of my emacs config</a></h2>
        
        <time datetime="2017-04-01T10:02:18+01:00"><a href="/2017/">2017</a>-<a href="/2017/04/">04</a>-<a href="/2017/04/01/">01</a> 10:02:18 UTC+01:00</time>
        
        <div class="reading-time">4 min read</div>
        
        <div class="category">
            <a href="/category/emacs.html" class="category-link">Emacs</a>
        </div>
        
        <div class="post-content">
            <p>Just under a year ago I decided to
<a href="/2016/05/26/starting_fresh_with_gnu_emacs.html">totally rewrite my GNU emacs config</a>.
As I wrote at the time, it'd been following me around all sorts of machines
since the early 1990s, starting life on an OS/2 Warp machine and travelling
via MS-DOS, GNU/Linux, Windows and, these days, macOS.</p>
<p>The changes I made last year have served me really well, but there were two
related issues with it that bothered me a little: the fact that I was
maintaining a local library of elisp code in the repository and, worse
still, I was storing the packages I'd installed from elpa and melpa in the
repository as well.</p>
<p>While this did mean it was pretty easy for me to start up a new installation
of emacs on a machine -- all I had to do was clone the repo and run up emacs
-- I wasn't happy with the duplication involved. I didn't like holding code
in my <code>.emacs.d</code> repo that was already held in package archives.</p>
<p>The solution I saw was in two parts:</p>
<ol>
<li>Get some of my code, that might be useful to others, into melpa.</li>
<li>Somehow sort my own package archive for my personal code.</li>
</ol>
<p></p>

<p>Over the past week or so I've worked on this approach. It initially started
with me tackling item 1 above: I tidied up and
submitted
<a href="https://github.com/davep/obfusurl.el" rel="noopener noreferrer" target="_blank"><code>obfusurl.el</code></a>,
<a href="https://github.com/davep/protocols.el" rel="noopener noreferrer" target="_blank"><code>protocols.el</code></a>,
<a href="https://github.com/davep/services.el" rel="noopener noreferrer" target="_blank"><code>services.el</code></a>,
<a href="https://github.com/davep/thinks.el" rel="noopener noreferrer" target="_blank"><code>thinks.el</code></a> and
<a href="https://github.com/davep/uptimes.el" rel="noopener noreferrer" target="_blank"><code>uptimes.el</code></a>. This was a really
helpful process in that it allowed me to brush up on my elisp and emacs
knowledge. It's a good 15+ years since I last wrote any significant elisp
code and things have moved on a little in that time.</p>
<p>Having done that I'd managed to move a handful of my own packages out of my
local library of code, and so out of my <code>.emacs.d</code> repo, but it left me with
the problem of what to do with the rest of it.</p>
<p>That's when I discovered <code>package-x</code> and:</p>
<div class="highlight"><pre><span></span><code>,----[ C-h f package-upload-buffer RET ]
| package-upload-buffer is an interactive compiled Lisp function in
| ‚Äòpackage-x.el‚Äô.
|
| (package-upload-buffer)
|
| Upload the current buffer as a single-file Emacs Lisp package.
| If ‚Äòpackage-archive-upload-base‚Äô does not specify a valid upload
| destination, prompt for one.
`----
</code></pre></div>

<p>(plus <code>package-upload-file</code> too, of course). This meant I could, in effect,
start my own personal package archive and look at tackling issue 2 above.</p>
<p>This did give me one small problem though: how and where would I host the
archive? I did consider hosting it on a DigitalOcean droplet, but that felt
a little like overkill for something so simple. And then I
realised: <a href="https://pages.github.com/" rel="noopener noreferrer" target="_blank">GitHub Pages</a>! All I needed to do was
keep the package archive in its own repo (which I would have done anyway)
and then make the whole repo the source for a GitHub Pages site. A quick
test later and... it worked!</p>
<p>So, by this point, I'd farmed some of my code off to melpa, and now had the
rest of it in "delpa" (which I'd called my personal archive). I could now
use the emacs package management system to install third party packages and
also my own.</p>
<p>But I was still left with one issue: I was still holding the installed
packages inside my <code>.emacs.d</code> repo by way of ensuring that all machines were
in sync in terms of what was installed. Now I needed to work out how to
solve that.</p>
<p>Around this time, as luck would have
it, <a href="https://github.com/tarsius" rel="noopener noreferrer" target="_blank">@tarsius</a>
had
<a href="https://github.com/davep/boxquote.el/pull/1#issuecomment-288462491" rel="noopener noreferrer" target="_blank">suggested I look at</a> a
package called <a href="https://github.com/jwiegley/use-package" rel="noopener noreferrer" target="_blank"><code>use-package</code></a>
by <a href="https://github.com/jwiegley" rel="noopener noreferrer" target="_blank">@jwiegley</a>. This was the bit I was missing.</p>
<p>With <code>use-package</code> I would be able to declare which packages I needed, how
they'd be installed and, most important of all, it could be set to handle
the fact that the package wasn't even installed. If a package is requested
and there is no local install <code>use-package</code> is smart enough to get the emacs
package system to install it.</p>
<p>So, given that, all I need to do was <a href="https://github.com/davep/.emacs.d/blob/1fa67c2895f345098057654f6acb3b57a77f1194/startup/davep-packages.el" rel="noopener noreferrer" target="_blank">create a startup file that would
declare the packages I use</a> and
I'd have a setup that should, once I'd cloned <code>.emacs.d</code>, self-install.</p>
<p>Except... yeah, one more issue. <code>use-package</code> isn't part of GNU emacs yet so
I'd need a method of getting it to auto-install so it could then handle
everything else. As it was that was as easy as adding this to the start of
my <a href="https://github.com/davep/.emacs.d/blob/master/init.el" rel="noopener noreferrer" target="_blank"><code>init.el</code></a>.</p>
<div class="highlight"><pre><span></span><code><span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span class="c1">;; Make sure the package system is up and running early on.</span>
<span class="p">(</span><span class="nb">require</span><span class="w"> </span><span class="ss">&#39;package</span><span class="p">)</span>
<span class="p">(</span><span class="nv">add-to-list</span><span class="w"> </span><span class="ss">&#39;package-archives</span><span class="w"> </span><span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;melpa&quot;</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="s">&quot;http://melpa.org/packages/&quot;</span><span class="p">))</span>
<span class="p">(</span><span class="nv">add-to-list</span><span class="w"> </span><span class="ss">&#39;package-archives</span><span class="w"> </span><span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;delpa&quot;</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="s">&quot;http://blog.davep.org/delpa/&quot;</span><span class="p">))</span>
<span class="p">(</span><span class="nv">package-initialize</span><span class="p">)</span>

<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span class="c1">;; Bootstrap `use-package&#39;</span>
<span class="p">(</span><span class="nb">unless</span><span class="w"> </span><span class="p">(</span><span class="nv">package-installed-p</span><span class="w"> </span><span class="ss">&#39;use-package</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nv">package-refresh-contents</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nv">package-install</span><span class="w"> </span><span class="ss">&#39;use-package</span><span class="p">))</span>
</code></pre></div>

<p>With that in place I was able to nuke all my config on a machine, clone a
fresh copy of <code>.emacs.d</code> (having now ceased tracking and storing the
installed packages in that repo), run up emacs, wait a few moments and then
find that everything was installed and ready to use.</p>
<p>Perfect!</p>
<p>My <a href="https://github.com/davep/.emacs.d" rel="noopener noreferrer" target="_blank"><code>.emacs.d</code></a> is now a lot smaller than
it was before and, I think, even easier to maintain. Right now I think I'm
very close to the ideal emacs config that I wanted to create when I did the
complete rewrite a year ago.</p>
        </div>
        
        <div class="tags">
            
            <a href="/tag/emacs.html" class="tag">Emacs</a>
            
            <a href="/tag/lisp.html" class="tag">Lisp</a>
            
            <a href="/tag/emacs-lisp.html" class="tag">Emacs Lisp</a>
            
            <a href="/tag/coding.html" class="tag">coding</a>
            
        </div>
        
    </article>
    
    <article class="post-summary">
        <h2><a href="/2017/03/10/jsng.html">jsNG</a></h2>
        
        <time datetime="2017-03-10T10:14:47+00:00"><a href="/2017/">2017</a>-<a href="/2017/03/">03</a>-<a href="/2017/03/10/">10</a> 10:14:47 UTC</time>
        
        <div class="reading-time">4 min read</div>
        
        <div class="category">
            <a href="/category/coding.html" class="category-link">Coding</a>
        </div>
        
        <div class="post-content">
            <p>Like many programmers, I have a couple of "Hello, World" projects that I've
carried with me over the years. One is 5x5 (which has been used to get to
grips with things as diverse as the Palm Pilot and GNU emacs). Another
is <a href="https://en.wikipedia.org/wiki/Norton_Guides" rel="noopener noreferrer" target="_blank">Norton Guides database</a>
<a href="http://www.davep.org/norton-guides/" rel="noopener noreferrer" target="_blank">readers</a>.</p>
<p>I've made Norton Guides tools that have allowed web servers to serve guides
(<code>w3ng</code>), that have allowed you to convert guides to HTML (<code>ng2html</code>), that
have let you read guides on OS/2 and GNU/Linux (<code>eg</code>) and also have let you
read guides in Microsoft Windows (<code>weg</code>). It's a problem I know fairly well
and one where I know the solution well enough so I can concentrate on
learning the new language or environment.</p>
<p>Recently I wanted to get to grips with some
"pure" <a href="http://es6-features.org/#Constants" rel="noopener noreferrer" target="_blank">ES6</a> coding while also getting
to know <a href="https://nodejs.org/en/" rel="noopener noreferrer" target="_blank">node.js</a>. A new version of the Norton Guide
code, written for this environment, seemed like a good thing to do.</p>
<p>And so <a href="https://github.com/davep/jsNG" rel="noopener noreferrer" target="_blank">jsNG</a> was born.</p>
<p>At its core is <a href="https://github.com/davep/jsNG/tree/master/lib" rel="noopener noreferrer" target="_blank">a library of code for opening and reading data from Norton
Guides databases</a>. While I
doubt it's good ES6 code, or even good node.js code, it's been very useful
in giving me a fun problem to solve and it'll carry on being something I'll
tweak and tinker with by way of trying new things out.</p>
<p>On top of this I've built a handful of tools for working with Norton Guides
databases. The most useful one at the moment (the others are more in the
"test the library" than the "make something handy with the library"
category) is <code>ngserve</code>. This is designed as a simple Norton Guides database
HTTP server.</p>
<p><img alt="ngserve in action" src="/attachments/2017/03/10/Screen Shot 2017-03-10 at 10.10.18.png#centre" /></p>
<p>When run, you give it a list of guides to serve:</p>
<p><img alt="Starting ngserve" src="/attachments/2017/03/10/Screen Shot 2017-03-10 at 10.26.44.png#centre" /></p>
<p>and it does the right thing. It has a small number of command line options
that help configure what it does:</p>
<p><img alt="ngserve command line options" src="/attachments/2017/03/10/Screen Shot 2017-03-10 at 10.29.28.png#centre" /></p>
<p>Possibly the most useful are the ones that let you change how it handles
"higher" DOS characters and, if you don't like the default colours and
stuff, the option that lets you point to your own style sheet (note for now
you'll need to host the stylesheet somewhere else -- ngserve won't serve it
for you; I'm aiming to change that in some way in the near future).</p>
<p>jsNG does have a fairly basic design compromise at its heart. In the very
early version I started out using the async functions for opening and
reading the guides. This got very tedious very quickly and I could see that
it was going to make for a very messy library with a very messy interface.
While it might not be in the spirit of node.js programming I decided to go
with the sync version of the file IO functions and code up the core library
based around this.</p>
<p>This approach also means that I took another leap that I never have done
with Norton Guides before: rather than doing the traditional thing of
keeping an open handle into them and reading direct from the file as you
navigate the guide, I simply read it all into a buffer in one go and keep it
in memory. This is a "guides are small, memory is cheap, things will go
faster" approach.</p>
<p>It does mean that when you load up a load of guides into <code>ngserve</code> they're
all sat in memory. The upside of this is that things should be a lot faster
and the code is a lot easier to follow (I think). To put this in some
perspective: I have a directory here that contains 110 Norton Guides files.
They total 36M in size. If that seems like a lot of stuff to hold in
memory... remind me how much is being used by your web browser so you can
look at some hilarious kittens. ;)</p>
<p>Anyway, that's where I'm at with it right now. The code is mostly settled
and mostly tidy. I need to write up some documentation for it (and so I need
to take a look at good JavaScript documentation tools) and perhaps tinker
with <code>ngserve</code> a little more. I'd also like to do a new version of <code>ng2html</code>
with this -- a version that makes it <em>far</em> easier to control the style of
the output. I'm also tempted to do a CLI-based reader in pure ES6; something
similar to <code>EG</code> or <code>WEG</code>.</p>
<p>All in good time.</p>
        </div>
        
        <div class="tags">
            
            <a href="/tag/norton-guide.html" class="tag">Norton Guide</a>
            
            <a href="/tag/coding.html" class="tag">Coding</a>
            
            <a href="/tag/javascript.html" class="tag">JavaScript</a>
            
        </div>
        
    </article>
    
    

    

<nav class="pagination" aria-label="Page navigation">
    
    
    <a href="/tag/coding.html" class="pagination-link pagination-prev">‚Üê Previous</a>
    

    
    
    
        
            
            
    <a href="/tag/coding.html" class="pagination-link pagination-number">1</a>
            
            
        
    
        
            
            
    <span class="pagination-link pagination-number pagination-current" aria-current="page">2</span>
            
            
        
    
        
            
            
    <a href="/tag/coding/3.html" class="pagination-link pagination-number">3</a>
            
            
        
    

    
    
    <a href="/tag/coding/3.html" class="pagination-link pagination-next">Next ‚Üí</a>
    
</nav>


</div>

            </main>

            <footer>
                <p>Generated with <a href="https://github.com/davep/blogmore" target="_blank" rel="noopener noreferrer">Blogmore</a></p>
            </footer>
        </div>
    </div>
</body>
</html>